var oL=Object.defineProperty;var E1=n=>{throw TypeError(n)};var aL=(n,e,t)=>e in n?oL(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>aL(n,typeof e!="symbol"?e+"":e,t),bv=(n,e,t)=>e.has(n)||E1("Cannot "+t);var l=(n,e,t)=>(bv(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>e.has(n)?E1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),w=(n,e,t,r)=>(bv(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),E=(n,e,t)=>(bv(n,e,"access private method"),t);var Et=(n,e,t,r)=>({set _(s){w(n,e,s,t)},get _(){return l(n,e,r)}});function lL(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function Ib(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hE={exports:{}},Ry={},fE={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip=Symbol.for("react.element"),cL=Symbol.for("react.portal"),uL=Symbol.for("react.fragment"),dL=Symbol.for("react.strict_mode"),hL=Symbol.for("react.profiler"),fL=Symbol.for("react.provider"),pL=Symbol.for("react.context"),gL=Symbol.for("react.forward_ref"),mL=Symbol.for("react.suspense"),yL=Symbol.for("react.memo"),vL=Symbol.for("react.lazy"),C1=Symbol.iterator;function wL(n){return n===null||typeof n!="object"?null:(n=C1&&n[C1]||n["@@iterator"],typeof n=="function"?n:null)}var pE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gE=Object.assign,mE={};function Cd(n,e,t){this.props=n,this.context=e,this.refs=mE,this.updater=t||pE}Cd.prototype.isReactComponent={};Cd.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Cd.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function yE(){}yE.prototype=Cd.prototype;function Db(n,e,t){this.props=n,this.context=e,this.refs=mE,this.updater=t||pE}var Ob=Db.prototype=new yE;Ob.constructor=Db;gE(Ob,Cd.prototype);Ob.isPureReactComponent=!0;var _1=Array.isArray,vE=Object.prototype.hasOwnProperty,Fb={current:null},wE={key:!0,ref:!0,__self:!0,__source:!0};function bE(n,e,t){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)vE.call(e,r)&&!wE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ip,type:n,key:i,ref:o,props:s,_owner:Fb.current}}function bL(n,e){return{$$typeof:Ip,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function jb(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ip}function xL(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var T1=/\/+/g;function xv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?xL(""+n.key):e.toString(36)}function Pg(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ip:case cL:o=!0}}if(o)return o=n,s=s(o),n=r===""?"."+xv(o,0):r,_1(s)?(t="",n!=null&&(t=n.replace(T1,"$&/")+"/"),Pg(s,e,t,"",function(u){return u})):s!=null&&(jb(s)&&(s=bL(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(T1,"$&/")+"/")+n)),e.push(s)),1;if(o=0,r=r===""?".":r+":",_1(n))for(var a=0;a<n.length;a++){i=n[a];var c=r+xv(i,a);o+=Pg(i,e,t,c,s)}else if(c=wL(n),typeof c=="function")for(n=c.call(n),a=0;!(i=n.next()).done;)i=i.value,c=r+xv(i,a++),o+=Pg(i,e,t,c,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jp(n,e,t){if(n==null)return n;var r=[],s=0;return Pg(n,r,"","",function(i){return e.call(t,i,s++)}),r}function SL(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var xn={current:null},Rg={transition:null},AL={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Rg,ReactCurrentOwner:Fb};function xE(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Jp,forEach:function(n,e,t){Jp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Jp(n,function(){e++}),e},toArray:function(n){return Jp(n,function(e){return e})||[]},only:function(n){if(!jb(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ye.Component=Cd;ye.Fragment=uL;ye.Profiler=hL;ye.PureComponent=Db;ye.StrictMode=dL;ye.Suspense=mL;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AL;ye.act=xE;ye.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=gE({},n.props),s=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Fb.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)vE.call(e,c)&&!wE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ip,type:n.type,key:s,ref:i,props:r,_owner:o}};ye.createContext=function(n){return n={$$typeof:pL,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:fL,_context:n},n.Consumer=n};ye.createElement=bE;ye.createFactory=function(n){var e=bE.bind(null,n);return e.type=n,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(n){return{$$typeof:gL,render:n}};ye.isValidElement=jb;ye.lazy=function(n){return{$$typeof:vL,_payload:{_status:-1,_result:n},_init:SL}};ye.memo=function(n,e){return{$$typeof:yL,type:n,compare:e===void 0?null:e}};ye.startTransition=function(n){var e=Rg.transition;Rg.transition={};try{n()}finally{Rg.transition=e}};ye.unstable_act=xE;ye.useCallback=function(n,e){return xn.current.useCallback(n,e)};ye.useContext=function(n){return xn.current.useContext(n)};ye.useDebugValue=function(){};ye.useDeferredValue=function(n){return xn.current.useDeferredValue(n)};ye.useEffect=function(n,e){return xn.current.useEffect(n,e)};ye.useId=function(){return xn.current.useId()};ye.useImperativeHandle=function(n,e,t){return xn.current.useImperativeHandle(n,e,t)};ye.useInsertionEffect=function(n,e){return xn.current.useInsertionEffect(n,e)};ye.useLayoutEffect=function(n,e){return xn.current.useLayoutEffect(n,e)};ye.useMemo=function(n,e){return xn.current.useMemo(n,e)};ye.useReducer=function(n,e,t){return xn.current.useReducer(n,e,t)};ye.useRef=function(n){return xn.current.useRef(n)};ye.useState=function(n){return xn.current.useState(n)};ye.useSyncExternalStore=function(n,e,t){return xn.current.useSyncExternalStore(n,e,t)};ye.useTransition=function(){return xn.current.useTransition()};ye.version="18.3.1";fE.exports=ye;var _=fE.exports;const X=Ib(_),SE=lL({__proto__:null,default:X},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EL=_,CL=Symbol.for("react.element"),_L=Symbol.for("react.fragment"),TL=Object.prototype.hasOwnProperty,PL=EL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RL={key:!0,ref:!0,__self:!0,__source:!0};function AE(n,e,t){var r,s={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)TL.call(e,r)&&!RL.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:CL,type:n,key:i,ref:o,props:s,_owner:PL.current}}Ry.Fragment=_L;Ry.jsx=AE;Ry.jsxs=AE;hE.exports=Ry;var R=hE.exports,EE={exports:{}},cr={},CE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,L){var I=D.length;D.push(L);e:for(;0<I;){var j=I-1>>>1,H=D[j];if(0<s(H,L))D[j]=L,D[I]=H,I=j;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var L=D[0],I=D.pop();if(I!==L){D[0]=I;e:for(var j=0,H=D.length,U=H>>>1;j<U;){var q=2*(j+1)-1,se=D[q],oe=q+1,Q=D[oe];if(0>s(se,I))oe<H&&0>s(Q,se)?(D[j]=Q,D[oe]=I,j=oe):(D[j]=se,D[q]=I,j=q);else if(oe<H&&0>s(Q,I))D[j]=Q,D[oe]=I,j=oe;else break e}}return L}function s(D,L){var I=D.sortIndex-L.sortIndex;return I!==0?I:D.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var L=t(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=D)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=t(u)}}function A(D){if(g=!1,x(D),!m)if(t(c)!==null)m=!0,B(C);else{var L=t(u);L!==null&&O(A,L.startTime-D)}}function C(D,L){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var I=f;try{for(x(L),h=t(c);h!==null&&(!(h.expirationTime>L)||D&&!F());){var j=h.callback;if(typeof j=="function"){h.callback=null,f=h.priorityLevel;var H=j(h.expirationTime<=L);L=n.unstable_now(),typeof H=="function"?h.callback=H:h===t(c)&&r(c),x(L)}else r(c);h=t(c)}if(h!==null)var U=!0;else{var q=t(u);q!==null&&O(A,q.startTime-L),U=!1}return U}finally{h=null,f=I,p=!1}}var T=!1,P=null,k=-1,N=5,M=-1;function F(){return!(n.unstable_now()-M<N)}function z(){if(P!==null){var D=n.unstable_now();M=D;var L=!0;try{L=P(!0,D)}finally{L?V():(T=!1,P=null)}}else T=!1}var V;if(typeof v=="function")V=function(){v(z)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Y=$.port2;$.port1.onmessage=z,V=function(){Y.postMessage(null)}}else V=function(){b(z,0)};function B(D){P=D,T||(T=!0,V())}function O(D,L){k=b(function(){D(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){m||p||(m=!0,B(C))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var I=f;f=L;try{return D()}finally{f=I}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,L){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var I=f;f=D;try{return L()}finally{f=I}},n.unstable_scheduleCallback=function(D,L,I){var j=n.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?j+I:j):I=j,D){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=I+H,D={id:d++,callback:L,priorityLevel:D,startTime:I,expirationTime:H,sortIndex:-1},I>j?(D.sortIndex=I,e(u,D),t(c)===null&&D===t(u)&&(g?(y(k),k=-1):g=!0,O(A,I-j))):(D.sortIndex=H,e(c,D),m||p||(m=!0,B(C))),D},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(D){var L=f;return function(){var I=f;f=L;try{return D.apply(this,arguments)}finally{f=I}}}})(_E);CE.exports=_E;var kL=CE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LL=_,lr=kL;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TE=new Set,Rh={};function dc(n,e){fd(n,e),fd(n+"Capture",e)}function fd(n,e){for(Rh[n]=e,n=0;n<e.length;n++)TE.add(e[n])}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c0=Object.prototype.hasOwnProperty,NL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P1={},R1={};function ML(n){return c0.call(R1,n)?!0:c0.call(P1,n)?!1:NL.test(n)?R1[n]=!0:(P1[n]=!0,!1)}function IL(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function DL(n,e,t,r){if(e===null||typeof e>"u"||IL(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(n,e,t,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Vt[n]=new Sn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Vt[e]=new Sn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Vt[n]=new Sn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Vt[n]=new Sn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Vt[n]=new Sn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Vt[n]=new Sn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Vt[n]=new Sn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Vt[n]=new Sn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Vt[n]=new Sn(n,5,!1,n.toLowerCase(),null,!1,!1)});var $b=/[\-:]([a-z])/g;function Bb(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($b,Bb);Vt[e]=new Sn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($b,Bb);Vt[e]=new Sn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($b,Bb);Vt[e]=new Sn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Vt[n]=new Sn(n,1,!1,n.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Vt[n]=new Sn(n,1,!1,n.toLowerCase(),null,!0,!0)});function zb(n,e,t,r){var s=Vt.hasOwnProperty(e)?Vt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DL(e,t,s,r)&&(t=null),r||s===null?ML(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var eo=LL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zp=Symbol.for("react.element"),_c=Symbol.for("react.portal"),Tc=Symbol.for("react.fragment"),Hb=Symbol.for("react.strict_mode"),u0=Symbol.for("react.profiler"),PE=Symbol.for("react.provider"),RE=Symbol.for("react.context"),Ub=Symbol.for("react.forward_ref"),d0=Symbol.for("react.suspense"),h0=Symbol.for("react.suspense_list"),Vb=Symbol.for("react.memo"),ho=Symbol.for("react.lazy"),kE=Symbol.for("react.offscreen"),k1=Symbol.iterator;function Dd(n){return n===null||typeof n!="object"?null:(n=k1&&n[k1]||n["@@iterator"],typeof n=="function"?n:null)}var tt=Object.assign,Sv;function Yd(n){if(Sv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Sv=e&&e[1]||""}return`
`+Sv+n}var Av=!1;function Ev(n,e){if(!n||Av)return"";Av=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{Av=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Yd(n):""}function OL(n){switch(n.tag){case 5:return Yd(n.type);case 16:return Yd("Lazy");case 13:return Yd("Suspense");case 19:return Yd("SuspenseList");case 0:case 2:case 15:return n=Ev(n.type,!1),n;case 11:return n=Ev(n.type.render,!1),n;case 1:return n=Ev(n.type,!0),n;default:return""}}function f0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Tc:return"Fragment";case _c:return"Portal";case u0:return"Profiler";case Hb:return"StrictMode";case d0:return"Suspense";case h0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case RE:return(n.displayName||"Context")+".Consumer";case PE:return(n._context.displayName||"Context")+".Provider";case Ub:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Vb:return e=n.displayName||null,e!==null?e:f0(n.type)||"Memo";case ho:e=n._payload,n=n._init;try{return f0(n(e))}catch{}}return null}function FL(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f0(e);case 8:return e===Hb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ga(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function LE(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function jL(n){var e=LE(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function eg(n){n._valueTracker||(n._valueTracker=jL(n))}function NE(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=LE(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function wm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function p0(n,e){var t=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function L1(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=ga(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ME(n,e){e=e.checked,e!=null&&zb(n,"checked",e,!1)}function g0(n,e){ME(n,e);var t=ga(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?m0(n,e.type,t):e.hasOwnProperty("defaultValue")&&m0(n,e.type,ga(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function N1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function m0(n,e,t){(e!=="number"||wm(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Kd=Array.isArray;function zc(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+ga(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function y0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function M1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(Kd(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ga(t)}}function IE(n,e){var t=ga(e.value),r=ga(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function I1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function DE(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?DE(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var tg,OE=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(tg=tg||document.createElement("div"),tg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function kh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$L=["Webkit","ms","Moz","O"];Object.keys(vh).forEach(function(n){$L.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),vh[e]=vh[n]})});function FE(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||vh.hasOwnProperty(n)&&vh[n]?(""+e).trim():e+"px"}function jE(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=FE(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var BL=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function w0(n,e){if(e){if(BL[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function b0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var x0=null;function Wb(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var S0=null,Hc=null,Uc=null;function D1(n){if(n=Fp(n)){if(typeof S0!="function")throw Error(W(280));var e=n.stateNode;e&&(e=Iy(e),S0(n.stateNode,n.type,e))}}function $E(n){Hc?Uc?Uc.push(n):Uc=[n]:Hc=n}function BE(){if(Hc){var n=Hc,e=Uc;if(Uc=Hc=null,D1(n),e)for(n=0;n<e.length;n++)D1(e[n])}}function zE(n,e){return n(e)}function HE(){}var Cv=!1;function UE(n,e,t){if(Cv)return n(e,t);Cv=!0;try{return zE(n,e,t)}finally{Cv=!1,(Hc!==null||Uc!==null)&&(HE(),BE())}}function Lh(n,e){var t=n.stateNode;if(t===null)return null;var r=Iy(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var A0=!1;if(Vi)try{var Od={};Object.defineProperty(Od,"passive",{get:function(){A0=!0}}),window.addEventListener("test",Od,Od),window.removeEventListener("test",Od,Od)}catch{A0=!1}function zL(n,e,t,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var wh=!1,bm=null,xm=!1,E0=null,HL={onError:function(n){wh=!0,bm=n}};function UL(n,e,t,r,s,i,o,a,c){wh=!1,bm=null,zL.apply(HL,arguments)}function VL(n,e,t,r,s,i,o,a,c){if(UL.apply(this,arguments),wh){if(wh){var u=bm;wh=!1,bm=null}else throw Error(W(198));xm||(xm=!0,E0=u)}}function hc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function VE(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function O1(n){if(hc(n)!==n)throw Error(W(188))}function WL(n){var e=n.alternate;if(!e){if(e=hc(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return O1(s),n;if(i===r)return O1(s),e;i=i.sibling}throw Error(W(188))}if(t.return!==r.return)t=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==r)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function WE(n){return n=WL(n),n!==null?GE(n):null}function GE(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=GE(n);if(e!==null)return e;n=n.sibling}return null}var qE=lr.unstable_scheduleCallback,F1=lr.unstable_cancelCallback,GL=lr.unstable_shouldYield,qL=lr.unstable_requestPaint,dt=lr.unstable_now,XL=lr.unstable_getCurrentPriorityLevel,Gb=lr.unstable_ImmediatePriority,XE=lr.unstable_UserBlockingPriority,Sm=lr.unstable_NormalPriority,YL=lr.unstable_LowPriority,YE=lr.unstable_IdlePriority,ky=null,Ws=null;function KL(n){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(ky,n,void 0,(n.current.flags&128)===128)}catch{}}var rs=Math.clz32?Math.clz32:ZL,QL=Math.log,JL=Math.LN2;function ZL(n){return n>>>=0,n===0?32:31-(QL(n)/JL|0)|0}var ng=64,rg=4194304;function Qd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Am(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~s;a!==0?r=Qd(a):(i&=o,i!==0&&(r=Qd(i)))}else o=t&~s,o!==0?r=Qd(o):i!==0&&(r=Qd(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-rs(e),s=1<<t,r|=n[t],e&=~s;return r}function eN(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tN(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-rs(i),a=1<<o,c=s[o];c===-1?(!(a&t)||a&r)&&(s[o]=eN(a,e)):c<=e&&(n.expiredLanes|=a),i&=~a}}function C0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function KE(){var n=ng;return ng<<=1,!(ng&4194240)&&(ng=64),n}function _v(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Dp(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-rs(e),n[e]=t}function nN(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-rs(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function qb(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-rs(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var Te=0;function QE(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var JE,Xb,ZE,eC,tC,_0=!1,sg=[],aa=null,la=null,ca=null,Nh=new Map,Mh=new Map,po=[],rN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j1(n,e){switch(n){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":Nh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(e.pointerId)}}function Fd(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Fp(e),e!==null&&Xb(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function sN(n,e,t,r,s){switch(e){case"focusin":return aa=Fd(aa,n,e,t,r,s),!0;case"dragenter":return la=Fd(la,n,e,t,r,s),!0;case"mouseover":return ca=Fd(ca,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Nh.set(i,Fd(Nh.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Mh.set(i,Fd(Mh.get(i)||null,n,e,t,r,s)),!0}return!1}function nC(n){var e=Fa(n.target);if(e!==null){var t=hc(e);if(t!==null){if(e=t.tag,e===13){if(e=VE(t),e!==null){n.blockedOn=e,tC(n.priority,function(){ZE(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function kg(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=T0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);x0=r,t.target.dispatchEvent(r),x0=null}else return e=Fp(t),e!==null&&Xb(e),n.blockedOn=t,!1;e.shift()}return!0}function $1(n,e,t){kg(n)&&t.delete(e)}function iN(){_0=!1,aa!==null&&kg(aa)&&(aa=null),la!==null&&kg(la)&&(la=null),ca!==null&&kg(ca)&&(ca=null),Nh.forEach($1),Mh.forEach($1)}function jd(n,e){n.blockedOn===e&&(n.blockedOn=null,_0||(_0=!0,lr.unstable_scheduleCallback(lr.unstable_NormalPriority,iN)))}function Ih(n){function e(s){return jd(s,n)}if(0<sg.length){jd(sg[0],n);for(var t=1;t<sg.length;t++){var r=sg[t];r.blockedOn===n&&(r.blockedOn=null)}}for(aa!==null&&jd(aa,n),la!==null&&jd(la,n),ca!==null&&jd(ca,n),Nh.forEach(e),Mh.forEach(e),t=0;t<po.length;t++)r=po[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<po.length&&(t=po[0],t.blockedOn===null);)nC(t),t.blockedOn===null&&po.shift()}var Vc=eo.ReactCurrentBatchConfig,Em=!0;function oN(n,e,t,r){var s=Te,i=Vc.transition;Vc.transition=null;try{Te=1,Yb(n,e,t,r)}finally{Te=s,Vc.transition=i}}function aN(n,e,t,r){var s=Te,i=Vc.transition;Vc.transition=null;try{Te=4,Yb(n,e,t,r)}finally{Te=s,Vc.transition=i}}function Yb(n,e,t,r){if(Em){var s=T0(n,e,t,r);if(s===null)Ov(n,e,r,Cm,t),j1(n,r);else if(sN(s,n,e,t,r))r.stopPropagation();else if(j1(n,r),e&4&&-1<rN.indexOf(n)){for(;s!==null;){var i=Fp(s);if(i!==null&&JE(i),i=T0(n,e,t,r),i===null&&Ov(n,e,r,Cm,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ov(n,e,r,null,t)}}var Cm=null;function T0(n,e,t,r){if(Cm=null,n=Wb(r),n=Fa(n),n!==null)if(e=hc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=VE(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Cm=n,null}function rC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XL()){case Gb:return 1;case XE:return 4;case Sm:case YL:return 16;case YE:return 536870912;default:return 16}default:return 16}}var sa=null,Kb=null,Lg=null;function sC(){if(Lg)return Lg;var n,e=Kb,t=e.length,r,s="value"in sa?sa.value:sa.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===s[i-r];r++);return Lg=s.slice(n,1<r?1-r:void 0)}function Ng(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function ig(){return!0}function B1(){return!1}function ur(n){function e(t,r,s,i,o){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ig:B1,this.isPropagationStopped=B1,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ig)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ig)},persist:function(){},isPersistent:ig}),e}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qb=ur(_d),Op=tt({},_d,{view:0,detail:0}),lN=ur(Op),Tv,Pv,$d,Ly=tt({},Op,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jb,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==$d&&($d&&n.type==="mousemove"?(Tv=n.screenX-$d.screenX,Pv=n.screenY-$d.screenY):Pv=Tv=0,$d=n),Tv)},movementY:function(n){return"movementY"in n?n.movementY:Pv}}),z1=ur(Ly),cN=tt({},Ly,{dataTransfer:0}),uN=ur(cN),dN=tt({},Op,{relatedTarget:0}),Rv=ur(dN),hN=tt({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),fN=ur(hN),pN=tt({},_d,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),gN=ur(pN),mN=tt({},_d,{data:0}),H1=ur(mN),yN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bN(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=wN[n])?!!e[n]:!1}function Jb(){return bN}var xN=tt({},Op,{key:function(n){if(n.key){var e=yN[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Ng(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?vN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jb,charCode:function(n){return n.type==="keypress"?Ng(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ng(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),SN=ur(xN),AN=tt({},Ly,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U1=ur(AN),EN=tt({},Op,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jb}),CN=ur(EN),_N=tt({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),TN=ur(_N),PN=tt({},Ly,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),RN=ur(PN),kN=[9,13,27,32],Zb=Vi&&"CompositionEvent"in window,bh=null;Vi&&"documentMode"in document&&(bh=document.documentMode);var LN=Vi&&"TextEvent"in window&&!bh,iC=Vi&&(!Zb||bh&&8<bh&&11>=bh),V1=" ",W1=!1;function oC(n,e){switch(n){case"keyup":return kN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pc=!1;function NN(n,e){switch(n){case"compositionend":return aC(e);case"keypress":return e.which!==32?null:(W1=!0,V1);case"textInput":return n=e.data,n===V1&&W1?null:n;default:return null}}function MN(n,e){if(Pc)return n==="compositionend"||!Zb&&oC(n,e)?(n=sC(),Lg=Kb=sa=null,Pc=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iC&&e.locale!=="ko"?null:e.data;default:return null}}var IN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!IN[n.type]:e==="textarea"}function lC(n,e,t,r){$E(r),e=_m(e,"onChange"),0<e.length&&(t=new Qb("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var xh=null,Dh=null;function DN(n){wC(n,0)}function Ny(n){var e=Lc(n);if(NE(e))return n}function ON(n,e){if(n==="change")return e}var cC=!1;if(Vi){var kv;if(Vi){var Lv="oninput"in document;if(!Lv){var q1=document.createElement("div");q1.setAttribute("oninput","return;"),Lv=typeof q1.oninput=="function"}kv=Lv}else kv=!1;cC=kv&&(!document.documentMode||9<document.documentMode)}function X1(){xh&&(xh.detachEvent("onpropertychange",uC),Dh=xh=null)}function uC(n){if(n.propertyName==="value"&&Ny(Dh)){var e=[];lC(e,Dh,n,Wb(n)),UE(DN,e)}}function FN(n,e,t){n==="focusin"?(X1(),xh=e,Dh=t,xh.attachEvent("onpropertychange",uC)):n==="focusout"&&X1()}function jN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ny(Dh)}function $N(n,e){if(n==="click")return Ny(e)}function BN(n,e){if(n==="input"||n==="change")return Ny(e)}function zN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var is=typeof Object.is=="function"?Object.is:zN;function Oh(n,e){if(is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!c0.call(e,s)||!is(n[s],e[s]))return!1}return!0}function Y1(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function K1(n,e){var t=Y1(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Y1(t)}}function dC(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?dC(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function hC(){for(var n=window,e=wm();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=wm(n.document)}return e}function ex(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function HN(n){var e=hC(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&dC(t.ownerDocument.documentElement,t)){if(r!==null&&ex(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=K1(t,i);var o=K1(t,r);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var UN=Vi&&"documentMode"in document&&11>=document.documentMode,Rc=null,P0=null,Sh=null,R0=!1;function Q1(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;R0||Rc==null||Rc!==wm(r)||(r=Rc,"selectionStart"in r&&ex(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sh&&Oh(Sh,r)||(Sh=r,r=_m(P0,"onSelect"),0<r.length&&(e=new Qb("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Rc)))}function og(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var kc={animationend:og("Animation","AnimationEnd"),animationiteration:og("Animation","AnimationIteration"),animationstart:og("Animation","AnimationStart"),transitionend:og("Transition","TransitionEnd")},Nv={},fC={};Vi&&(fC=document.createElement("div").style,"AnimationEvent"in window||(delete kc.animationend.animation,delete kc.animationiteration.animation,delete kc.animationstart.animation),"TransitionEvent"in window||delete kc.transitionend.transition);function My(n){if(Nv[n])return Nv[n];if(!kc[n])return n;var e=kc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fC)return Nv[n]=e[t];return n}var pC=My("animationend"),gC=My("animationiteration"),mC=My("animationstart"),yC=My("transitionend"),vC=new Map,J1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(n,e){vC.set(n,e),dc(e,[n])}for(var Mv=0;Mv<J1.length;Mv++){var Iv=J1[Mv],VN=Iv.toLowerCase(),WN=Iv[0].toUpperCase()+Iv.slice(1);Ea(VN,"on"+WN)}Ea(pC,"onAnimationEnd");Ea(gC,"onAnimationIteration");Ea(mC,"onAnimationStart");Ea("dblclick","onDoubleClick");Ea("focusin","onFocus");Ea("focusout","onBlur");Ea(yC,"onTransitionEnd");fd("onMouseEnter",["mouseout","mouseover"]);fd("onMouseLeave",["mouseout","mouseover"]);fd("onPointerEnter",["pointerout","pointerover"]);fd("onPointerLeave",["pointerout","pointerover"]);dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jd));function Z1(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,VL(r,e,void 0,n),n.currentTarget=null}function wC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Z1(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Z1(s,a,u),i=c}}}if(xm)throw n=E0,xm=!1,E0=null,n}function Be(n,e){var t=e[I0];t===void 0&&(t=e[I0]=new Set);var r=n+"__bubble";t.has(r)||(bC(e,n,2,!1),t.add(r))}function Dv(n,e,t){var r=0;e&&(r|=4),bC(t,n,r,e)}var ag="_reactListening"+Math.random().toString(36).slice(2);function Fh(n){if(!n[ag]){n[ag]=!0,TE.forEach(function(t){t!=="selectionchange"&&(GN.has(t)||Dv(t,!1,n),Dv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[ag]||(e[ag]=!0,Dv("selectionchange",!1,e))}}function bC(n,e,t,r){switch(rC(e)){case 1:var s=oN;break;case 4:s=aN;break;default:s=Yb}t=s.bind(null,e,t,n),s=void 0,!A0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Ov(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Fa(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}UE(function(){var u=i,d=Wb(t),h=[];e:{var f=vC.get(n);if(f!==void 0){var p=Qb,m=n;switch(n){case"keypress":if(Ng(t)===0)break e;case"keydown":case"keyup":p=SN;break;case"focusin":m="focus",p=Rv;break;case"focusout":m="blur",p=Rv;break;case"beforeblur":case"afterblur":p=Rv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=z1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=uN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=CN;break;case pC:case gC:case mC:p=fN;break;case yC:p=TN;break;case"scroll":p=lN;break;case"wheel":p=RN;break;case"copy":case"cut":case"paste":p=gN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=U1}var g=(e&4)!==0,b=!g&&n==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var v=u,x;v!==null;){x=v;var A=x.stateNode;if(x.tag===5&&A!==null&&(x=A,y!==null&&(A=Lh(v,y),A!=null&&g.push(jh(v,A,x)))),b)break;v=v.return}0<g.length&&(f=new p(f,m,null,t,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==x0&&(m=t.relatedTarget||t.fromElement)&&(Fa(m)||m[Wi]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=t.relatedTarget||t.toElement,p=u,m=m?Fa(m):null,m!==null&&(b=hc(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=z1,A="onMouseLeave",y="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(g=U1,A="onPointerLeave",y="onPointerEnter",v="pointer"),b=p==null?f:Lc(p),x=m==null?f:Lc(m),f=new g(A,v+"leave",p,t,d),f.target=b,f.relatedTarget=x,A=null,Fa(d)===u&&(g=new g(y,v+"enter",m,t,d),g.target=x,g.relatedTarget=b,A=g),b=A,p&&m)t:{for(g=p,y=m,v=0,x=g;x;x=vc(x))v++;for(x=0,A=y;A;A=vc(A))x++;for(;0<v-x;)g=vc(g),v--;for(;0<x-v;)y=vc(y),x--;for(;v--;){if(g===y||y!==null&&g===y.alternate)break t;g=vc(g),y=vc(y)}g=null}else g=null;p!==null&&eS(h,f,p,g,!1),m!==null&&b!==null&&eS(h,b,m,g,!0)}}e:{if(f=u?Lc(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=ON;else if(G1(f))if(cC)C=BN;else{C=jN;var T=FN}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=$N);if(C&&(C=C(n,u))){lC(h,C,t,d);break e}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&m0(f,"number",f.value)}switch(T=u?Lc(u):window,n){case"focusin":(G1(T)||T.contentEditable==="true")&&(Rc=T,P0=u,Sh=null);break;case"focusout":Sh=P0=Rc=null;break;case"mousedown":R0=!0;break;case"contextmenu":case"mouseup":case"dragend":R0=!1,Q1(h,t,d);break;case"selectionchange":if(UN)break;case"keydown":case"keyup":Q1(h,t,d)}var P;if(Zb)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Pc?oC(n,t)&&(k="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(iC&&t.locale!=="ko"&&(Pc||k!=="onCompositionStart"?k==="onCompositionEnd"&&Pc&&(P=sC()):(sa=d,Kb="value"in sa?sa.value:sa.textContent,Pc=!0)),T=_m(u,k),0<T.length&&(k=new H1(k,n,null,t,d),h.push({event:k,listeners:T}),P?k.data=P:(P=aC(t),P!==null&&(k.data=P)))),(P=LN?NN(n,t):MN(n,t))&&(u=_m(u,"onBeforeInput"),0<u.length&&(d=new H1("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=P))}wC(h,e)})}function jh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function _m(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Lh(n,t),i!=null&&r.unshift(jh(n,i,s)),i=Lh(n,e),i!=null&&r.push(jh(n,i,s))),n=n.return}return r}function vc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function eS(n,e,t,r,s){for(var i=e._reactName,o=[];t!==null&&t!==r;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Lh(t,i),c!=null&&o.unshift(jh(t,c,a))):s||(c=Lh(t,i),c!=null&&o.push(jh(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var qN=/\r\n?/g,XN=/\u0000|\uFFFD/g;function tS(n){return(typeof n=="string"?n:""+n).replace(qN,`
`).replace(XN,"")}function lg(n,e,t){if(e=tS(e),tS(n)!==e&&t)throw Error(W(425))}function Tm(){}var k0=null,L0=null;function N0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var M0=typeof setTimeout=="function"?setTimeout:void 0,YN=typeof clearTimeout=="function"?clearTimeout:void 0,nS=typeof Promise=="function"?Promise:void 0,KN=typeof queueMicrotask=="function"?queueMicrotask:typeof nS<"u"?function(n){return nS.resolve(null).then(n).catch(QN)}:M0;function QN(n){setTimeout(function(){throw n})}function Fv(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Ih(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Ih(e)}function ua(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function rS(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Td=Math.random().toString(36).slice(2),zs="__reactFiber$"+Td,$h="__reactProps$"+Td,Wi="__reactContainer$"+Td,I0="__reactEvents$"+Td,JN="__reactListeners$"+Td,ZN="__reactHandles$"+Td;function Fa(n){var e=n[zs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Wi]||t[zs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=rS(n);n!==null;){if(t=n[zs])return t;n=rS(n)}return e}n=t,t=n.parentNode}return null}function Fp(n){return n=n[zs]||n[Wi],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Lc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function Iy(n){return n[$h]||null}var D0=[],Nc=-1;function Ca(n){return{current:n}}function ze(n){0>Nc||(n.current=D0[Nc],D0[Nc]=null,Nc--)}function Fe(n,e){Nc++,D0[Nc]=n.current,n.current=e}var ma={},sn=Ca(ma),Mn=Ca(!1),rc=ma;function pd(n,e){var t=n.type.contextTypes;if(!t)return ma;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function In(n){return n=n.childContextTypes,n!=null}function Pm(){ze(Mn),ze(sn)}function sS(n,e,t){if(sn.current!==ma)throw Error(W(168));Fe(sn,e),Fe(Mn,t)}function xC(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(W(108,FL(n)||"Unknown",s));return tt({},t,r)}function Rm(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ma,rc=sn.current,Fe(sn,n),Fe(Mn,Mn.current),!0}function iS(n,e,t){var r=n.stateNode;if(!r)throw Error(W(169));t?(n=xC(n,e,rc),r.__reactInternalMemoizedMergedChildContext=n,ze(Mn),ze(sn),Fe(sn,n)):ze(Mn),Fe(Mn,t)}var ai=null,Dy=!1,jv=!1;function SC(n){ai===null?ai=[n]:ai.push(n)}function eM(n){Dy=!0,SC(n)}function _a(){if(!jv&&ai!==null){jv=!0;var n=0,e=Te;try{var t=ai;for(Te=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}ai=null,Dy=!1}catch(s){throw ai!==null&&(ai=ai.slice(n+1)),qE(Gb,_a),s}finally{Te=e,jv=!1}}return null}var Mc=[],Ic=0,km=null,Lm=0,br=[],xr=0,sc=null,$i=1,Bi="";function ka(n,e){Mc[Ic++]=Lm,Mc[Ic++]=km,km=n,Lm=e}function AC(n,e,t){br[xr++]=$i,br[xr++]=Bi,br[xr++]=sc,sc=n;var r=$i;n=Bi;var s=32-rs(r)-1;r&=~(1<<s),t+=1;var i=32-rs(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$i=1<<32-rs(e)+s|t<<s|r,Bi=i+n}else $i=1<<i|t<<s|r,Bi=n}function tx(n){n.return!==null&&(ka(n,1),AC(n,1,0))}function nx(n){for(;n===km;)km=Mc[--Ic],Mc[Ic]=null,Lm=Mc[--Ic],Mc[Ic]=null;for(;n===sc;)sc=br[--xr],br[xr]=null,Bi=br[--xr],br[xr]=null,$i=br[--xr],br[xr]=null}var ir=null,sr=null,Xe=!1,ts=null;function EC(n,e){var t=Er(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function oS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ir=n,sr=ua(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ir=n,sr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=sc!==null?{id:$i,overflow:Bi}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Er(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ir=n,sr=null,!0):!1;default:return!1}}function O0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function F0(n){if(Xe){var e=sr;if(e){var t=e;if(!oS(n,e)){if(O0(n))throw Error(W(418));e=ua(t.nextSibling);var r=ir;e&&oS(n,e)?EC(r,t):(n.flags=n.flags&-4097|2,Xe=!1,ir=n)}}else{if(O0(n))throw Error(W(418));n.flags=n.flags&-4097|2,Xe=!1,ir=n}}}function aS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ir=n}function cg(n){if(n!==ir)return!1;if(!Xe)return aS(n),Xe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!N0(n.type,n.memoizedProps)),e&&(e=sr)){if(O0(n))throw CC(),Error(W(418));for(;e;)EC(n,e),e=ua(e.nextSibling)}if(aS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){sr=ua(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}sr=null}}else sr=ir?ua(n.stateNode.nextSibling):null;return!0}function CC(){for(var n=sr;n;)n=ua(n.nextSibling)}function gd(){sr=ir=null,Xe=!1}function rx(n){ts===null?ts=[n]:ts.push(n)}var tM=eo.ReactCurrentBatchConfig;function Bd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var r=t.stateNode}if(!r)throw Error(W(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function ug(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function lS(n){var e=n._init;return e(n._payload)}function _C(n){function e(y,v){if(n){var x=y.deletions;x===null?(y.deletions=[v],y.flags|=16):x.push(v)}}function t(y,v){if(!n)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=pa(y,v),y.index=0,y.sibling=null,y}function i(y,v,x){return y.index=x,n?(x=y.alternate,x!==null?(x=x.index,x<v?(y.flags|=2,v):x):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,v,x,A){return v===null||v.tag!==6?(v=Wv(x,y.mode,A),v.return=y,v):(v=s(v,x),v.return=y,v)}function c(y,v,x,A){var C=x.type;return C===Tc?d(y,v,x.props.children,A,x.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ho&&lS(C)===v.type)?(A=s(v,x.props),A.ref=Bd(y,v,x),A.return=y,A):(A=$g(x.type,x.key,x.props,null,y.mode,A),A.ref=Bd(y,v,x),A.return=y,A)}function u(y,v,x,A){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=Gv(x,y.mode,A),v.return=y,v):(v=s(v,x.children||[]),v.return=y,v)}function d(y,v,x,A,C){return v===null||v.tag!==7?(v=tc(x,y.mode,A,C),v.return=y,v):(v=s(v,x),v.return=y,v)}function h(y,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Wv(""+v,y.mode,x),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Zp:return x=$g(v.type,v.key,v.props,null,y.mode,x),x.ref=Bd(y,null,v),x.return=y,x;case _c:return v=Gv(v,y.mode,x),v.return=y,v;case ho:var A=v._init;return h(y,A(v._payload),x)}if(Kd(v)||Dd(v))return v=tc(v,y.mode,x,null),v.return=y,v;ug(y,v)}return null}function f(y,v,x,A){var C=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:a(y,v,""+x,A);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Zp:return x.key===C?c(y,v,x,A):null;case _c:return x.key===C?u(y,v,x,A):null;case ho:return C=x._init,f(y,v,C(x._payload),A)}if(Kd(x)||Dd(x))return C!==null?null:d(y,v,x,A,null);ug(y,x)}return null}function p(y,v,x,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(x)||null,a(v,y,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Zp:return y=y.get(A.key===null?x:A.key)||null,c(v,y,A,C);case _c:return y=y.get(A.key===null?x:A.key)||null,u(v,y,A,C);case ho:var T=A._init;return p(y,v,x,T(A._payload),C)}if(Kd(A)||Dd(A))return y=y.get(x)||null,d(v,y,A,C,null);ug(v,A)}return null}function m(y,v,x,A){for(var C=null,T=null,P=v,k=v=0,N=null;P!==null&&k<x.length;k++){P.index>k?(N=P,P=null):N=P.sibling;var M=f(y,P,x[k],A);if(M===null){P===null&&(P=N);break}n&&P&&M.alternate===null&&e(y,P),v=i(M,v,k),T===null?C=M:T.sibling=M,T=M,P=N}if(k===x.length)return t(y,P),Xe&&ka(y,k),C;if(P===null){for(;k<x.length;k++)P=h(y,x[k],A),P!==null&&(v=i(P,v,k),T===null?C=P:T.sibling=P,T=P);return Xe&&ka(y,k),C}for(P=r(y,P);k<x.length;k++)N=p(P,y,k,x[k],A),N!==null&&(n&&N.alternate!==null&&P.delete(N.key===null?k:N.key),v=i(N,v,k),T===null?C=N:T.sibling=N,T=N);return n&&P.forEach(function(F){return e(y,F)}),Xe&&ka(y,k),C}function g(y,v,x,A){var C=Dd(x);if(typeof C!="function")throw Error(W(150));if(x=C.call(x),x==null)throw Error(W(151));for(var T=C=null,P=v,k=v=0,N=null,M=x.next();P!==null&&!M.done;k++,M=x.next()){P.index>k?(N=P,P=null):N=P.sibling;var F=f(y,P,M.value,A);if(F===null){P===null&&(P=N);break}n&&P&&F.alternate===null&&e(y,P),v=i(F,v,k),T===null?C=F:T.sibling=F,T=F,P=N}if(M.done)return t(y,P),Xe&&ka(y,k),C;if(P===null){for(;!M.done;k++,M=x.next())M=h(y,M.value,A),M!==null&&(v=i(M,v,k),T===null?C=M:T.sibling=M,T=M);return Xe&&ka(y,k),C}for(P=r(y,P);!M.done;k++,M=x.next())M=p(P,y,k,M.value,A),M!==null&&(n&&M.alternate!==null&&P.delete(M.key===null?k:M.key),v=i(M,v,k),T===null?C=M:T.sibling=M,T=M);return n&&P.forEach(function(z){return e(y,z)}),Xe&&ka(y,k),C}function b(y,v,x,A){if(typeof x=="object"&&x!==null&&x.type===Tc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Zp:e:{for(var C=x.key,T=v;T!==null;){if(T.key===C){if(C=x.type,C===Tc){if(T.tag===7){t(y,T.sibling),v=s(T,x.props.children),v.return=y,y=v;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ho&&lS(C)===T.type){t(y,T.sibling),v=s(T,x.props),v.ref=Bd(y,T,x),v.return=y,y=v;break e}t(y,T);break}else e(y,T);T=T.sibling}x.type===Tc?(v=tc(x.props.children,y.mode,A,x.key),v.return=y,y=v):(A=$g(x.type,x.key,x.props,null,y.mode,A),A.ref=Bd(y,v,x),A.return=y,y=A)}return o(y);case _c:e:{for(T=x.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){t(y,v.sibling),v=s(v,x.children||[]),v.return=y,y=v;break e}else{t(y,v);break}else e(y,v);v=v.sibling}v=Gv(x,y.mode,A),v.return=y,y=v}return o(y);case ho:return T=x._init,b(y,v,T(x._payload),A)}if(Kd(x))return m(y,v,x,A);if(Dd(x))return g(y,v,x,A);ug(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(t(y,v.sibling),v=s(v,x),v.return=y,y=v):(t(y,v),v=Wv(x,y.mode,A),v.return=y,y=v),o(y)):t(y,v)}return b}var md=_C(!0),TC=_C(!1),Nm=Ca(null),Mm=null,Dc=null,sx=null;function ix(){sx=Dc=Mm=null}function ox(n){var e=Nm.current;ze(Nm),n._currentValue=e}function j0(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Wc(n,e){Mm=n,sx=Dc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Nn=!0),n.firstContext=null)}function Tr(n){var e=n._currentValue;if(sx!==n)if(n={context:n,memoizedValue:e,next:null},Dc===null){if(Mm===null)throw Error(W(308));Dc=n,Mm.dependencies={lanes:0,firstContext:n}}else Dc=Dc.next=n;return e}var ja=null;function ax(n){ja===null?ja=[n]:ja.push(n)}function PC(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,ax(e)):(t.next=s.next,s.next=t),e.interleaved=t,Gi(n,r)}function Gi(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var fo=!1;function lx(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function zi(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function da(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gi(n,t)}return s=r.interleaved,s===null?(e.next=e,ax(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gi(n,t)}function Mg(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,qb(n,t)}}function cS(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Im(n,e,t,r){var s=n.updateQueue;fo=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=n,g=a;switch(f=e,p=t,g.tag){case 1:if(m=g.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=tt({},h,f);break e;case 2:fo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,c=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);oc|=o,n.lanes=o,n.memoizedState=h}}function uS(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var jp={},Gs=Ca(jp),Bh=Ca(jp),zh=Ca(jp);function $a(n){if(n===jp)throw Error(W(174));return n}function cx(n,e){switch(Fe(zh,e),Fe(Bh,n),Fe(Gs,jp),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=v0(e,n)}ze(Gs),Fe(Gs,e)}function yd(){ze(Gs),ze(Bh),ze(zh)}function kC(n){$a(zh.current);var e=$a(Gs.current),t=v0(e,n.type);e!==t&&(Fe(Bh,n),Fe(Gs,t))}function ux(n){Bh.current===n&&(ze(Gs),ze(Bh))}var Ze=Ca(0);function Dm(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $v=[];function dx(){for(var n=0;n<$v.length;n++)$v[n]._workInProgressVersionPrimary=null;$v.length=0}var Ig=eo.ReactCurrentDispatcher,Bv=eo.ReactCurrentBatchConfig,ic=0,et=null,xt=null,Nt=null,Om=!1,Ah=!1,Hh=0,nM=0;function qt(){throw Error(W(321))}function hx(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!is(n[t],e[t]))return!1;return!0}function fx(n,e,t,r,s,i){if(ic=i,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ig.current=n===null||n.memoizedState===null?oM:aM,n=t(r,s),Ah){i=0;do{if(Ah=!1,Hh=0,25<=i)throw Error(W(301));i+=1,Nt=xt=null,e.updateQueue=null,Ig.current=lM,n=t(r,s)}while(Ah)}if(Ig.current=Fm,e=xt!==null&&xt.next!==null,ic=0,Nt=xt=et=null,Om=!1,e)throw Error(W(300));return n}function px(){var n=Hh!==0;return Hh=0,n}function ws(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?et.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function Pr(){if(xt===null){var n=et.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var e=Nt===null?et.memoizedState:Nt.next;if(e!==null)Nt=e,xt=n;else{if(n===null)throw Error(W(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Nt===null?et.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Uh(n,e){return typeof e=="function"?e(n):e}function zv(n){var e=Pr(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=xt,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((ic&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=r):c=c.next=h,et.lanes|=d,oc|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,is(r,e.memoizedState)||(Nn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,et.lanes|=i,oc|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Hv(n){var e=Pr(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do i=n(i,o.action),o=o.next;while(o!==s);is(i,e.memoizedState)||(Nn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function LC(){}function NC(n,e){var t=et,r=Pr(),s=e(),i=!is(r.memoizedState,s);if(i&&(r.memoizedState=s,Nn=!0),r=r.queue,gx(DC.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||Nt!==null&&Nt.memoizedState.tag&1){if(t.flags|=2048,Vh(9,IC.bind(null,t,r,s,e),void 0,null),Mt===null)throw Error(W(349));ic&30||MC(t,e,s)}return s}function MC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function IC(n,e,t,r){e.value=t,e.getSnapshot=r,OC(e)&&FC(n)}function DC(n,e,t){return t(function(){OC(e)&&FC(n)})}function OC(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!is(n,t)}catch{return!0}}function FC(n){var e=Gi(n,1);e!==null&&ss(e,n,1,-1)}function dS(n){var e=ws();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uh,lastRenderedState:n},e.queue=n,n=n.dispatch=iM.bind(null,et,n),[e.memoizedState,n]}function Vh(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function jC(){return Pr().memoizedState}function Dg(n,e,t,r){var s=ws();et.flags|=n,s.memoizedState=Vh(1|e,t,void 0,r===void 0?null:r)}function Oy(n,e,t,r){var s=Pr();r=r===void 0?null:r;var i=void 0;if(xt!==null){var o=xt.memoizedState;if(i=o.destroy,r!==null&&hx(r,o.deps)){s.memoizedState=Vh(e,t,i,r);return}}et.flags|=n,s.memoizedState=Vh(1|e,t,i,r)}function hS(n,e){return Dg(8390656,8,n,e)}function gx(n,e){return Oy(2048,8,n,e)}function $C(n,e){return Oy(4,2,n,e)}function BC(n,e){return Oy(4,4,n,e)}function zC(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function HC(n,e,t){return t=t!=null?t.concat([n]):null,Oy(4,4,zC.bind(null,e,n),t)}function mx(){}function UC(n,e){var t=Pr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&hx(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function VC(n,e){var t=Pr();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&hx(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function WC(n,e,t){return ic&21?(is(t,e)||(t=KE(),et.lanes|=t,oc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Nn=!0),n.memoizedState=t)}function rM(n,e){var t=Te;Te=t!==0&&4>t?t:4,n(!0);var r=Bv.transition;Bv.transition={};try{n(!1),e()}finally{Te=t,Bv.transition=r}}function GC(){return Pr().memoizedState}function sM(n,e,t){var r=fa(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},qC(n))XC(e,t);else if(t=PC(n,e,t,r),t!==null){var s=wn();ss(t,n,r,s),YC(t,e,r)}}function iM(n,e,t){var r=fa(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(qC(n))XC(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(s.hasEagerState=!0,s.eagerState=a,is(a,o)){var c=e.interleaved;c===null?(s.next=s,ax(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=PC(n,e,s,r),t!==null&&(s=wn(),ss(t,n,r,s),YC(t,e,r))}}function qC(n){var e=n.alternate;return n===et||e!==null&&e===et}function XC(n,e){Ah=Om=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function YC(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,qb(n,t)}}var Fm={readContext:Tr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},oM={readContext:Tr,useCallback:function(n,e){return ws().memoizedState=[n,e===void 0?null:e],n},useContext:Tr,useEffect:hS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Dg(4194308,4,zC.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Dg(4194308,4,n,e)},useInsertionEffect:function(n,e){return Dg(4,2,n,e)},useMemo:function(n,e){var t=ws();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=ws();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=sM.bind(null,et,n),[r.memoizedState,n]},useRef:function(n){var e=ws();return n={current:n},e.memoizedState=n},useState:dS,useDebugValue:mx,useDeferredValue:function(n){return ws().memoizedState=n},useTransition:function(){var n=dS(!1),e=n[0];return n=rM.bind(null,n[1]),ws().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=et,s=ws();if(Xe){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),Mt===null)throw Error(W(349));ic&30||MC(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,hS(DC.bind(null,r,i,n),[n]),r.flags|=2048,Vh(9,IC.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=ws(),e=Mt.identifierPrefix;if(Xe){var t=Bi,r=$i;t=(r&~(1<<32-rs(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Hh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=nM++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},aM={readContext:Tr,useCallback:UC,useContext:Tr,useEffect:gx,useImperativeHandle:HC,useInsertionEffect:$C,useLayoutEffect:BC,useMemo:VC,useReducer:zv,useRef:jC,useState:function(){return zv(Uh)},useDebugValue:mx,useDeferredValue:function(n){var e=Pr();return WC(e,xt.memoizedState,n)},useTransition:function(){var n=zv(Uh)[0],e=Pr().memoizedState;return[n,e]},useMutableSource:LC,useSyncExternalStore:NC,useId:GC,unstable_isNewReconciler:!1},lM={readContext:Tr,useCallback:UC,useContext:Tr,useEffect:gx,useImperativeHandle:HC,useInsertionEffect:$C,useLayoutEffect:BC,useMemo:VC,useReducer:Hv,useRef:jC,useState:function(){return Hv(Uh)},useDebugValue:mx,useDeferredValue:function(n){var e=Pr();return xt===null?e.memoizedState=n:WC(e,xt.memoizedState,n)},useTransition:function(){var n=Hv(Uh)[0],e=Pr().memoizedState;return[n,e]},useMutableSource:LC,useSyncExternalStore:NC,useId:GC,unstable_isNewReconciler:!1};function jr(n,e){if(n&&n.defaultProps){e=tt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function $0(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:tt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Fy={isMounted:function(n){return(n=n._reactInternals)?hc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=wn(),s=fa(n),i=zi(r,s);i.payload=e,t!=null&&(i.callback=t),e=da(n,i,s),e!==null&&(ss(e,n,s,r),Mg(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=wn(),s=fa(n),i=zi(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=da(n,i,s),e!==null&&(ss(e,n,s,r),Mg(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=wn(),r=fa(n),s=zi(t,r);s.tag=2,e!=null&&(s.callback=e),e=da(n,s,r),e!==null&&(ss(e,n,r,t),Mg(e,n,r))}};function fS(n,e,t,r,s,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oh(t,r)||!Oh(s,i):!0}function KC(n,e,t){var r=!1,s=ma,i=e.contextType;return typeof i=="object"&&i!==null?i=Tr(i):(s=In(e)?rc:sn.current,r=e.contextTypes,i=(r=r!=null)?pd(n,s):ma),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fy,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function pS(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Fy.enqueueReplaceState(e,e.state,null)}function B0(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},lx(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Tr(i):(i=In(e)?rc:sn.current,s.context=pd(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&($0(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fy.enqueueReplaceState(s,s.state,null),Im(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function vd(n,e){try{var t="",r=e;do t+=OL(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function Uv(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function z0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var cM=typeof WeakMap=="function"?WeakMap:Map;function QC(n,e,t){t=zi(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){$m||($m=!0,Q0=r),z0(n,e)},t}function JC(n,e,t){t=zi(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){z0(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){z0(n,e),typeof r!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function gS(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new cM;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=AM.bind(null,n,e,t),e.then(n,n))}function mS(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function yS(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=zi(-1,1),e.tag=2,da(t,e,1))),t.lanes|=1),n)}var uM=eo.ReactCurrentOwner,Nn=!1;function pn(n,e,t,r){e.child=n===null?TC(e,null,t,r):md(e,n.child,t,r)}function vS(n,e,t,r,s){t=t.render;var i=e.ref;return Wc(e,s),r=fx(n,e,t,r,i,s),t=px(),n!==null&&!Nn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,qi(n,e,s)):(Xe&&t&&tx(e),e.flags|=1,pn(n,e,r,s),e.child)}function wS(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!Ex(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,ZC(n,e,i,r,s)):(n=$g(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Oh,t(o,r)&&n.ref===e.ref)return qi(n,e,s)}return e.flags|=1,n=pa(i,r),n.ref=e.ref,n.return=e,e.child=n}function ZC(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Oh(i,r)&&n.ref===e.ref)if(Nn=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(Nn=!0);else return e.lanes=n.lanes,qi(n,e,s)}return H0(n,e,t,r,s)}function e_(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Fc,er),er|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Fe(Fc,er),er|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Fe(Fc,er),er|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Fe(Fc,er),er|=r;return pn(n,e,s,t),e.child}function t_(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function H0(n,e,t,r,s){var i=In(t)?rc:sn.current;return i=pd(e,i),Wc(e,s),t=fx(n,e,t,r,i,s),r=px(),n!==null&&!Nn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,qi(n,e,s)):(Xe&&r&&tx(e),e.flags|=1,pn(n,e,t,s),e.child)}function bS(n,e,t,r,s){if(In(t)){var i=!0;Rm(e)}else i=!1;if(Wc(e,s),e.stateNode===null)Og(n,e),KC(e,t,r),B0(e,t,r,s),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Tr(u):(u=In(t)?rc:sn.current,u=pd(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&pS(e,o,r,u),fo=!1;var f=e.memoizedState;o.state=f,Im(e,r,o,s),c=e.memoizedState,a!==r||f!==c||Mn.current||fo?(typeof d=="function"&&($0(e,t,d,r),c=e.memoizedState),(a=fo||fS(e,t,a,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RC(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:jr(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Tr(c):(c=In(t)?rc:sn.current,c=pd(e,c));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&pS(e,o,r,c),fo=!1,f=e.memoizedState,o.state=f,Im(e,r,o,s);var m=e.memoizedState;a!==h||f!==m||Mn.current||fo?(typeof p=="function"&&($0(e,t,p,r),m=e.memoizedState),(u=fo||fS(e,t,u,r,f,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return U0(n,e,t,r,i,s)}function U0(n,e,t,r,s,i){t_(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&iS(e,t,!1),qi(n,e,i);r=e.stateNode,uM.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=md(e,n.child,null,i),e.child=md(e,null,a,i)):pn(n,e,a,i),e.memoizedState=r.state,s&&iS(e,t,!0),e.child}function n_(n){var e=n.stateNode;e.pendingContext?sS(n,e.pendingContext,e.pendingContext!==e.context):e.context&&sS(n,e.context,!1),cx(n,e.containerInfo)}function xS(n,e,t,r,s){return gd(),rx(s),e.flags|=256,pn(n,e,t,r),e.child}var V0={dehydrated:null,treeContext:null,retryLane:0};function W0(n){return{baseLanes:n,cachePool:null,transitions:null}}function r_(n,e,t){var r=e.pendingProps,s=Ze.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Fe(Ze,s&1),n===null)return F0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=By(o,r,0,null),n=tc(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=W0(t),e.memoizedState=V0,n):yx(e,o));if(s=n.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return dM(n,e,o,r,a,s,t);if(i){i=r.fallback,o=e.mode,s=n.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pa(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=pa(a,i):(i=tc(i,o,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=n.child.memoizedState,o=o===null?W0(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=V0,r}return i=n.child,n=i.sibling,r=pa(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function yx(n,e){return e=By({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function dg(n,e,t,r){return r!==null&&rx(r),md(e,n.child,null,t),n=yx(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function dM(n,e,t,r,s,i,o){if(t)return e.flags&256?(e.flags&=-257,r=Uv(Error(W(422))),dg(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=By({mode:"visible",children:r.children},s,0,null),i=tc(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&md(e,n.child,null,o),e.child.memoizedState=W0(o),e.memoizedState=V0,i);if(!(e.mode&1))return dg(n,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=Uv(i,r,void 0),dg(n,e,o,r)}if(a=(o&n.childLanes)!==0,Nn||a){if(r=Mt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Gi(n,s),ss(r,n,s,-1))}return Ax(),r=Uv(Error(W(421))),dg(n,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=EM.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,sr=ua(s.nextSibling),ir=e,Xe=!0,ts=null,n!==null&&(br[xr++]=$i,br[xr++]=Bi,br[xr++]=sc,$i=n.id,Bi=n.overflow,sc=e),e=yx(e,r.children),e.flags|=4096,e)}function SS(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),j0(n.return,e,t)}function Vv(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function s_(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pn(n,e,r.children,t),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&SS(n,t,e);else if(n.tag===19)SS(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Fe(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Dm(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Vv(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Dm(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Vv(e,!0,t,null,i);break;case"together":Vv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Og(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function qi(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),oc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=pa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=pa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function hM(n,e,t){switch(e.tag){case 3:n_(e),gd();break;case 5:kC(e);break;case 1:In(e.type)&&Rm(e);break;case 4:cx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Fe(Nm,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ze,Ze.current&1),e.flags|=128,null):t&e.child.childLanes?r_(n,e,t):(Fe(Ze,Ze.current&1),n=qi(n,e,t),n!==null?n.sibling:null);Fe(Ze,Ze.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return s_(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,e_(n,e,t)}return qi(n,e,t)}var i_,G0,o_,a_;i_=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};G0=function(){};o_=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,$a(Gs.current);var i=null;switch(t){case"input":s=p0(n,s),r=p0(n,r),i=[];break;case"select":s=tt({},s,{value:void 0}),r=tt({},r,{value:void 0}),i=[];break;case"textarea":s=y0(n,s),r=y0(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Tm)}w0(t,r);var o;t=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Be("scroll",n),i||a===c||(i=[])):(i=i||[]).push(u,c))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};a_=function(n,e,t,r){t!==r&&(e.flags|=4)};function zd(n,e){if(!Xe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Xt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function fM(n,e,t){var r=e.pendingProps;switch(nx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(e),null;case 1:return In(e.type)&&Pm(),Xt(e),null;case 3:return r=e.stateNode,yd(),ze(Mn),ze(sn),dx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(cg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ts!==null&&(ew(ts),ts=null))),G0(n,e),Xt(e),null;case 5:ux(e);var s=$a(zh.current);if(t=e.type,n!==null&&e.stateNode!=null)o_(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return Xt(e),null}if(n=$a(Gs.current),cg(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[zs]=e,r[$h]=i,n=(e.mode&1)!==0,t){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<Jd.length;s++)Be(Jd[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":L1(r,i),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Be("invalid",r);break;case"textarea":M1(r,i),Be("invalid",r)}w0(t,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&lg(r.textContent,a,n),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&lg(r.textContent,a,n),s=["children",""+a]):Rh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(t){case"input":eg(r),N1(r,i,!0);break;case"textarea":eg(r),I1(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Tm)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=DE(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[zs]=e,n[$h]=r,i_(n,e,!1,!1),e.stateNode=n;e:{switch(o=b0(t,r),t){case"dialog":Be("cancel",n),Be("close",n),s=r;break;case"iframe":case"object":case"embed":Be("load",n),s=r;break;case"video":case"audio":for(s=0;s<Jd.length;s++)Be(Jd[s],n);s=r;break;case"source":Be("error",n),s=r;break;case"img":case"image":case"link":Be("error",n),Be("load",n),s=r;break;case"details":Be("toggle",n),s=r;break;case"input":L1(n,r),s=p0(n,r),Be("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=tt({},r,{value:void 0}),Be("invalid",n);break;case"textarea":M1(n,r),s=y0(n,r),Be("invalid",n);break;default:s=r}w0(t,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?jE(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&OE(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&kh(n,c):typeof c=="number"&&kh(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Be("scroll",n):c!=null&&zb(n,i,c,o))}switch(t){case"input":eg(n),N1(n,r,!1);break;case"textarea":eg(n),I1(n);break;case"option":r.value!=null&&n.setAttribute("value",""+ga(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?zc(n,!!r.multiple,i,!1):r.defaultValue!=null&&zc(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Tm)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xt(e),null;case 6:if(n&&e.stateNode!=null)a_(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(t=$a(zh.current),$a(Gs.current),cg(e)){if(r=e.stateNode,t=e.memoizedProps,r[zs]=e,(i=r.nodeValue!==t)&&(n=ir,n!==null))switch(n.tag){case 3:lg(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&lg(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[zs]=e,e.stateNode=r}return Xt(e),null;case 13:if(ze(Ze),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Xe&&sr!==null&&e.mode&1&&!(e.flags&128))CC(),gd(),e.flags|=98560,i=!1;else if(i=cg(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[zs]=e}else gd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xt(e),i=!1}else ts!==null&&(ew(ts),ts=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ze.current&1?St===0&&(St=3):Ax())),e.updateQueue!==null&&(e.flags|=4),Xt(e),null);case 4:return yd(),G0(n,e),n===null&&Fh(e.stateNode.containerInfo),Xt(e),null;case 10:return ox(e.type._context),Xt(e),null;case 17:return In(e.type)&&Pm(),Xt(e),null;case 19:if(ze(Ze),i=e.memoizedState,i===null)return Xt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)zd(i,!1);else{if(St!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Dm(n),o!==null){for(e.flags|=128,zd(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Fe(Ze,Ze.current&1|2),e.child}n=n.sibling}i.tail!==null&&dt()>wd&&(e.flags|=128,r=!0,zd(i,!1),e.lanes=4194304)}else{if(!r)if(n=Dm(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),zd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Xe)return Xt(e),null}else 2*dt()-i.renderingStartTime>wd&&t!==1073741824&&(e.flags|=128,r=!0,zd(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=dt(),e.sibling=null,t=Ze.current,Fe(Ze,r?t&1|2:t&1),e):(Xt(e),null);case 22:case 23:return Sx(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?er&1073741824&&(Xt(e),e.subtreeFlags&6&&(e.flags|=8192)):Xt(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function pM(n,e){switch(nx(e),e.tag){case 1:return In(e.type)&&Pm(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return yd(),ze(Mn),ze(sn),dx(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return ux(e),null;case 13:if(ze(Ze),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));gd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ze(Ze),null;case 4:return yd(),null;case 10:return ox(e.type._context),null;case 22:case 23:return Sx(),null;case 24:return null;default:return null}}var hg=!1,nn=!1,gM=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Oc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){it(n,e,r)}else t.current=null}function q0(n,e,t){try{t()}catch(r){it(n,e,r)}}var AS=!1;function mM(n,e){if(k0=Em,n=hC(),ex(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var p;h!==t||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===n)break t;if(f===t&&++u===s&&(a=o),f===i&&++d===r&&(c=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(L0={focusedElem:n,selectionRange:t},Em=!1,ee=e;ee!==null;)if(e=ee,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ee=n;else for(;ee!==null;){e=ee;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,b=m.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:jr(e.type,g),b);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(A){it(e,e.return,A)}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}return m=AS,AS=!1,m}function Eh(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&q0(e,t,i)}s=s.next}while(s!==r)}}function jy(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function X0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function l_(n){var e=n.alternate;e!==null&&(n.alternate=null,l_(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[zs],delete e[$h],delete e[I0],delete e[JN],delete e[ZN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function c_(n){return n.tag===5||n.tag===3||n.tag===4}function ES(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||c_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Y0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Tm));else if(r!==4&&(n=n.child,n!==null))for(Y0(n,e,t),n=n.sibling;n!==null;)Y0(n,e,t),n=n.sibling}function K0(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(K0(n,e,t),n=n.sibling;n!==null;)K0(n,e,t),n=n.sibling}var Bt=null,es=!1;function oo(n,e,t){for(t=t.child;t!==null;)u_(n,e,t),t=t.sibling}function u_(n,e,t){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(ky,t)}catch{}switch(t.tag){case 5:nn||Oc(t,e);case 6:var r=Bt,s=es;Bt=null,oo(n,e,t),Bt=r,es=s,Bt!==null&&(es?(n=Bt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Bt.removeChild(t.stateNode));break;case 18:Bt!==null&&(es?(n=Bt,t=t.stateNode,n.nodeType===8?Fv(n.parentNode,t):n.nodeType===1&&Fv(n,t),Ih(n)):Fv(Bt,t.stateNode));break;case 4:r=Bt,s=es,Bt=t.stateNode.containerInfo,es=!0,oo(n,e,t),Bt=r,es=s;break;case 0:case 11:case 14:case 15:if(!nn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&q0(t,e,o),s=s.next}while(s!==r)}oo(n,e,t);break;case 1:if(!nn&&(Oc(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){it(t,e,a)}oo(n,e,t);break;case 21:oo(n,e,t);break;case 22:t.mode&1?(nn=(r=nn)||t.memoizedState!==null,oo(n,e,t),nn=r):oo(n,e,t);break;default:oo(n,e,t)}}function CS(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new gM),e.forEach(function(r){var s=CM.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Dr(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Bt=a.stateNode,es=!1;break e;case 3:Bt=a.stateNode.containerInfo,es=!0;break e;case 4:Bt=a.stateNode.containerInfo,es=!0;break e}a=a.return}if(Bt===null)throw Error(W(160));u_(i,o,s),Bt=null,es=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){it(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d_(e,n),e=e.sibling}function d_(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Dr(e,n),ps(n),r&4){try{Eh(3,n,n.return),jy(3,n)}catch(g){it(n,n.return,g)}try{Eh(5,n,n.return)}catch(g){it(n,n.return,g)}}break;case 1:Dr(e,n),ps(n),r&512&&t!==null&&Oc(t,t.return);break;case 5:if(Dr(e,n),ps(n),r&512&&t!==null&&Oc(t,t.return),n.flags&32){var s=n.stateNode;try{kh(s,"")}catch(g){it(n,n.return,g)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ME(s,i),b0(a,o);var u=b0(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?jE(s,h):d==="dangerouslySetInnerHTML"?OE(s,h):d==="children"?kh(s,h):zb(s,d,h,u)}switch(a){case"input":g0(s,i);break;case"textarea":IE(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?zc(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?zc(s,!!i.multiple,i.defaultValue,!0):zc(s,!!i.multiple,i.multiple?[]:"",!1))}s[$h]=i}catch(g){it(n,n.return,g)}}break;case 6:if(Dr(e,n),ps(n),r&4){if(n.stateNode===null)throw Error(W(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(g){it(n,n.return,g)}}break;case 3:if(Dr(e,n),ps(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Ih(e.containerInfo)}catch(g){it(n,n.return,g)}break;case 4:Dr(e,n),ps(n);break;case 13:Dr(e,n),ps(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bx=dt())),r&4&&CS(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(nn=(u=nn)||d,Dr(e,n),nn=u):Dr(e,n),ps(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(ee=n,d=n.child;d!==null;){for(h=ee=d;ee!==null;){switch(f=ee,p=f.child,f.tag){case 0:case 11:case 14:case 15:Eh(4,f,f.return);break;case 1:Oc(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){it(r,t,g)}}break;case 5:Oc(f,f.return);break;case 22:if(f.memoizedState!==null){TS(h);continue}}p!==null?(p.return=f,ee=p):TS(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=FE("display",o))}catch(g){it(n,n.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){it(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Dr(e,n),ps(n),r&4&&CS(n);break;case 21:break;default:Dr(e,n),ps(n)}}function ps(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(c_(t)){var r=t;break e}t=t.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kh(s,""),r.flags&=-33);var i=ES(n);K0(n,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ES(n);Y0(n,a,o);break;default:throw Error(W(161))}}catch(c){it(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function yM(n,e,t){ee=n,h_(n)}function h_(n,e,t){for(var r=(n.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hg;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||nn;a=hg;var u=nn;if(hg=o,(nn=c)&&!u)for(ee=s;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?PS(s):c!==null?(c.return=o,ee=c):PS(s);for(;i!==null;)ee=i,h_(i),i=i.sibling;ee=s,hg=a,nn=u}_S(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):_S(n)}}function _S(n){for(;ee!==null;){var e=ee;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||jy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:jr(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&uS(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}uS(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ih(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}nn||e.flags&512&&X0(e)}catch(f){it(e,e.return,f)}}if(e===n){ee=null;break}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}}function TS(n){for(;ee!==null;){var e=ee;if(e===n){ee=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ee=t;break}ee=e.return}}function PS(n){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{jy(4,e)}catch(c){it(e,t,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){it(e,s,c)}}var i=e.return;try{X0(e)}catch(c){it(e,i,c)}break;case 5:var o=e.return;try{X0(e)}catch(c){it(e,o,c)}}}catch(c){it(e,e.return,c)}if(e===n){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var vM=Math.ceil,jm=eo.ReactCurrentDispatcher,vx=eo.ReactCurrentOwner,Cr=eo.ReactCurrentBatchConfig,we=0,Mt=null,gt=null,Ut=0,er=0,Fc=Ca(0),St=0,Wh=null,oc=0,$y=0,wx=0,Ch=null,Ln=null,bx=0,wd=1/0,si=null,$m=!1,Q0=null,ha=null,fg=!1,ia=null,Bm=0,_h=0,J0=null,Fg=-1,jg=0;function wn(){return we&6?dt():Fg!==-1?Fg:Fg=dt()}function fa(n){return n.mode&1?we&2&&Ut!==0?Ut&-Ut:tM.transition!==null?(jg===0&&(jg=KE()),jg):(n=Te,n!==0||(n=window.event,n=n===void 0?16:rC(n.type)),n):1}function ss(n,e,t,r){if(50<_h)throw _h=0,J0=null,Error(W(185));Dp(n,t,r),(!(we&2)||n!==Mt)&&(n===Mt&&(!(we&2)&&($y|=t),St===4&&go(n,Ut)),Dn(n,r),t===1&&we===0&&!(e.mode&1)&&(wd=dt()+500,Dy&&_a()))}function Dn(n,e){var t=n.callbackNode;tN(n,e);var r=Am(n,n===Mt?Ut:0);if(r===0)t!==null&&F1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&F1(t),e===1)n.tag===0?eM(RS.bind(null,n)):SC(RS.bind(null,n)),KN(function(){!(we&6)&&_a()}),t=null;else{switch(QE(r)){case 1:t=Gb;break;case 4:t=XE;break;case 16:t=Sm;break;case 536870912:t=YE;break;default:t=Sm}t=b_(t,f_.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function f_(n,e){if(Fg=-1,jg=0,we&6)throw Error(W(327));var t=n.callbackNode;if(Gc()&&n.callbackNode!==t)return null;var r=Am(n,n===Mt?Ut:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=zm(n,r);else{e=r;var s=we;we|=2;var i=g_();(Mt!==n||Ut!==e)&&(si=null,wd=dt()+500,ec(n,e));do try{xM();break}catch(a){p_(n,a)}while(!0);ix(),jm.current=i,we=s,gt!==null?e=0:(Mt=null,Ut=0,e=St)}if(e!==0){if(e===2&&(s=C0(n),s!==0&&(r=s,e=Z0(n,s))),e===1)throw t=Wh,ec(n,0),go(n,r),Dn(n,dt()),t;if(e===6)go(n,r);else{if(s=n.current.alternate,!(r&30)&&!wM(s)&&(e=zm(n,r),e===2&&(i=C0(n),i!==0&&(r=i,e=Z0(n,i))),e===1))throw t=Wh,ec(n,0),go(n,r),Dn(n,dt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:La(n,Ln,si);break;case 3:if(go(n,r),(r&130023424)===r&&(e=bx+500-dt(),10<e)){if(Am(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){wn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=M0(La.bind(null,n,Ln,si),e);break}La(n,Ln,si);break;case 4:if(go(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var o=31-rs(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vM(r/1960))-r,10<r){n.timeoutHandle=M0(La.bind(null,n,Ln,si),r);break}La(n,Ln,si);break;case 5:La(n,Ln,si);break;default:throw Error(W(329))}}}return Dn(n,dt()),n.callbackNode===t?f_.bind(null,n):null}function Z0(n,e){var t=Ch;return n.current.memoizedState.isDehydrated&&(ec(n,e).flags|=256),n=zm(n,e),n!==2&&(e=Ln,Ln=t,e!==null&&ew(e)),n}function ew(n){Ln===null?Ln=n:Ln.push.apply(Ln,n)}function wM(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!is(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function go(n,e){for(e&=~wx,e&=~$y,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-rs(e),r=1<<t;n[t]=-1,e&=~r}}function RS(n){if(we&6)throw Error(W(327));Gc();var e=Am(n,0);if(!(e&1))return Dn(n,dt()),null;var t=zm(n,e);if(n.tag!==0&&t===2){var r=C0(n);r!==0&&(e=r,t=Z0(n,r))}if(t===1)throw t=Wh,ec(n,0),go(n,e),Dn(n,dt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,La(n,Ln,si),Dn(n,dt()),null}function xx(n,e){var t=we;we|=1;try{return n(e)}finally{we=t,we===0&&(wd=dt()+500,Dy&&_a())}}function ac(n){ia!==null&&ia.tag===0&&!(we&6)&&Gc();var e=we;we|=1;var t=Cr.transition,r=Te;try{if(Cr.transition=null,Te=1,n)return n()}finally{Te=r,Cr.transition=t,we=e,!(we&6)&&_a()}}function Sx(){er=Fc.current,ze(Fc)}function ec(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,YN(t)),gt!==null)for(t=gt.return;t!==null;){var r=t;switch(nx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pm();break;case 3:yd(),ze(Mn),ze(sn),dx();break;case 5:ux(r);break;case 4:yd();break;case 13:ze(Ze);break;case 19:ze(Ze);break;case 10:ox(r.type._context);break;case 22:case 23:Sx()}t=t.return}if(Mt=n,gt=n=pa(n.current,null),Ut=er=e,St=0,Wh=null,wx=$y=oc=0,Ln=Ch=null,ja!==null){for(e=0;e<ja.length;e++)if(t=ja[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}t.pending=r}ja=null}return n}function p_(n,e){do{var t=gt;try{if(ix(),Ig.current=Fm,Om){for(var r=et.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Om=!1}if(ic=0,Nt=xt=et=null,Ah=!1,Hh=0,vx.current=null,t===null||t.return===null){St=1,Wh=e,gt=null;break}e:{var i=n,o=t.return,a=t,c=e;if(e=Ut,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=mS(o);if(p!==null){p.flags&=-257,yS(p,o,a,i,e),p.mode&1&&gS(i,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break e}else{if(!(e&1)){gS(i,u,e),Ax();break e}c=Error(W(426))}}else if(Xe&&a.mode&1){var b=mS(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),yS(b,o,a,i,e),rx(vd(c,a));break e}}i=c=vd(c,a),St!==4&&(St=2),Ch===null?Ch=[i]:Ch.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=QC(i,c,e);cS(i,y);break e;case 1:a=c;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ha===null||!ha.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=JC(i,a,e);cS(i,A);break e}}i=i.return}while(i!==null)}y_(t)}catch(C){e=C,gt===t&&t!==null&&(gt=t=t.return);continue}break}while(!0)}function g_(){var n=jm.current;return jm.current=Fm,n===null?Fm:n}function Ax(){(St===0||St===3||St===2)&&(St=4),Mt===null||!(oc&268435455)&&!($y&268435455)||go(Mt,Ut)}function zm(n,e){var t=we;we|=2;var r=g_();(Mt!==n||Ut!==e)&&(si=null,ec(n,e));do try{bM();break}catch(s){p_(n,s)}while(!0);if(ix(),we=t,jm.current=r,gt!==null)throw Error(W(261));return Mt=null,Ut=0,St}function bM(){for(;gt!==null;)m_(gt)}function xM(){for(;gt!==null&&!GL();)m_(gt)}function m_(n){var e=w_(n.alternate,n,er);n.memoizedProps=n.pendingProps,e===null?y_(n):gt=e,vx.current=null}function y_(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=pM(t,e),t!==null){t.flags&=32767,gt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{St=6,gt=null;return}}else if(t=fM(t,e,er),t!==null){gt=t;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=n}while(e!==null);St===0&&(St=5)}function La(n,e,t){var r=Te,s=Cr.transition;try{Cr.transition=null,Te=1,SM(n,e,t,r)}finally{Cr.transition=s,Te=r}return null}function SM(n,e,t,r){do Gc();while(ia!==null);if(we&6)throw Error(W(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(nN(n,i),n===Mt&&(gt=Mt=null,Ut=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||fg||(fg=!0,b_(Sm,function(){return Gc(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Cr.transition,Cr.transition=null;var o=Te;Te=1;var a=we;we|=4,vx.current=null,mM(n,t),d_(t,n),HN(L0),Em=!!k0,L0=k0=null,n.current=t,yM(t),qL(),we=a,Te=o,Cr.transition=i}else n.current=t;if(fg&&(fg=!1,ia=n,Bm=s),i=n.pendingLanes,i===0&&(ha=null),KL(t.stateNode),Dn(n,dt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if($m)throw $m=!1,n=Q0,Q0=null,n;return Bm&1&&n.tag!==0&&Gc(),i=n.pendingLanes,i&1?n===J0?_h++:(_h=0,J0=n):_h=0,_a(),null}function Gc(){if(ia!==null){var n=QE(Bm),e=Cr.transition,t=Te;try{if(Cr.transition=null,Te=16>n?16:n,ia===null)var r=!1;else{if(n=ia,ia=null,Bm=0,we&6)throw Error(W(331));var s=we;for(we|=4,ee=n.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Eh(8,d,i)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var f=d.sibling,p=d.return;if(l_(d),d===u){ee=null;break}if(f!==null){f.return=p,ee=f;break}ee=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Eh(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,ee=y;break e}ee=i.return}}var v=n.current;for(ee=v;ee!==null;){o=ee;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ee=x;else e:for(o=v;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jy(9,a)}}catch(C){it(a,a.return,C)}if(a===o){ee=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ee=A;break e}ee=a.return}}if(we=s,_a(),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(ky,n)}catch{}r=!0}return r}finally{Te=t,Cr.transition=e}}return!1}function kS(n,e,t){e=vd(t,e),e=QC(n,e,1),n=da(n,e,1),e=wn(),n!==null&&(Dp(n,1,e),Dn(n,e))}function it(n,e,t){if(n.tag===3)kS(n,n,t);else for(;e!==null;){if(e.tag===3){kS(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ha===null||!ha.has(r))){n=vd(t,n),n=JC(e,n,1),e=da(e,n,1),n=wn(),e!==null&&(Dp(e,1,n),Dn(e,n));break}}e=e.return}}function AM(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=wn(),n.pingedLanes|=n.suspendedLanes&t,Mt===n&&(Ut&t)===t&&(St===4||St===3&&(Ut&130023424)===Ut&&500>dt()-bx?ec(n,0):wx|=t),Dn(n,e)}function v_(n,e){e===0&&(n.mode&1?(e=rg,rg<<=1,!(rg&130023424)&&(rg=4194304)):e=1);var t=wn();n=Gi(n,e),n!==null&&(Dp(n,e,t),Dn(n,t))}function EM(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),v_(n,t)}function CM(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),v_(n,t)}var w_;w_=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Mn.current)Nn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Nn=!1,hM(n,e,t);Nn=!!(n.flags&131072)}else Nn=!1,Xe&&e.flags&1048576&&AC(e,Lm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Og(n,e),n=e.pendingProps;var s=pd(e,sn.current);Wc(e,t),s=fx(null,e,r,n,s,t);var i=px();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(i=!0,Rm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lx(e),s.updater=Fy,e.stateNode=s,s._reactInternals=e,B0(e,r,n,t),e=U0(null,e,r,!0,i,t)):(e.tag=0,Xe&&i&&tx(e),pn(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Og(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=TM(r),n=jr(r,n),s){case 0:e=H0(null,e,r,n,t);break e;case 1:e=bS(null,e,r,n,t);break e;case 11:e=vS(null,e,r,n,t);break e;case 14:e=wS(null,e,r,jr(r.type,n),t);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),H0(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),bS(n,e,r,s,t);case 3:e:{if(n_(e),n===null)throw Error(W(387));r=e.pendingProps,i=e.memoizedState,s=i.element,RC(n,e),Im(e,r,null,t);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vd(Error(W(423)),e),e=xS(n,e,r,t,s);break e}else if(r!==s){s=vd(Error(W(424)),e),e=xS(n,e,r,t,s);break e}else for(sr=ua(e.stateNode.containerInfo.firstChild),ir=e,Xe=!0,ts=null,t=TC(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(gd(),r===s){e=qi(n,e,t);break e}pn(n,e,r,t)}e=e.child}return e;case 5:return kC(e),n===null&&F0(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,o=s.children,N0(r,s)?o=null:i!==null&&N0(r,i)&&(e.flags|=32),t_(n,e),pn(n,e,o,t),e.child;case 6:return n===null&&F0(e),null;case 13:return r_(n,e,t);case 4:return cx(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=md(e,null,r,t):pn(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),vS(n,e,r,s,t);case 7:return pn(n,e,e.pendingProps,t),e.child;case 8:return pn(n,e,e.pendingProps.children,t),e.child;case 12:return pn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Fe(Nm,r._currentValue),r._currentValue=o,i!==null)if(is(i.value,o)){if(i.children===s.children&&!Mn.current){e=qi(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=zi(-1,t&-t),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),j0(i.return,t,e),a.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),j0(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pn(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Wc(e,t),s=Tr(s),r=r(s),e.flags|=1,pn(n,e,r,t),e.child;case 14:return r=e.type,s=jr(r,e.pendingProps),s=jr(r.type,s),wS(n,e,r,s,t);case 15:return ZC(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:jr(r,s),Og(n,e),e.tag=1,In(r)?(n=!0,Rm(e)):n=!1,Wc(e,t),KC(e,r,s),B0(e,r,s,t),U0(null,e,r,!0,n,t);case 19:return s_(n,e,t);case 22:return e_(n,e,t)}throw Error(W(156,e.tag))};function b_(n,e){return qE(n,e)}function _M(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(n,e,t,r){return new _M(n,e,t,r)}function Ex(n){return n=n.prototype,!(!n||!n.isReactComponent)}function TM(n){if(typeof n=="function")return Ex(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Ub)return 11;if(n===Vb)return 14}return 2}function pa(n,e){var t=n.alternate;return t===null?(t=Er(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function $g(n,e,t,r,s,i){var o=2;if(r=n,typeof n=="function")Ex(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Tc:return tc(t.children,s,i,e);case Hb:o=8,s|=8;break;case u0:return n=Er(12,t,e,s|2),n.elementType=u0,n.lanes=i,n;case d0:return n=Er(13,t,e,s),n.elementType=d0,n.lanes=i,n;case h0:return n=Er(19,t,e,s),n.elementType=h0,n.lanes=i,n;case kE:return By(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case PE:o=10;break e;case RE:o=9;break e;case Ub:o=11;break e;case Vb:o=14;break e;case ho:o=16,r=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=Er(o,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function tc(n,e,t,r){return n=Er(7,n,r,e),n.lanes=t,n}function By(n,e,t,r){return n=Er(22,n,r,e),n.elementType=kE,n.lanes=t,n.stateNode={isHidden:!1},n}function Wv(n,e,t){return n=Er(6,n,null,e),n.lanes=t,n}function Gv(n,e,t){return e=Er(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function PM(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_v(0),this.expirationTimes=_v(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_v(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cx(n,e,t,r,s,i,o,a,c){return n=new PM(n,e,t,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Er(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},lx(i),n}function RM(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_c,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function x_(n){if(!n)return ma;n=n._reactInternals;e:{if(hc(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(In(t))return xC(n,t,e)}return e}function S_(n,e,t,r,s,i,o,a,c){return n=Cx(t,r,!0,n,s,i,o,a,c),n.context=x_(null),t=n.current,r=wn(),s=fa(t),i=zi(r,s),i.callback=e??null,da(t,i,s),n.current.lanes=s,Dp(n,s,r),Dn(n,r),n}function zy(n,e,t,r){var s=e.current,i=wn(),o=fa(s);return t=x_(t),e.context===null?e.context=t:e.pendingContext=t,e=zi(i,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=da(s,e,o),n!==null&&(ss(n,s,o,i),Mg(n,s,o)),o}function Hm(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function LS(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function _x(n,e){LS(n,e),(n=n.alternate)&&LS(n,e)}function kM(){return null}var A_=typeof reportError=="function"?reportError:function(n){console.error(n)};function Tx(n){this._internalRoot=n}Hy.prototype.render=Tx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));zy(n,e,null,null)};Hy.prototype.unmount=Tx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ac(function(){zy(null,n,null,null)}),e[Wi]=null}};function Hy(n){this._internalRoot=n}Hy.prototype.unstable_scheduleHydration=function(n){if(n){var e=eC();n={blockedOn:null,target:n,priority:e};for(var t=0;t<po.length&&e!==0&&e<po[t].priority;t++);po.splice(t,0,n),t===0&&nC(n)}};function Px(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uy(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function NS(){}function LM(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Hm(o);i.call(u)}}var o=S_(e,r,n,0,null,!1,!1,"",NS);return n._reactRootContainer=o,n[Wi]=o.current,Fh(n.nodeType===8?n.parentNode:n),ac(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Hm(c);a.call(u)}}var c=Cx(n,0,!1,null,null,!1,!1,"",NS);return n._reactRootContainer=c,n[Wi]=c.current,Fh(n.nodeType===8?n.parentNode:n),ac(function(){zy(e,c,t,r)}),c}function Vy(n,e,t,r,s){var i=t._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Hm(o);a.call(c)}}zy(e,o,n,s)}else o=LM(t,e,n,s,r);return Hm(o)}JE=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Qd(e.pendingLanes);t!==0&&(qb(e,t|1),Dn(e,dt()),!(we&6)&&(wd=dt()+500,_a()))}break;case 13:ac(function(){var r=Gi(n,1);if(r!==null){var s=wn();ss(r,n,1,s)}}),_x(n,1)}};Xb=function(n){if(n.tag===13){var e=Gi(n,134217728);if(e!==null){var t=wn();ss(e,n,134217728,t)}_x(n,134217728)}};ZE=function(n){if(n.tag===13){var e=fa(n),t=Gi(n,e);if(t!==null){var r=wn();ss(t,n,e,r)}_x(n,e)}};eC=function(){return Te};tC=function(n,e){var t=Te;try{return Te=n,e()}finally{Te=t}};S0=function(n,e,t){switch(e){case"input":if(g0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=Iy(r);if(!s)throw Error(W(90));NE(r),g0(r,s)}}}break;case"textarea":IE(n,t);break;case"select":e=t.value,e!=null&&zc(n,!!t.multiple,e,!1)}};zE=xx;HE=ac;var NM={usingClientEntryPoint:!1,Events:[Fp,Lc,Iy,$E,BE,xx]},Hd={findFiberByHostInstance:Fa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MM={bundleType:Hd.bundleType,version:Hd.version,rendererPackageName:Hd.rendererPackageName,rendererConfig:Hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=WE(n),n===null?null:n.stateNode},findFiberByHostInstance:Hd.findFiberByHostInstance||kM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pg.isDisabled&&pg.supportsFiber)try{ky=pg.inject(MM),Ws=pg}catch{}}cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NM;cr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Px(e))throw Error(W(200));return RM(n,e,null,t)};cr.createRoot=function(n,e){if(!Px(n))throw Error(W(299));var t=!1,r="",s=A_;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cx(n,1,!1,null,null,t,!1,r,s),n[Wi]=e.current,Fh(n.nodeType===8?n.parentNode:n),new Tx(e)};cr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=WE(e),n=n===null?null:n.stateNode,n};cr.flushSync=function(n){return ac(n)};cr.hydrate=function(n,e,t){if(!Uy(e))throw Error(W(200));return Vy(null,n,e,!0,t)};cr.hydrateRoot=function(n,e,t){if(!Px(n))throw Error(W(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",o=A_;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=S_(e,null,n,1,t??null,s,!1,i,o),n[Wi]=e.current,Fh(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Hy(e)};cr.render=function(n,e,t){if(!Uy(e))throw Error(W(200));return Vy(null,n,e,!1,t)};cr.unmountComponentAtNode=function(n){if(!Uy(n))throw Error(W(40));return n._reactRootContainer?(ac(function(){Vy(null,null,n,!1,function(){n._reactRootContainer=null,n[Wi]=null})}),!0):!1};cr.unstable_batchedUpdates=xx;cr.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Uy(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return Vy(n,e,t,!1,r)};cr.version="18.3.1-next-f1338f8080-20240426";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(n){console.error(n)}}E_(),EE.exports=cr;var $p=EE.exports;const C_=Ib($p);var __,MS=$p;__=MS.createRoot,MS.hydrateRoot;const IM=1,DM=1e6;let qv=0;function OM(){return qv=(qv+1)%Number.MAX_SAFE_INTEGER,qv.toString()}const Xv=new Map,IS=n=>{if(Xv.has(n))return;const e=setTimeout(()=>{Xv.delete(n),Th({type:"REMOVE_TOAST",toastId:n})},DM);Xv.set(n,e)},FM=(n,e)=>{switch(e.type){case"ADD_TOAST":return{...n,toasts:[e.toast,...n.toasts].slice(0,IM)};case"UPDATE_TOAST":return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?IS(t):n.toasts.forEach(r=>{IS(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Bg=[];let zg={toasts:[]};function Th(n){zg=FM(zg,n),Bg.forEach(e=>{e(zg)})}function jM({...n}){const e=OM(),t=s=>Th({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Th({type:"DISMISS_TOAST",toastId:e});return Th({type:"ADD_TOAST",toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function T_(){const[n,e]=_.useState(zg);return _.useEffect(()=>(Bg.push(e),()=>{const t=Bg.indexOf(e);t>-1&&Bg.splice(t,1)}),[n]),{...n,toast:jM,dismiss:t=>Th({type:"DISMISS_TOAST",toastId:t})}}function Oe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function DS(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function P_(...n){return e=>{let t=!1;const r=n.map(s=>{const i=DS(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():DS(n[s],null)}}}}function Wt(...n){return _.useCallback(P_(...n),n)}function Pd(n,e=[]){let t=[];function r(i,o){const a=_.createContext(o),c=t.length;t=[...t,o];const u=h=>{var y;const{scope:f,children:p,...m}=h,g=((y=f==null?void 0:f[n])==null?void 0:y[c])||a,b=_.useMemo(()=>m,Object.values(m));return R.jsx(g.Provider,{value:b,children:p})};u.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[n])==null?void 0:g[c])||a,m=_.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const s=()=>{const i=t.map(o=>_.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return _.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return s.scopeName=n,[r,$M(s,...e)]}function $M(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Um(n){const e=zM(n),t=_.forwardRef((r,s)=>{const{children:i,...o}=r,a=_.Children.toArray(i),c=a.find(UM);if(c){const u=c.props.children,d=a.map(h=>h===c?_.Children.count(u)>1?_.Children.only(null):_.isValidElement(u)?u.props.children:null:h);return R.jsx(e,{...o,ref:s,children:_.isValidElement(u)?_.cloneElement(u,void 0,d):null})}return R.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var BM=Um("Slot");function zM(n){const e=_.forwardRef((t,r)=>{const{children:s,...i}=t;if(_.isValidElement(s)){const o=WM(s),a=VM(i,s.props);return s.type!==_.Fragment&&(a.ref=r?P_(r,o):o),_.cloneElement(s,a)}return _.Children.count(s)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var R_=Symbol("radix.slottable");function HM(n){const e=({children:t})=>R.jsx(R.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=R_,e}function UM(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===R_}function VM(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function WM(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function GM(n){const e=n+"CollectionProvider",[t,r]=Pd(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:y}=g,v=X.useRef(null),x=X.useRef(new Map).current;return R.jsx(s,{scope:b,itemMap:x,collectionRef:v,children:y})};o.displayName=e;const a=n+"CollectionSlot",c=Um(a),u=X.forwardRef((g,b)=>{const{scope:y,children:v}=g,x=i(a,y),A=Wt(b,x.collectionRef);return R.jsx(c,{ref:A,children:v})});u.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=Um(d),p=X.forwardRef((g,b)=>{const{scope:y,children:v,...x}=g,A=X.useRef(null),C=Wt(b,A),T=i(d,y);return X.useEffect(()=>(T.itemMap.set(A,{ref:A,...x}),()=>void T.itemMap.delete(A))),R.jsx(f,{[h]:"",ref:C,children:v})});p.displayName=d;function m(g){const b=i(n+"CollectionConsumer",g);return X.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const x=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((T,P)=>x.indexOf(T.ref.current)-x.indexOf(P.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},m,r]}var qM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ft=qM.reduce((n,e)=>{const t=Um(`Primitive.${e}`),r=_.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),R.jsx(c,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function k_(n,e){n&&$p.flushSync(()=>n.dispatchEvent(e))}function mn(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function XM(n,e=globalThis==null?void 0:globalThis.document){const t=mn(n);_.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var YM="DismissableLayer",tw="dismissableLayer.update",KM="dismissableLayer.pointerDownOutside",QM="dismissableLayer.focusOutside",OS,L_=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Rx=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=n,u=_.useContext(L_),[d,h]=_.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=_.useState({}),m=Wt(e,P=>h(P)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),v=d?g.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,A=v>=y,C=ZM(P=>{const k=P.target,N=[...u.branches].some(M=>M.contains(k));!A||N||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),T=eI(P=>{const k=P.target;[...u.branches].some(M=>M.contains(k))||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return XM(P=>{v===u.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),_.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(OS=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),FS(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=OS)}},[d,f,t,u]),_.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),FS())},[d,u]),_.useEffect(()=>{const P=()=>p({});return document.addEventListener(tw,P),()=>document.removeEventListener(tw,P)},[]),R.jsx(ft.div,{...c,ref:m,style:{pointerEvents:x?A?"auto":"none":void 0,...n.style},onFocusCapture:Oe(n.onFocusCapture,T.onFocusCapture),onBlurCapture:Oe(n.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Oe(n.onPointerDownCapture,C.onPointerDownCapture)})});Rx.displayName=YM;var JM="DismissableLayerBranch",N_=_.forwardRef((n,e)=>{const t=_.useContext(L_),r=_.useRef(null),s=Wt(e,r);return _.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),R.jsx(ft.div,{...n,ref:s})});N_.displayName=JM;function ZM(n,e=globalThis==null?void 0:globalThis.document){const t=mn(n),r=_.useRef(!1),s=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let c=function(){M_(KM,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function eI(n,e=globalThis==null?void 0:globalThis.document){const t=mn(n),r=_.useRef(!1);return _.useEffect(()=>{const s=i=>{i.target&&!r.current&&M_(QM,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function FS(){const n=new CustomEvent(tw);document.dispatchEvent(n)}function M_(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?k_(s,i):s.dispatchEvent(i)}var tI=Rx,nI=N_,Xi=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},rI="Portal",I_=_.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[s,i]=_.useState(!1);Xi(()=>i(!0),[]);const o=t||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?C_.createPortal(R.jsx(ft.div,{...r,ref:e}),o):null});I_.displayName=rI;function sI(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var fc=n=>{const{present:e,children:t}=n,r=iI(e),s=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),i=Wt(r.ref,oI(s));return typeof t=="function"||r.isPresent?_.cloneElement(s,{ref:i}):null};fc.displayName="Presence";function iI(n){const[e,t]=_.useState(),r=_.useRef(null),s=_.useRef(n),i=_.useRef("none"),o=n?"mounted":"unmounted",[a,c]=sI(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const u=gg(r.current);i.current=a==="mounted"?u:"none"},[a]),Xi(()=>{const u=r.current,d=s.current;if(d!==n){const f=i.current,p=gg(u);n?c("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,c]),Xi(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const g=gg(r.current).includes(p.animationName);if(p.target===e&&g&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=p=>{p.target===e&&(i.current=gg(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(u=>{r.current=u?getComputedStyle(u):null,t(u)},[])}}function gg(n){return(n==null?void 0:n.animationName)||"none"}function oI(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var aI=SE[" useInsertionEffect ".trim().toString()]||Xi;function lI({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,o]=cI({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:s;{const d=_.useRef(n!==void 0);_.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const u=_.useCallback(d=>{var h;if(a){const f=uI(d)?d(n):d;f!==n&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,n,i,o]);return[c,u]}function cI({defaultProp:n,onChange:e}){const[t,r]=_.useState(n),s=_.useRef(t),i=_.useRef(e);return aI(()=>{i.current=e},[e]),_.useEffect(()=>{var o;s.current!==t&&((o=i.current)==null||o.call(i,t),s.current=t)},[t,s]),[t,r,i]}function uI(n){return typeof n=="function"}var dI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hI="VisuallyHidden",Wy=_.forwardRef((n,e)=>R.jsx(ft.span,{...n,ref:e,style:{...dI,...n.style}}));Wy.displayName=hI;var fI=Wy,kx="ToastProvider",[Lx,pI,gI]=GM("Toast"),[D_,Pz]=Pd("Toast",[gI]),[mI,Gy]=D_(kx),O_=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=n,[a,c]=_.useState(null),[u,d]=_.useState(0),h=_.useRef(!1),f=_.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${kx}\`. Expected non-empty \`string\`.`),R.jsx(Lx.Provider,{scope:e,children:R.jsx(mI,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:_.useCallback(()=>d(p=>p+1),[]),onToastRemove:_.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};O_.displayName=kx;var F_="ToastViewport",yI=["F8"],nw="toast.viewportPause",rw="toast.viewportResume",j_=_.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=yI,label:s="Notifications ({hotkey})",...i}=n,o=Gy(F_,t),a=pI(t),c=_.useRef(null),u=_.useRef(null),d=_.useRef(null),h=_.useRef(null),f=Wt(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;_.useEffect(()=>{const b=y=>{var x;r.length!==0&&r.every(A=>y[A]||y.code===A)&&((x=h.current)==null||x.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),_.useEffect(()=>{const b=c.current,y=h.current;if(m&&b&&y){const v=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(nw);y.dispatchEvent(T),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(rw);y.dispatchEvent(T),o.isClosePausedRef.current=!1}},A=T=>{!b.contains(T.relatedTarget)&&x()},C=()=>{b.contains(document.activeElement)||x()};return b.addEventListener("focusin",v),b.addEventListener("focusout",A),b.addEventListener("pointermove",v),b.addEventListener("pointerleave",C),window.addEventListener("blur",v),window.addEventListener("focus",x),()=>{b.removeEventListener("focusin",v),b.removeEventListener("focusout",A),b.removeEventListener("pointermove",v),b.removeEventListener("pointerleave",C),window.removeEventListener("blur",v),window.removeEventListener("focus",x)}}},[m,o.isClosePausedRef]);const g=_.useCallback(({tabbingDirection:b})=>{const v=a().map(x=>{const A=x.ref.current,C=[A,...kI(A)];return b==="forwards"?C:C.reverse()});return(b==="forwards"?v.reverse():v).flat()},[a]);return _.useEffect(()=>{const b=h.current;if(b){const y=v=>{var C,T,P;const x=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!x){const k=document.activeElement,N=v.shiftKey;if(v.target===b&&N){(C=u.current)==null||C.focus();return}const z=g({tabbingDirection:N?"backwards":"forwards"}),V=z.findIndex($=>$===k);Yv(z.slice(V+1))?v.preventDefault():N?(T=u.current)==null||T.focus():(P=d.current)==null||P.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[a,g]),R.jsxs(nI,{ref:c,role:"region","aria-label":s.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&R.jsx(sw,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});Yv(b)}}),R.jsx(Lx.Slot,{scope:t,children:R.jsx(ft.ol,{tabIndex:-1,...i,ref:f})}),m&&R.jsx(sw,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});Yv(b)}})]})});j_.displayName=F_;var $_="ToastFocusProxy",sw=_.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=Gy($_,t);return R.jsx(Wy,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});sw.displayName=$_;var Bp="Toast",vI="toast.swipeStart",wI="toast.swipeMove",bI="toast.swipeCancel",xI="toast.swipeEnd",B_=_.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...o}=n,[a,c]=lI({prop:r,defaultProp:s??!0,onChange:i,caller:Bp});return R.jsx(fc,{present:t||a,children:R.jsx(EI,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:mn(n.onPause),onResume:mn(n.onResume),onSwipeStart:Oe(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Oe(n.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Oe(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Oe(n.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});B_.displayName=Bp;var[SI,AI]=D_(Bp,{onClose(){}}),EI=_.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...m}=n,g=Gy(Bp,t),[b,y]=_.useState(null),v=Wt(e,$=>y($)),x=_.useRef(null),A=_.useRef(null),C=s||g.duration,T=_.useRef(0),P=_.useRef(C),k=_.useRef(0),{onToastAdd:N,onToastRemove:M}=g,F=mn(()=>{var Y;(b==null?void 0:b.contains(document.activeElement))&&((Y=g.viewport)==null||Y.focus()),o()}),z=_.useCallback($=>{!$||$===1/0||(window.clearTimeout(k.current),T.current=new Date().getTime(),k.current=window.setTimeout(F,$))},[F]);_.useEffect(()=>{const $=g.viewport;if($){const Y=()=>{z(P.current),u==null||u()},B=()=>{const O=new Date().getTime()-T.current;P.current=P.current-O,window.clearTimeout(k.current),c==null||c()};return $.addEventListener(nw,B),$.addEventListener(rw,Y),()=>{$.removeEventListener(nw,B),$.removeEventListener(rw,Y)}}},[g.viewport,C,c,u,z]),_.useEffect(()=>{i&&!g.isClosePausedRef.current&&z(C)},[i,C,g.isClosePausedRef,z]),_.useEffect(()=>(N(),()=>M()),[N,M]);const V=_.useMemo(()=>b?q_(b):null,[b]);return g.viewport?R.jsxs(R.Fragment,{children:[V&&R.jsx(CI,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:V}),R.jsx(SI,{scope:t,onClose:F,children:$p.createPortal(R.jsx(Lx.ItemSlot,{scope:t,children:R.jsx(tI,{asChild:!0,onEscapeKeyDown:Oe(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||F(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:R.jsx(ft.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:v,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Oe(n.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Oe(n.onPointerDown,$=>{$.button===0&&(x.current={x:$.clientX,y:$.clientY})}),onPointerMove:Oe(n.onPointerMove,$=>{if(!x.current)return;const Y=$.clientX-x.current.x,B=$.clientY-x.current.y,O=!!A.current,D=["left","right"].includes(g.swipeDirection),L=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,I=D?L(0,Y):0,j=D?0:L(0,B),H=$.pointerType==="touch"?10:2,U={x:I,y:j},q={originalEvent:$,delta:U};O?(A.current=U,mg(wI,h,q,{discrete:!1})):jS(U,g.swipeDirection,H)?(A.current=U,mg(vI,d,q,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(Y)>H||Math.abs(B)>H)&&(x.current=null)}),onPointerUp:Oe(n.onPointerUp,$=>{const Y=A.current,B=$.target;if(B.hasPointerCapture($.pointerId)&&B.releasePointerCapture($.pointerId),A.current=null,x.current=null,Y){const O=$.currentTarget,D={originalEvent:$,delta:Y};jS(Y,g.swipeDirection,g.swipeThreshold)?mg(xI,p,D,{discrete:!0}):mg(bI,f,D,{discrete:!0}),O.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),CI=n=>{const{__scopeToast:e,children:t,...r}=n,s=Gy(Bp,e),[i,o]=_.useState(!1),[a,c]=_.useState(!1);return PI(()=>o(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:R.jsx(I_,{asChild:!0,children:R.jsx(Wy,{...r,children:i&&R.jsxs(R.Fragment,{children:[s.label," ",t]})})})},_I="ToastTitle",z_=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return R.jsx(ft.div,{...r,ref:e})});z_.displayName=_I;var TI="ToastDescription",H_=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return R.jsx(ft.div,{...r,ref:e})});H_.displayName=TI;var U_="ToastAction",V_=_.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?R.jsx(G_,{altText:t,asChild:!0,children:R.jsx(Nx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${U_}\`. Expected non-empty \`string\`.`),null)});V_.displayName=U_;var W_="ToastClose",Nx=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=AI(W_,t);return R.jsx(G_,{asChild:!0,children:R.jsx(ft.button,{type:"button",...r,ref:e,onClick:Oe(n.onClick,s.onClose)})})});Nx.displayName=W_;var G_=_.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return R.jsx(ft.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function q_(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),RI(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...q_(r))}}),e}function mg(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?k_(s,i):s.dispatchEvent(i)}var jS=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function PI(n=()=>{}){const e=mn(n);Xi(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function RI(n){return n.nodeType===n.ELEMENT_NODE}function kI(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Yv(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var LI=O_,X_=j_,Y_=B_,K_=z_,Q_=H_,J_=V_,Z_=Nx;function eT(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=eT(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Rd(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=eT(n))&&(r&&(r+=" "),r+=e);return r}const $S=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,BS=Rd,qy=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return BS(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const f=$S(d)||$S(h);return s[u][f]}),a=t&&Object.entries(t).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(m=>{let[g,b]=m;return Array.isArray(b)?b.includes({...i,...a}[g]):{...i,...a}[g]===b})?[...u,h,f]:u},[]);return BS(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tT=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=_.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},c)=>_.createElement("svg",{ref:c,...MI,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:tT("lucide",s),...a},[...o.map(([u,d])=>_.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=(n,e)=>{const t=_.forwardRef(({className:r,...s},i)=>_.createElement(II,{ref:i,iconNode:e,className:tT(`lucide-${NI(n)}`,r),...s}));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Fn("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=Fn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Fn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Fn("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Fn("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Fn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Fn("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Fn("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=Fn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Fn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zS=Fn("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Fn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Fn("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Fn("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Mx="-",GI=n=>{const e=XI(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:o=>{const a=o.split(Mx);return a[0]===""&&a.length!==1&&a.shift(),nT(a,e)||qI(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&r[o]?[...c,...r[o]]:c}}},nT=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?nT(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(Mx);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},HS=/^\[(.+)\]$/,qI=n=>{if(HS.test(n)){const e=HS.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},XI=n=>{const{theme:e,prefix:t}=n,r={nextPart:new Map,validators:[]};return KI(Object.entries(n.classGroups),t).forEach(([i,o])=>{ow(o,r,i,e)}),r},ow=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:US(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(YI(s)){ow(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{ow(o,US(e,i),t,r)})})},US=(n,e)=>{let t=n;return e.split(Mx).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},YI=n=>n.isThemeGetter,KI=(n,e)=>e?n.map(([t,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):n,QI=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,o)=>{t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},rT="!",JI=n=>{const{separator:e,experimentalParseClassName:t}=n,r=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let u=0,d=0,h;for(let b=0;b<a.length;b++){let y=a[b];if(u===0){if(y===s&&(r||a.slice(b,b+i)===e)){c.push(a.slice(d,b)),d=b+i;continue}if(y==="/"){h=b;continue}}y==="["?u++:y==="]"&&u--}const f=c.length===0?a:a.substring(d),p=f.startsWith(rT),m=p?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:g}};return t?a=>t({className:a,parseClassName:o}):o},ZI=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(r=>{r[0]==="["?(e.push(...t.sort(),r),t=[]):t.push(r)}),e.push(...t.sort()),e},e2=n=>({cache:QI(n.cacheSize),parseClassName:JI(n),...GI(n)}),t2=/\s+/,n2=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=n.trim().split(t2);let a="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=t(u);let m=!!p,g=r(m?f.substring(0,p):f);if(!g){if(!m){a=u+(a.length>0?" "+a:a);continue}if(g=r(f),!g){a=u+(a.length>0?" "+a:a);continue}m=!1}const b=ZI(d).join(":"),y=h?b+rT:b,v=y+g;if(i.includes(v))continue;i.push(v);const x=s(g,m);for(let A=0;A<x.length;++A){const C=x[A];i.push(y+C)}a=u+(a.length>0?" "+a:a)}return a};function r2(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=sT(e))&&(r&&(r+=" "),r+=t);return r}const sT=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=sT(n[r]))&&(t&&(t+=" "),t+=e);return t};function s2(n,...e){let t,r,s,i=o;function o(c){const u=e.reduce((d,h)=>h(d),n());return t=e2(u),r=t.cache.get,s=t.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=n2(c,t);return s(c,d),d}return function(){return i(r2.apply(null,arguments))}}const $e=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},iT=/^\[(?:([a-z-]+):)?(.+)\]$/i,i2=/^\d+\/\d+$/,o2=new Set(["px","full","screen"]),a2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,c2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,u2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,d2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zs=n=>qc(n)||o2.has(n)||i2.test(n),ao=n=>kd(n,"length",w2),qc=n=>!!n&&!Number.isNaN(Number(n)),Kv=n=>kd(n,"number",qc),Ud=n=>!!n&&Number.isInteger(Number(n)),h2=n=>n.endsWith("%")&&qc(n.slice(0,-1)),de=n=>iT.test(n),lo=n=>a2.test(n),f2=new Set(["length","size","percentage"]),p2=n=>kd(n,f2,oT),g2=n=>kd(n,"position",oT),m2=new Set(["image","url"]),y2=n=>kd(n,m2,x2),v2=n=>kd(n,"",b2),Vd=()=>!0,kd=(n,e,t)=>{const r=iT.exec(n);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):t(r[2]):!1},w2=n=>l2.test(n)&&!c2.test(n),oT=()=>!1,b2=n=>u2.test(n),x2=n=>d2.test(n),S2=()=>{const n=$e("colors"),e=$e("spacing"),t=$e("blur"),r=$e("brightness"),s=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),c=$e("contrast"),u=$e("grayscale"),d=$e("hueRotate"),h=$e("invert"),f=$e("gap"),p=$e("gradientColorStops"),m=$e("gradientColorStopPositions"),g=$e("inset"),b=$e("margin"),y=$e("opacity"),v=$e("padding"),x=$e("saturate"),A=$e("scale"),C=$e("sepia"),T=$e("skew"),P=$e("space"),k=$e("translate"),N=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",de,e],z=()=>[de,e],V=()=>["",Zs,ao],$=()=>["auto",qc,de],Y=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],O=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",de],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>[qc,de];return{cacheSize:500,separator:":",theme:{colors:[Vd],spacing:[Zs,ao],blur:["none","",lo,de],brightness:j(),borderColor:[n],borderRadius:["none","","full",lo,de],borderSpacing:z(),borderWidth:V(),contrast:j(),grayscale:L(),hueRotate:j(),invert:L(),gap:z(),gradientColorStops:[n],gradientColorStopPositions:[h2,ao],inset:F(),margin:F(),opacity:j(),padding:z(),saturate:j(),scale:j(),sepia:L(),skew:j(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[lo]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Y(),de]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ud,de]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Ud,de]}],"grid-cols":[{"grid-cols":[Vd]}],"col-start-end":[{col:["auto",{span:["full",Ud,de]},de]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Vd]}],"row-start-end":[{row:["auto",{span:[Ud,de]},de]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,e]}],"min-w":[{"min-w":[de,e,"min","max","fit"]}],"max-w":[{"max-w":[de,e,"none","full","min","max","fit","prose",{screen:[lo]},lo]}],h:[{h:[de,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,e,"auto","min","max","fit"]}],"font-size":[{text:["base",lo,ao]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kv]}],"font-family":[{font:[Vd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",qc,Kv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zs,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zs,ao]}],"underline-offset":[{"underline-offset":["auto",Zs,de]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Y(),g2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",p2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},y2]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Zs,de]}],"outline-w":[{outline:[Zs,ao]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Zs,ao]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",lo,v2]}],"shadow-color":[{shadow:[Vd]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...O(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",lo,de]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[x]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:j()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:j()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Ud,de]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[Zs,ao,Kv]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},A2=s2(S2);function ot(...n){return A2(Rd(n))}const E2=LI,aT=_.forwardRef(({className:n,...e},t)=>R.jsx(X_,{ref:t,className:ot("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));aT.displayName=X_.displayName;const C2=qy("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),lT=_.forwardRef(({className:n,variant:e,...t},r)=>R.jsx(Y_,{ref:r,className:ot(C2({variant:e}),n),...t}));lT.displayName=Y_.displayName;const _2=_.forwardRef(({className:n,...e},t)=>R.jsx(J_,{ref:t,className:ot("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",n),...e}));_2.displayName=J_.displayName;const cT=_.forwardRef(({className:n,...e},t)=>R.jsx(Z_,{ref:t,className:ot("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:R.jsx(UI,{className:"h-4 w-4"})}));cT.displayName=Z_.displayName;const uT=_.forwardRef(({className:n,...e},t)=>R.jsx(K_,{ref:t,className:ot("text-sm font-semibold",n),...e}));uT.displayName=K_.displayName;const dT=_.forwardRef(({className:n,...e},t)=>R.jsx(Q_,{ref:t,className:ot("text-sm opacity-90",n),...e}));dT.displayName=Q_.displayName;function T2(){const{toasts:n}=T_();return R.jsxs(E2,{children:[n.map(function({id:e,title:t,description:r,action:s,...i}){return R.jsxs(lT,{...i,children:[R.jsxs("div",{className:"grid gap-1",children:[t&&R.jsx(uT,{children:t}),r&&R.jsx(dT,{children:r})]}),s,R.jsx(cT,{})]},e)}),R.jsx(aT,{})]})}var VS=["light","dark"],P2="(prefers-color-scheme: dark)",R2=_.createContext(void 0),k2={setTheme:n=>{},themes:[]},L2=()=>{var n;return(n=_.useContext(R2))!=null?n:k2};_.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:c})=>{let u=i==="system",d=t==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(m=>`'${m}'`).join(",")})`};`:`var d=document.documentElement,n='${t}',s='setAttribute';`,h=s?VS.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(m,g=!1,b=!0)=>{let y=o?o[m]:m,v=g?m+"|| ''":`'${y}'`,x="";return s&&b&&!g&&VS.includes(m)&&(x+=`d.style.colorScheme = '${m}';`),t==="class"?g||y?x+=`c.add(${v})`:x+="null":y&&(x+=`d[s](n,${v})`),x},p=n?`!function(){${d}${f(n)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${P2}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return _.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:p}})});var N2=n=>{switch(n){case"success":return D2;case"info":return F2;case"warning":return O2;case"error":return j2;default:return null}},M2=Array(12).fill(0),I2=({visible:n,className:e})=>X.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},X.createElement("div",{className:"sonner-spinner"},M2.map((t,r)=>X.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),D2=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),O2=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),F2=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),j2=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},X.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$2=X.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},X.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),X.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),B2=()=>{let[n,e]=X.useState(document.hidden);return X.useEffect(()=>{let t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n},aw=1,z2=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let e=this.subscribers.indexOf(n);this.subscribers.splice(e,1)}),this.publish=n=>{this.subscribers.forEach(e=>e(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var e;let{message:t,...r}=n,s=typeof(n==null?void 0:n.id)=="number"||((e=n.id)==null?void 0:e.length)>0?n.id:aw++,i=this.toasts.find(a=>a.id===s),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),i?this.toasts=this.toasts.map(a=>a.id===s?(this.publish({...a,...n,id:s,title:t}),{...a,...n,id:s,dismissible:o,title:t}):a):this.addToast({title:t,...r,dismissible:o,id:s}),s},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:n,dismiss:!0})),n),this.message=(n,e)=>this.create({...e,message:n}),this.error=(n,e)=>this.create({...e,message:n,type:"error"}),this.success=(n,e)=>this.create({...e,type:"success",message:n}),this.info=(n,e)=>this.create({...e,type:"info",message:n}),this.warning=(n,e)=>this.create({...e,type:"warning",message:n}),this.loading=(n,e)=>this.create({...e,type:"loading",message:n}),this.promise=(n,e)=>{if(!e)return;let t;e.loading!==void 0&&(t=this.create({...e,promise:n,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=n instanceof Promise?n:n(),s=t!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],X.isValidElement(c))s=!1,this.create({id:t,type:"default",message:c});else if(U2(c)&&!c.ok){s=!1;let u=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,d=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:t,type:"error",message:u,description:d})}else if(e.success!==void 0){s=!1;let u=typeof e.success=="function"?await e.success(c):e.success,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],e.error!==void 0){s=!1;let u=typeof e.error=="function"?await e.error(c):e.error,d=typeof e.description=="function"?await e.description(c):e.description;this.create({id:t,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(t),t=void 0),(c=e.finally)==null||c.call(e)}),a=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof t!="string"&&typeof t!="number"?{unwrap:a}:Object.assign(t,{unwrap:a})},this.custom=(n,e)=>{let t=(e==null?void 0:e.id)||aw++;return this.create({jsx:n(t),id:t,...e}),t},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Rn=new z2,H2=(n,e)=>{let t=(e==null?void 0:e.id)||aw++;return Rn.addToast({title:n,...e,id:t}),t},U2=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",V2=H2,W2=()=>Rn.toasts,G2=()=>Rn.getActiveToasts();Object.assign(V2,{success:Rn.success,info:Rn.info,warning:Rn.warning,error:Rn.error,custom:Rn.custom,message:Rn.message,promise:Rn.promise,dismiss:Rn.dismiss,loading:Rn.loading},{getHistory:W2,getToasts:G2});function q2(n,{insertAt:e}={}){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}q2(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function yg(n){return n.label!==void 0}var X2=3,Y2="32px",K2="16px",WS=4e3,Q2=356,J2=14,Z2=20,eD=200;function Or(...n){return n.filter(Boolean).join(" ")}function tD(n){let[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}var nD=n=>{var e,t,r,s,i,o,a,c,u,d,h;let{invert:f,toast:p,unstyled:m,interacting:g,setHeights:b,visibleToasts:y,heights:v,index:x,toasts:A,expanded:C,removeToast:T,defaultRichColors:P,closeButton:k,style:N,cancelButtonStyle:M,actionButtonStyle:F,className:z="",descriptionClassName:V="",duration:$,position:Y,gap:B,loadingIcon:O,expandByDefault:D,classNames:L,icons:I,closeButtonAriaLabel:j="Close toast",pauseWhenPageIsHidden:H}=n,[U,q]=X.useState(null),[se,oe]=X.useState(null),[Q,Se]=X.useState(!1),[He,ge]=X.useState(!1),[Ie,Gt]=X.useState(!1),[he,Ce]=X.useState(!1),[Ye,Ke]=X.useState(!1),[us,Lr]=X.useState(0),[ds,Kp]=X.useState(0),hs=X.useRef(p.duration||$||WS),Qp=X.useRef(null),Js=X.useRef(null),mv=x===0,yv=x+1<=y,An=p.type,on=p.dismissible!==!1,to=p.className||"",fs=p.descriptionClassName||"",no=X.useMemo(()=>v.findIndex(ce=>ce.toastId===p.id)||0,[v,p.id]),tL=X.useMemo(()=>{var ce;return(ce=p.closeButton)!=null?ce:k},[p.closeButton,k]),b1=X.useMemo(()=>p.duration||$||WS,[p.duration,$]),vv=X.useRef(0),mc=X.useRef(0),x1=X.useRef(0),yc=X.useRef(null),[nL,rL]=Y.split("-"),S1=X.useMemo(()=>v.reduce((ce,Pe,Ue)=>Ue>=no?ce:ce+Pe.height,0),[v,no]),A1=B2(),sL=p.invert||f,wv=An==="loading";mc.current=X.useMemo(()=>no*B+S1,[no,S1]),X.useEffect(()=>{hs.current=b1},[b1]),X.useEffect(()=>{Se(!0)},[]),X.useEffect(()=>{let ce=Js.current;if(ce){let Pe=ce.getBoundingClientRect().height;return Kp(Pe),b(Ue=>[{toastId:p.id,height:Pe,position:p.position},...Ue]),()=>b(Ue=>Ue.filter(Nr=>Nr.toastId!==p.id))}},[b,p.id]),X.useLayoutEffect(()=>{if(!Q)return;let ce=Js.current,Pe=ce.style.height;ce.style.height="auto";let Ue=ce.getBoundingClientRect().height;ce.style.height=Pe,Kp(Ue),b(Nr=>Nr.find(Mr=>Mr.toastId===p.id)?Nr.map(Mr=>Mr.toastId===p.id?{...Mr,height:Ue}:Mr):[{toastId:p.id,height:Ue,position:p.position},...Nr])},[Q,p.title,p.description,b,p.id]);let ro=X.useCallback(()=>{ge(!0),Lr(mc.current),b(ce=>ce.filter(Pe=>Pe.toastId!==p.id)),setTimeout(()=>{T(p)},eD)},[p,T,b,mc]);X.useEffect(()=>{if(p.promise&&An==="loading"||p.duration===1/0||p.type==="loading")return;let ce;return C||g||H&&A1?(()=>{if(x1.current<vv.current){let Pe=new Date().getTime()-vv.current;hs.current=hs.current-Pe}x1.current=new Date().getTime()})():hs.current!==1/0&&(vv.current=new Date().getTime(),ce=setTimeout(()=>{var Pe;(Pe=p.onAutoClose)==null||Pe.call(p,p),ro()},hs.current)),()=>clearTimeout(ce)},[C,g,p,An,H,A1,ro]),X.useEffect(()=>{p.delete&&ro()},[ro,p.delete]);function iL(){var ce,Pe,Ue;return I!=null&&I.loading?X.createElement("div",{className:Or(L==null?void 0:L.loader,(ce=p==null?void 0:p.classNames)==null?void 0:ce.loader,"sonner-loader"),"data-visible":An==="loading"},I.loading):O?X.createElement("div",{className:Or(L==null?void 0:L.loader,(Pe=p==null?void 0:p.classNames)==null?void 0:Pe.loader,"sonner-loader"),"data-visible":An==="loading"},O):X.createElement(I2,{className:Or(L==null?void 0:L.loader,(Ue=p==null?void 0:p.classNames)==null?void 0:Ue.loader),visible:An==="loading"})}return X.createElement("li",{tabIndex:0,ref:Js,className:Or(z,to,L==null?void 0:L.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[An],(t=p==null?void 0:p.classNames)==null?void 0:t[An]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:P,"data-styled":!(p.jsx||p.unstyled||m),"data-mounted":Q,"data-promise":!!p.promise,"data-swiped":Ye,"data-removed":He,"data-visible":yv,"data-y-position":nL,"data-x-position":rL,"data-index":x,"data-front":mv,"data-swiping":Ie,"data-dismissible":on,"data-type":An,"data-invert":sL,"data-swipe-out":he,"data-swipe-direction":se,"data-expanded":!!(C||D&&Q),style:{"--index":x,"--toasts-before":x,"--z-index":A.length-x,"--offset":`${He?us:mc.current}px`,"--initial-height":D?"auto":`${ds}px`,...N,...p.style},onDragEnd:()=>{Gt(!1),q(null),yc.current=null},onPointerDown:ce=>{wv||!on||(Qp.current=new Date,Lr(mc.current),ce.target.setPointerCapture(ce.pointerId),ce.target.tagName!=="BUTTON"&&(Gt(!0),yc.current={x:ce.clientX,y:ce.clientY}))},onPointerUp:()=>{var ce,Pe,Ue,Nr;if(he||!on)return;yc.current=null;let Mr=Number(((ce=Js.current)==null?void 0:ce.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),so=Number(((Pe=Js.current)==null?void 0:Pe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ta=new Date().getTime()-((Ue=Qp.current)==null?void 0:Ue.getTime()),Ir=U==="x"?Mr:so,io=Math.abs(Ir)/Ta;if(Math.abs(Ir)>=Z2||io>.11){Lr(mc.current),(Nr=p.onDismiss)==null||Nr.call(p,p),oe(U==="x"?Mr>0?"right":"left":so>0?"down":"up"),ro(),Ce(!0),Ke(!1);return}Gt(!1),q(null)},onPointerMove:ce=>{var Pe,Ue,Nr,Mr;if(!yc.current||!on||((Pe=window.getSelection())==null?void 0:Pe.toString().length)>0)return;let so=ce.clientY-yc.current.y,Ta=ce.clientX-yc.current.x,Ir=(Ue=n.swipeDirections)!=null?Ue:tD(Y);!U&&(Math.abs(Ta)>1||Math.abs(so)>1)&&q(Math.abs(Ta)>Math.abs(so)?"x":"y");let io={x:0,y:0};U==="y"?(Ir.includes("top")||Ir.includes("bottom"))&&(Ir.includes("top")&&so<0||Ir.includes("bottom")&&so>0)&&(io.y=so):U==="x"&&(Ir.includes("left")||Ir.includes("right"))&&(Ir.includes("left")&&Ta<0||Ir.includes("right")&&Ta>0)&&(io.x=Ta),(Math.abs(io.x)>0||Math.abs(io.y)>0)&&Ke(!0),(Nr=Js.current)==null||Nr.style.setProperty("--swipe-amount-x",`${io.x}px`),(Mr=Js.current)==null||Mr.style.setProperty("--swipe-amount-y",`${io.y}px`)}},tL&&!p.jsx?X.createElement("button",{"aria-label":j,"data-disabled":wv,"data-close-button":!0,onClick:wv||!on?()=>{}:()=>{var ce;ro(),(ce=p.onDismiss)==null||ce.call(p,p)},className:Or(L==null?void 0:L.closeButton,(s=p==null?void 0:p.classNames)==null?void 0:s.closeButton)},(i=I==null?void 0:I.close)!=null?i:$2):null,p.jsx||_.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:X.createElement(X.Fragment,null,An||p.icon||p.promise?X.createElement("div",{"data-icon":"",className:Or(L==null?void 0:L.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||iL():null,p.type!=="loading"?p.icon||(I==null?void 0:I[An])||N2(An):null):null,X.createElement("div",{"data-content":"",className:Or(L==null?void 0:L.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},X.createElement("div",{"data-title":"",className:Or(L==null?void 0:L.title,(c=p==null?void 0:p.classNames)==null?void 0:c.title)},typeof p.title=="function"?p.title():p.title),p.description?X.createElement("div",{"data-description":"",className:Or(V,fs,L==null?void 0:L.description,(u=p==null?void 0:p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),_.isValidElement(p.cancel)?p.cancel:p.cancel&&yg(p.cancel)?X.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||M,onClick:ce=>{var Pe,Ue;yg(p.cancel)&&on&&((Ue=(Pe=p.cancel).onClick)==null||Ue.call(Pe,ce),ro())},className:Or(L==null?void 0:L.cancelButton,(d=p==null?void 0:p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,_.isValidElement(p.action)?p.action:p.action&&yg(p.action)?X.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||F,onClick:ce=>{var Pe,Ue;yg(p.action)&&((Ue=(Pe=p.action).onClick)==null||Ue.call(Pe,ce),!ce.defaultPrevented&&ro())},className:Or(L==null?void 0:L.actionButton,(h=p==null?void 0:p.classNames)==null?void 0:h.actionButton)},p.action.label):null))};function GS(){if(typeof window>"u"||typeof document>"u")return"ltr";let n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function rD(n,e){let t={};return[n,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",a=i?K2:Y2;function c(u){["top","right","bottom","left"].forEach(d=>{t[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?t[`${o}-${u}`]=a:t[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(a)}),t}var sD=_.forwardRef(function(n,e){let{invert:t,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:p,visibleToasts:m=X2,toastOptions:g,dir:b=GS(),gap:y=J2,loadingIcon:v,icons:x,containerAriaLabel:A="Notifications",pauseWhenPageIsHidden:C}=n,[T,P]=X.useState([]),k=X.useMemo(()=>Array.from(new Set([r].concat(T.filter(H=>H.position).map(H=>H.position)))),[T,r]),[N,M]=X.useState([]),[F,z]=X.useState(!1),[V,$]=X.useState(!1),[Y,B]=X.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),O=X.useRef(null),D=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=X.useRef(null),I=X.useRef(!1),j=X.useCallback(H=>{P(U=>{var q;return(q=U.find(se=>se.id===H.id))!=null&&q.delete||Rn.dismiss(H.id),U.filter(({id:se})=>se!==H.id)})},[]);return X.useEffect(()=>Rn.subscribe(H=>{if(H.dismiss){P(U=>U.map(q=>q.id===H.id?{...q,delete:!0}:q));return}setTimeout(()=>{C_.flushSync(()=>{P(U=>{let q=U.findIndex(se=>se.id===H.id);return q!==-1?[...U.slice(0,q),{...U[q],...H},...U.slice(q+1)]:[H,...U]})})})}),[]),X.useEffect(()=>{if(d!=="system"){B(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:U})=>{B(U?"dark":"light")})}catch{H.addListener(({matches:q})=>{try{B(q?"dark":"light")}catch(se){console.error(se)}})}},[d]),X.useEffect(()=>{T.length<=1&&z(!1)},[T]),X.useEffect(()=>{let H=U=>{var q,se;s.every(oe=>U[oe]||U.code===oe)&&(z(!0),(q=O.current)==null||q.focus()),U.code==="Escape"&&(document.activeElement===O.current||(se=O.current)!=null&&se.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[s]),X.useEffect(()=>{if(O.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,I.current=!1)}},[O.current]),X.createElement("section",{ref:e,"aria-label":`${A} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((H,U)=>{var q;let[se,oe]=H.split("-");return T.length?X.createElement("ol",{key:H,dir:b==="auto"?GS():b,tabIndex:-1,ref:O,className:a,"data-sonner-toaster":!0,"data-theme":Y,"data-y-position":se,"data-lifted":F&&T.length>1&&!i,"data-x-position":oe,style:{"--front-toast-height":`${((q=N[0])==null?void 0:q.height)||0}px`,"--width":`${Q2}px`,"--gap":`${y}px`,...p,...rD(c,u)},onBlur:Q=>{I.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(I.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||I.current||(I.current=!0,L.current=Q.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{V||z(!1)},onDragEnd:()=>z(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},T.filter(Q=>!Q.position&&U===0||Q.position===H).map((Q,Se)=>{var He,ge;return X.createElement(nD,{key:Q.id,icons:x,index:Se,toast:Q,defaultRichColors:h,duration:(He=g==null?void 0:g.duration)!=null?He:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:t,visibleToasts:m,closeButton:(ge=g==null?void 0:g.closeButton)!=null?ge:o,interacting:V,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:j,toasts:T.filter(Ie=>Ie.position==Q.position),heights:N.filter(Ie=>Ie.position==Q.position),setHeights:M,expandByDefault:i,gap:y,loadingIcon:v,expanded:F,pauseWhenPageIsHidden:C,swipeDirections:n.swipeDirections})})):null}))});const iD=({...n})=>{const{theme:e="system"}=L2();return R.jsx(sD,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})},oD=["top","right","bottom","left"],ya=Math.min,nr=Math.max,Wm=Math.round,vg=Math.floor,qs=n=>({x:n,y:n}),aD={left:"right",right:"left",bottom:"top",top:"bottom"},lD={start:"end",end:"start"};function lw(n,e,t){return nr(n,ya(e,t))}function Yi(n,e){return typeof n=="function"?n(e):n}function Ki(n){return n.split("-")[0]}function Ld(n){return n.split("-")[1]}function Ix(n){return n==="x"?"y":"x"}function Dx(n){return n==="y"?"height":"width"}const cD=new Set(["top","bottom"]);function Vs(n){return cD.has(Ki(n))?"y":"x"}function Ox(n){return Ix(Vs(n))}function uD(n,e,t){t===void 0&&(t=!1);const r=Ld(n),s=Ox(n),i=Dx(s);let o=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Gm(o)),[o,Gm(o)]}function dD(n){const e=Gm(n);return[cw(n),e,cw(e)]}function cw(n){return n.replace(/start|end/g,e=>lD[e])}const qS=["left","right"],XS=["right","left"],hD=["top","bottom"],fD=["bottom","top"];function pD(n,e,t){switch(n){case"top":case"bottom":return t?e?XS:qS:e?qS:XS;case"left":case"right":return e?hD:fD;default:return[]}}function gD(n,e,t,r){const s=Ld(n);let i=pD(Ki(n),t==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(cw)))),i}function Gm(n){return n.replace(/left|right|bottom|top/g,e=>aD[e])}function mD(n){return{top:0,right:0,bottom:0,left:0,...n}}function hT(n){return typeof n!="number"?mD(n):{top:n,right:n,bottom:n,left:n}}function qm(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function YS(n,e,t){let{reference:r,floating:s}=n;const i=Vs(e),o=Ox(e),a=Dx(o),c=Ki(e),u=i==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let p;switch(c){case"top":p={x:d,y:r.y-s.height};break;case"bottom":p={x:d,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-s.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Ld(e)){case"start":p[o]-=f*(t&&u?-1:1);break;case"end":p[o]+=f*(t&&u?-1:1);break}return p}const yD=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=t,a=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:n,floating:e,strategy:s}),{x:d,y:h}=YS(u,r,c),f=r,p={},m=0;for(let g=0;g<a.length;g++){const{name:b,fn:y}=a[g],{x:v,y:x,data:A,reset:C}=await y({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:p,rects:u,platform:o,elements:{reference:n,floating:e}});d=v??d,h=x??h,p={...p,[b]:{...p[b],...A}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(u=C.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:s}):C.rects),{x:d,y:h}=YS(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function Gh(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:c}=n,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Yi(e,n),m=hT(p),b=a[f?h==="floating"?"reference":"floating":h],y=qm(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(b)))==null||t?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),A=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},C=qm(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:x,strategy:c}):v);return{top:(y.top-C.top+m.top)/A.y,bottom:(C.bottom-y.bottom+m.bottom)/A.y,left:(y.left-C.left+m.left)/A.x,right:(C.right-y.right+m.right)/A.x}}const vD=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:c}=e,{element:u,padding:d=0}=Yi(n,e)||{};if(u==null)return{};const h=hT(d),f={x:t,y:r},p=Ox(s),m=Dx(p),g=await o.getDimensions(u),b=p==="y",y=b?"top":"left",v=b?"bottom":"right",x=b?"clientHeight":"clientWidth",A=i.reference[m]+i.reference[p]-f[p]-i.floating[m],C=f[p]-i.reference[p],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=T?T[x]:0;(!P||!await(o.isElement==null?void 0:o.isElement(T)))&&(P=a.floating[x]||i.floating[m]);const k=A/2-C/2,N=P/2-g[m]/2-1,M=ya(h[y],N),F=ya(h[v],N),z=M,V=P-g[m]-F,$=P/2-g[m]/2+k,Y=lw(z,$,V),B=!c.arrow&&Ld(s)!=null&&$!==Y&&i.reference[m]/2-($<z?M:F)-g[m]/2<0,O=B?$<z?$-z:$-V:0;return{[p]:f[p]+O,data:{[p]:Y,centerOffset:$-Y-O,...B&&{alignmentOffset:O}},reset:B}}}),wD=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...b}=Yi(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const y=Ki(s),v=Vs(a),x=Ki(a)===a,A=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=f||(x||!g?[Gm(a)]:dD(a)),T=m!=="none";!f&&T&&C.push(...gD(a,g,m,A));const P=[a,...C],k=await Gh(e,b),N=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&N.push(k[y]),h){const $=uD(s,o,A);N.push(k[$[0]],k[$[1]])}if(M=[...M,{placement:s,overflows:N}],!N.every($=>$<=0)){var F,z;const $=(((F=i.flip)==null?void 0:F.index)||0)+1,Y=P[$];if(Y&&(!(h==="alignment"?v!==Vs(Y):!1)||M.every(D=>D.overflows[0]>0&&Vs(D.placement)===v)))return{data:{index:$,overflows:M},reset:{placement:Y}};let B=(z=M.filter(O=>O.overflows[0]<=0).sort((O,D)=>O.overflows[1]-D.overflows[1])[0])==null?void 0:z.placement;if(!B)switch(p){case"bestFit":{var V;const O=(V=M.filter(D=>{if(T){const L=Vs(D.placement);return L===v||L==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(L=>L>0).reduce((L,I)=>L+I,0)]).sort((D,L)=>D[1]-L[1])[0])==null?void 0:V[0];O&&(B=O);break}case"initialPlacement":B=a;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function KS(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function QS(n){return oD.some(e=>n[e]>=0)}const bD=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=Yi(n,e);switch(r){case"referenceHidden":{const i=await Gh(e,{...s,elementContext:"reference"}),o=KS(i,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:QS(o)}}}case"escaped":{const i=await Gh(e,{...s,altBoundary:!0}),o=KS(i,t.floating);return{data:{escapedOffsets:o,escaped:QS(o)}}}default:return{}}}}},fT=new Set(["left","top"]);async function xD(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Ki(t),a=Ld(t),c=Vs(t)==="y",u=fT.has(o)?-1:1,d=i&&c?-1:1,h=Yi(e,n);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),c?{x:p*d,y:f*u}:{x:f*u,y:p*d}}const SD=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:o,middlewareData:a}=e,c=await xD(e,n);return o===((t=a.offset)==null?void 0:t.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},AD=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:y,y:v}=b;return{x:y,y:v}}},...c}=Yi(n,e),u={x:t,y:r},d=await Gh(e,c),h=Vs(Ki(s)),f=Ix(h);let p=u[f],m=u[h];if(i){const b=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+d[b],x=p-d[y];p=lw(v,p,x)}if(o){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",v=m+d[b],x=m-d[y];m=lw(v,m,x)}const g=a.fn({...e,[f]:p,[h]:m});return{...g,data:{x:g.x-t,y:g.y-r,enabled:{[f]:i,[h]:o}}}}}},ED=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:c=!0,crossAxis:u=!0}=Yi(n,e),d={x:t,y:r},h=Vs(s),f=Ix(h);let p=d[f],m=d[h];const g=Yi(a,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const x=f==="y"?"height":"width",A=i.reference[f]-i.floating[x]+b.mainAxis,C=i.reference[f]+i.reference[x]-b.mainAxis;p<A?p=A:p>C&&(p=C)}if(u){var y,v;const x=f==="y"?"width":"height",A=fT.has(Ki(s)),C=i.reference[h]-i.floating[x]+(A&&((y=o.offset)==null?void 0:y[h])||0)+(A?0:b.crossAxis),T=i.reference[h]+i.reference[x]+(A?0:((v=o.offset)==null?void 0:v[h])||0)-(A?b.crossAxis:0);m<C?m=C:m>T&&(m=T)}return{[f]:p,[h]:m}}}},CD=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:c=()=>{},...u}=Yi(n,e),d=await Gh(e,u),h=Ki(s),f=Ld(s),p=Vs(s)==="y",{width:m,height:g}=i.floating;let b,y;h==="top"||h==="bottom"?(b=h,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=h,b=f==="end"?"top":"bottom");const v=g-d.top-d.bottom,x=m-d.left-d.right,A=ya(g-d[b],v),C=ya(m-d[y],x),T=!e.middlewareData.shift;let P=A,k=C;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=x),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=v),T&&!f){const M=nr(d.left,0),F=nr(d.right,0),z=nr(d.top,0),V=nr(d.bottom,0);p?k=m-2*(M!==0||F!==0?M+F:nr(d.left,d.right)):P=g-2*(z!==0||V!==0?z+V:nr(d.top,d.bottom))}await c({...e,availableWidth:k,availableHeight:P});const N=await o.getDimensions(a.floating);return m!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function Xy(){return typeof window<"u"}function Nd(n){return pT(n)?(n.nodeName||"").toLowerCase():"#document"}function or(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ks(n){var e;return(e=(pT(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function pT(n){return Xy()?n instanceof Node||n instanceof or(n).Node:!1}function os(n){return Xy()?n instanceof Element||n instanceof or(n).Element:!1}function Xs(n){return Xy()?n instanceof HTMLElement||n instanceof or(n).HTMLElement:!1}function JS(n){return!Xy()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof or(n).ShadowRoot}const _D=new Set(["inline","contents"]);function zp(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=as(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!_D.has(s)}const TD=new Set(["table","td","th"]);function PD(n){return TD.has(Nd(n))}const RD=[":popover-open",":modal"];function Yy(n){return RD.some(e=>{try{return n.matches(e)}catch{return!1}})}const kD=["transform","translate","scale","rotate","perspective"],LD=["transform","translate","scale","rotate","perspective","filter"],ND=["paint","layout","strict","content"];function Fx(n){const e=jx(),t=os(n)?as(n):n;return kD.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||LD.some(r=>(t.willChange||"").includes(r))||ND.some(r=>(t.contain||"").includes(r))}function MD(n){let e=va(n);for(;Xs(e)&&!bd(e);){if(Fx(e))return e;if(Yy(e))return null;e=va(e)}return null}function jx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ID=new Set(["html","body","#document"]);function bd(n){return ID.has(Nd(n))}function as(n){return or(n).getComputedStyle(n)}function Ky(n){return os(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function va(n){if(Nd(n)==="html")return n;const e=n.assignedSlot||n.parentNode||JS(n)&&n.host||Ks(n);return JS(e)?e.host:e}function gT(n){const e=va(n);return bd(e)?n.ownerDocument?n.ownerDocument.body:n.body:Xs(e)&&zp(e)?e:gT(e)}function qh(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=gT(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),o=or(s);if(i){const a=uw(o);return e.concat(o,o.visualViewport||[],zp(s)?s:[],a&&t?qh(a):[])}return e.concat(s,qh(s,[],t))}function uw(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function mT(n){const e=as(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Xs(n),i=s?n.offsetWidth:t,o=s?n.offsetHeight:r,a=Wm(t)!==i||Wm(r)!==o;return a&&(t=i,r=o),{width:t,height:r,$:a}}function $x(n){return os(n)?n:n.contextElement}function Xc(n){const e=$x(n);if(!Xs(e))return qs(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=mT(e);let o=(i?Wm(t.width):t.width)/r,a=(i?Wm(t.height):t.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const DD=qs(0);function yT(n){const e=or(n);return!jx()||!e.visualViewport?DD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function OD(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==or(n)?!1:e}function lc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=$x(n);let o=qs(1);e&&(r?os(r)&&(o=Xc(r)):o=Xc(n));const a=OD(i,t,r)?yT(i):qs(0);let c=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=or(i),p=r&&os(r)?or(r):r;let m=f,g=uw(m);for(;g&&r&&p!==m;){const b=Xc(g),y=g.getBoundingClientRect(),v=as(g),x=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*b.x,A=y.top+(g.clientTop+parseFloat(v.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=x,u+=A,m=or(g),g=uw(m)}}return qm({width:d,height:h,x:c,y:u})}function Bx(n,e){const t=Ky(n).scrollLeft;return e?e.left+t:lc(Ks(n)).left+t}function vT(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=r.left+e.scrollLeft-(t?0:Bx(n,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function FD(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",o=Ks(r),a=e?Yy(e.floating):!1;if(r===o||a&&i)return t;let c={scrollLeft:0,scrollTop:0},u=qs(1);const d=qs(0),h=Xs(r);if((h||!h&&!i)&&((Nd(r)!=="body"||zp(o))&&(c=Ky(r)),Xs(r))){const p=lc(r);u=Xc(r),d.x=p.x+r.clientLeft,d.y=p.y+r.clientTop}const f=o&&!h&&!i?vT(o,c,!0):qs(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:t.y*u.y-c.scrollTop*u.y+d.y+f.y}}function jD(n){return Array.from(n.getClientRects())}function $D(n){const e=Ks(n),t=Ky(n),r=n.ownerDocument.body,s=nr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=nr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+Bx(n);const a=-t.scrollTop;return as(r).direction==="rtl"&&(o+=nr(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function BD(n,e){const t=or(n),r=Ks(n),s=t.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,c=0;if(s){i=s.width,o=s.height;const u=jx();(!u||u&&e==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:a,y:c}}const zD=new Set(["absolute","fixed"]);function HD(n,e){const t=lc(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=Xs(n)?Xc(n):qs(1),o=n.clientWidth*i.x,a=n.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:a,x:c,y:u}}function ZS(n,e,t){let r;if(e==="viewport")r=BD(n,t);else if(e==="document")r=$D(Ks(n));else if(os(e))r=HD(e,t);else{const s=yT(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return qm(r)}function wT(n,e){const t=va(n);return t===e||!os(t)||bd(t)?!1:as(t).position==="fixed"||wT(t,e)}function UD(n,e){const t=e.get(n);if(t)return t;let r=qh(n,[],!1).filter(a=>os(a)&&Nd(a)!=="body"),s=null;const i=as(n).position==="fixed";let o=i?va(n):n;for(;os(o)&&!bd(o);){const a=as(o),c=Fx(o);!c&&a.position==="fixed"&&(s=null),(i?!c&&!s:!c&&a.position==="static"&&!!s&&zD.has(s.position)||zp(o)&&!c&&wT(n,o))?r=r.filter(d=>d!==o):s=a,o=va(o)}return e.set(n,r),r}function VD(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const o=[...t==="clippingAncestors"?Yy(e)?[]:UD(e,this._c):[].concat(t),r],a=o[0],c=o.reduce((u,d)=>{const h=ZS(e,d,s);return u.top=nr(h.top,u.top),u.right=ya(h.right,u.right),u.bottom=ya(h.bottom,u.bottom),u.left=nr(h.left,u.left),u},ZS(e,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WD(n){const{width:e,height:t}=mT(n);return{width:e,height:t}}function GD(n,e,t){const r=Xs(e),s=Ks(e),i=t==="fixed",o=lc(n,!0,i,e);let a={scrollLeft:0,scrollTop:0};const c=qs(0);function u(){c.x=Bx(s)}if(r||!r&&!i)if((Nd(e)!=="body"||zp(s))&&(a=Ky(e)),r){const p=lc(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&u();i&&!r&&s&&u();const d=s&&!r&&!i?vT(s,a):qs(0),h=o.left+a.scrollLeft-c.x-d.x,f=o.top+a.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function Qv(n){return as(n).position==="static"}function eA(n,e){if(!Xs(n)||as(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ks(n)===t&&(t=t.ownerDocument.body),t}function bT(n,e){const t=or(n);if(Yy(n))return t;if(!Xs(n)){let s=va(n);for(;s&&!bd(s);){if(os(s)&&!Qv(s))return s;s=va(s)}return t}let r=eA(n,e);for(;r&&PD(r)&&Qv(r);)r=eA(r,e);return r&&bd(r)&&Qv(r)&&!Fx(r)?t:r||MD(n)||t}const qD=async function(n){const e=this.getOffsetParent||bT,t=this.getDimensions,r=await t(n.floating);return{reference:GD(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XD(n){return as(n).direction==="rtl"}const YD={convertOffsetParentRelativeRectToViewportRelativeRect:FD,getDocumentElement:Ks,getClippingRect:VD,getOffsetParent:bT,getElementRects:qD,getClientRects:jD,getDimensions:WD,getScale:Xc,isElement:os,isRTL:XD};function xT(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function KD(n,e){let t=null,r;const s=Ks(n);function i(){var a;clearTimeout(r),(a=t)==null||a.disconnect(),t=null}function o(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),i();const u=n.getBoundingClientRect(),{left:d,top:h,width:f,height:p}=u;if(a||e(),!f||!p)return;const m=vg(h),g=vg(s.clientWidth-(d+f)),b=vg(s.clientHeight-(h+p)),y=vg(d),x={rootMargin:-m+"px "+-g+"px "+-b+"px "+-y+"px",threshold:nr(0,ya(1,c))||1};let A=!0;function C(T){const P=T[0].intersectionRatio;if(P!==c){if(!A)return o();P?o(!1,P):r=setTimeout(()=>{o(!1,1e-7)},1e3)}P===1&&!xT(u,n.getBoundingClientRect())&&o(),A=!1}try{t=new IntersectionObserver(C,{...x,root:s.ownerDocument})}catch{t=new IntersectionObserver(C,x)}t.observe(n)}return o(!0),i}function QD(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=$x(n),d=s||i?[...u?qh(u):[],...qh(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",t,{passive:!0}),i&&y.addEventListener("resize",t)});const h=u&&a?KD(u,t):null;let f=-1,p=null;o&&(p=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var x;(x=p)==null||x.observe(e)})),t()}),u&&!c&&p.observe(u),p.observe(e));let m,g=c?lc(n):null;c&&b();function b(){const y=lc(n);g&&!xT(g,y)&&t(),g=y,m=requestAnimationFrame(b)}return t(),()=>{var y;d.forEach(v=>{s&&v.removeEventListener("scroll",t),i&&v.removeEventListener("resize",t)}),h==null||h(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(m)}}const JD=SD,ZD=AD,eO=wD,tO=CD,nO=bD,tA=vD,rO=ED,sO=(n,e,t)=>{const r=new Map,s={platform:YD,...t},i={...s.platform,_c:r};return yD(n,e,{...s,platform:i})};var iO=typeof document<"u",oO=function(){},Hg=iO?_.useLayoutEffect:oO;function Xm(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Xm(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Xm(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function ST(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function nA(n,e){const t=ST(n);return Math.round(e*t)/t}function Jv(n){const e=_.useRef(n);return Hg(()=>{e.current=n}),e}function aO(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:c,open:u}=n,[d,h]=_.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=_.useState(r);Xm(f,r)||p(r);const[m,g]=_.useState(null),[b,y]=_.useState(null),v=_.useCallback(D=>{D!==T.current&&(T.current=D,g(D))},[]),x=_.useCallback(D=>{D!==P.current&&(P.current=D,y(D))},[]),A=i||m,C=o||b,T=_.useRef(null),P=_.useRef(null),k=_.useRef(d),N=c!=null,M=Jv(c),F=Jv(s),z=Jv(u),V=_.useCallback(()=>{if(!T.current||!P.current)return;const D={placement:e,strategy:t,middleware:f};F.current&&(D.platform=F.current),sO(T.current,P.current,D).then(L=>{const I={...L,isPositioned:z.current!==!1};$.current&&!Xm(k.current,I)&&(k.current=I,$p.flushSync(()=>{h(I)}))})},[f,e,t,F,z]);Hg(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,h(D=>({...D,isPositioned:!1})))},[u]);const $=_.useRef(!1);Hg(()=>($.current=!0,()=>{$.current=!1}),[]),Hg(()=>{if(A&&(T.current=A),C&&(P.current=C),A&&C){if(M.current)return M.current(A,C,V);V()}},[A,C,V,M,N]);const Y=_.useMemo(()=>({reference:T,floating:P,setReference:v,setFloating:x}),[v,x]),B=_.useMemo(()=>({reference:A,floating:C}),[A,C]),O=_.useMemo(()=>{const D={position:t,left:0,top:0};if(!B.floating)return D;const L=nA(B.floating,d.x),I=nA(B.floating,d.y);return a?{...D,transform:"translate("+L+"px, "+I+"px)",...ST(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:L,top:I}},[t,a,B.floating,d.x,d.y]);return _.useMemo(()=>({...d,update:V,refs:Y,elements:B,floatingStyles:O}),[d,V,Y,B,O])}const lO=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?tA({element:r.current,padding:s}).fn(t):{}:r?tA({element:r,padding:s}).fn(t):{}}}},cO=(n,e)=>({...JD(n),options:[n,e]}),uO=(n,e)=>({...ZD(n),options:[n,e]}),dO=(n,e)=>({...rO(n),options:[n,e]}),hO=(n,e)=>({...eO(n),options:[n,e]}),fO=(n,e)=>({...tO(n),options:[n,e]}),pO=(n,e)=>({...nO(n),options:[n,e]}),gO=(n,e)=>({...lO(n),options:[n,e]});var mO="Arrow",AT=_.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return R.jsx(ft.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:R.jsx("polygon",{points:"0,0 30,0 15,10"})})});AT.displayName=mO;var yO=AT;function vO(n){const[e,t]=_.useState(void 0);return Xi(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,a=u.blockSize}else o=n.offsetWidth,a=n.offsetHeight;t({width:o,height:a})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var ET="Popper",[CT,_T]=Pd(ET),[Rz,TT]=CT(ET),PT="PopperAnchor",RT=_.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=TT(PT,t),o=_.useRef(null),a=Wt(e,o);return _.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:R.jsx(ft.div,{...s,ref:a})});RT.displayName=PT;var zx="PopperContent",[wO,bO]=CT(zx),kT=_.forwardRef((n,e)=>{var Q,Se,He,ge,Ie,Gt;const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=n,b=TT(zx,t),[y,v]=_.useState(null),x=Wt(e,he=>v(he)),[A,C]=_.useState(null),T=vO(A),P=(T==null?void 0:T.width)??0,k=(T==null?void 0:T.height)??0,N=r+(i!=="center"?"-"+i:""),M=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},F=Array.isArray(u)?u:[u],z=F.length>0,V={padding:M,boundary:F.filter(SO),altBoundary:z},{refs:$,floatingStyles:Y,placement:B,isPositioned:O,middlewareData:D}=aO({strategy:"fixed",placement:N,whileElementsMounted:(...he)=>QD(...he,{animationFrame:p==="always"}),elements:{reference:b.anchor},middleware:[cO({mainAxis:s+k,alignmentAxis:o}),c&&uO({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?dO():void 0,...V}),c&&hO({...V}),fO({...V,apply:({elements:he,rects:Ce,availableWidth:Ye,availableHeight:Ke})=>{const{width:us,height:Lr}=Ce.reference,ds=he.floating.style;ds.setProperty("--radix-popper-available-width",`${Ye}px`),ds.setProperty("--radix-popper-available-height",`${Ke}px`),ds.setProperty("--radix-popper-anchor-width",`${us}px`),ds.setProperty("--radix-popper-anchor-height",`${Lr}px`)}}),A&&gO({element:A,padding:a}),AO({arrowWidth:P,arrowHeight:k}),f&&pO({strategy:"referenceHidden",...V})]}),[L,I]=MT(B),j=mn(m);Xi(()=>{O&&(j==null||j())},[O,j]);const H=(Q=D.arrow)==null?void 0:Q.x,U=(Se=D.arrow)==null?void 0:Se.y,q=((He=D.arrow)==null?void 0:He.centerOffset)!==0,[se,oe]=_.useState();return Xi(()=>{y&&oe(window.getComputedStyle(y).zIndex)},[y]),R.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...Y,transform:O?Y.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:se,"--radix-popper-transform-origin":[(ge=D.transformOrigin)==null?void 0:ge.x,(Ie=D.transformOrigin)==null?void 0:Ie.y].join(" "),...((Gt=D.hide)==null?void 0:Gt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:R.jsx(wO,{scope:t,placedSide:L,onArrowChange:C,arrowX:H,arrowY:U,shouldHideArrow:q,children:R.jsx(ft.div,{"data-side":L,"data-align":I,...g,ref:x,style:{...g.style,animation:O?void 0:"none"}})})})});kT.displayName=zx;var LT="PopperArrow",xO={top:"bottom",right:"left",bottom:"top",left:"right"},NT=_.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=bO(LT,r),o=xO[i.placedSide];return R.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:R.jsx(yO,{...s,ref:t,style:{...s.style,display:"block"}})})});NT.displayName=LT;function SO(n){return n!==null}var AO=n=>({name:"transformOrigin",options:n,fn(e){var b,y,v;const{placement:t,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:n.arrowWidth,c=o?0:n.arrowHeight,[u,d]=MT(t),h={start:"0%",center:"50%",end:"100%"}[d],f=(((y=s.arrow)==null?void 0:y.x)??0)+a/2,p=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let m="",g="";return u==="bottom"?(m=o?h:`${f}px`,g=`${-c}px`):u==="top"?(m=o?h:`${f}px`,g=`${r.floating.height+c}px`):u==="right"?(m=`${-c}px`,g=o?h:`${p}px`):u==="left"&&(m=`${r.floating.width+c}px`,g=o?h:`${p}px`),{data:{x:m,y:g}}}});function MT(n){const[e,t="center"]=n.split("-");return[e,t]}var EO=RT,CO=kT,_O=NT,[Qy,kz]=Pd("Tooltip",[_T]),Hx=_T(),IT="TooltipProvider",TO=700,rA="tooltip.open",[PO,DT]=Qy(IT),OT=n=>{const{__scopeTooltip:e,delayDuration:t=TO,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,o=_.useRef(!0),a=_.useRef(!1),c=_.useRef(0);return _.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),R.jsx(PO,{scope:e,isOpenDelayedRef:o,delayDuration:t,onOpen:_.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:_.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:_.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};OT.displayName=IT;var FT="Tooltip",[Lz,Jy]=Qy(FT),dw="TooltipTrigger",RO=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Jy(dw,t),i=DT(dw,t),o=Hx(t),a=_.useRef(null),c=Wt(e,a,s.onTriggerChange),u=_.useRef(!1),d=_.useRef(!1),h=_.useCallback(()=>u.current=!1,[]);return _.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),R.jsx(EO,{asChild:!0,...o,children:R.jsx(ft.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Oe(n.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Oe(n.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Oe(n.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Oe(n.onFocus,()=>{u.current||s.onOpen()}),onBlur:Oe(n.onBlur,s.onClose),onClick:Oe(n.onClick,s.onClose)})})});RO.displayName=dw;var kO="TooltipPortal",[Nz,LO]=Qy(kO,{forceMount:void 0}),xd="TooltipContent",jT=_.forwardRef((n,e)=>{const t=LO(xd,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,o=Jy(xd,n.__scopeTooltip);return R.jsx(fc,{present:r||o.open,children:o.disableHoverableContent?R.jsx($T,{side:s,...i,ref:e}):R.jsx(NO,{side:s,...i,ref:e})})}),NO=_.forwardRef((n,e)=>{const t=Jy(xd,n.__scopeTooltip),r=DT(xd,n.__scopeTooltip),s=_.useRef(null),i=Wt(e,s),[o,a]=_.useState(null),{trigger:c,onClose:u}=t,d=s.current,{onPointerInTransitChange:h}=r,f=_.useCallback(()=>{a(null),h(!1)},[h]),p=_.useCallback((m,g)=>{const b=m.currentTarget,y={x:m.clientX,y:m.clientY},v=FO(y,b.getBoundingClientRect()),x=jO(y,v),A=$O(g.getBoundingClientRect()),C=zO([...x,...A]);a(C),h(!0)},[h]);return _.useEffect(()=>()=>f(),[f]),_.useEffect(()=>{if(c&&d){const m=b=>p(b,d),g=b=>p(b,c);return c.addEventListener("pointerleave",m),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",g)}}},[c,d,p,f]),_.useEffect(()=>{if(o){const m=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},v=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),x=!BO(y,o);v?f():x&&(f(),u())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,d,o,u,f]),R.jsx($T,{...n,ref:i})}),[MO,IO]=Qy(FT,{isInside:!1}),DO=HM("TooltipContent"),$T=_.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=n,c=Jy(xd,t),u=Hx(t),{onClose:d}=c;return _.useEffect(()=>(document.addEventListener(rA,d),()=>document.removeEventListener(rA,d)),[d]),_.useEffect(()=>{if(c.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),R.jsx(Rx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:R.jsxs(CO,{"data-state":c.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[R.jsx(DO,{children:r}),R.jsx(MO,{scope:t,isInside:!0,children:R.jsx(fI,{id:c.contentId,role:"tooltip",children:s||r})})]})})});jT.displayName=xd;var BT="TooltipArrow",OO=_.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Hx(t);return IO(BT,t).isInside?null:R.jsx(_O,{...s,...r,ref:e})});OO.displayName=BT;function FO(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function jO(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function $O(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function BO(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i],c=e[o],u=a.x,d=a.y,h=c.x,f=c.y;d>r!=f>r&&t<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function zO(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),HO(e)}function HO(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var UO=OT,zT=jT;const VO=UO,WO=_.forwardRef(({className:n,sideOffset:e=4,...t},r)=>R.jsx(zT,{ref:r,sideOffset:e,className:ot("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));WO.displayName=zT.displayName;var Zy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ev=typeof window>"u"||"Deno"in globalThis;function $r(){}function GO(n,e){return typeof n=="function"?n(e):n}function qO(n){return typeof n=="number"&&n>=0&&n!==1/0}function XO(n,e){return Math.max(n+(e||0)-Date.now(),0)}function hw(n,e){return typeof n=="function"?n(e):n}function YO(n,e){return typeof n=="function"?n(e):n}function sA(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==Ux(o,e.options))return!1}else if(!Yh(e.queryKey,o))return!1}if(t!=="all"){const c=e.isActive();if(t==="active"&&!c||t==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function iA(n,e){const{exact:t,status:r,predicate:s,mutationKey:i}=n;if(i){if(!e.options.mutationKey)return!1;if(t){if(Xh(e.options.mutationKey)!==Xh(i))return!1}else if(!Yh(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ux(n,e){return((e==null?void 0:e.queryKeyHashFn)||Xh)(n)}function Xh(n){return JSON.stringify(n,(e,t)=>fw(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Yh(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>Yh(n[t],e[t])):!1}function HT(n,e){if(n===e)return n;const t=oA(n)&&oA(e);if(t||fw(n)&&fw(e)){const r=t?n:Object.keys(n),s=r.length,i=t?e:Object.keys(e),o=i.length,a=t?[]:{},c=new Set(r);let u=0;for(let d=0;d<o;d++){const h=t?d:i[d];(!t&&c.has(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,u++):(a[h]=HT(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&u++)}return s===o&&u===s?n:a}return e}function oA(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function fw(n){if(!aA(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!aA(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function aA(n){return Object.prototype.toString.call(n)==="[object Object]"}function KO(n){return new Promise(e=>{setTimeout(e,n)})}function QO(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?HT(n,e):e}function JO(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function ZO(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var Vx=Symbol();function UT(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===Vx?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ba,mo,Zc,nE,eF=(nE=class extends Zy{constructor(){super();S(this,Ba);S(this,mo);S(this,Zc);w(this,Zc,e=>{if(!ev&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){l(this,mo)||this.setEventListener(l(this,Zc))}onUnsubscribe(){var e;this.hasListeners()||((e=l(this,mo))==null||e.call(this),w(this,mo,void 0))}setEventListener(e){var t;w(this,Zc,e),(t=l(this,mo))==null||t.call(this),w(this,mo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){l(this,Ba)!==e&&(w(this,Ba,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof l(this,Ba)=="boolean"?l(this,Ba):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ba=new WeakMap,mo=new WeakMap,Zc=new WeakMap,nE),VT=new eF,eu,yo,tu,rE,tF=(rE=class extends Zy{constructor(){super();S(this,eu,!0);S(this,yo);S(this,tu);w(this,tu,e=>{if(!ev&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){l(this,yo)||this.setEventListener(l(this,tu))}onUnsubscribe(){var e;this.hasListeners()||((e=l(this,yo))==null||e.call(this),w(this,yo,void 0))}setEventListener(e){var t;w(this,tu,e),(t=l(this,yo))==null||t.call(this),w(this,yo,e(this.setOnline.bind(this)))}setOnline(e){l(this,eu)!==e&&(w(this,eu,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return l(this,eu)}},eu=new WeakMap,yo=new WeakMap,tu=new WeakMap,rE),Ym=new tF;function nF(){let n,e;const t=new Promise((s,i)=>{n=s,e=i});t.status="pending",t.catch(()=>{});function r(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{r({status:"fulfilled",value:s}),n(s)},t.reject=s=>{r({status:"rejected",reason:s}),e(s)},t}function rF(n){return Math.min(1e3*2**n,3e4)}function WT(n){return(n??"online")==="online"?Ym.isOnline():!0}var GT=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function Zv(n){return n instanceof GT}function qT(n){let e=!1,t=0,r=!1,s;const i=nF(),o=g=>{var b;r||(f(new GT(g)),(b=n.abort)==null||b.call(n))},a=()=>{e=!0},c=()=>{e=!1},u=()=>VT.isFocused()&&(n.networkMode==="always"||Ym.isOnline())&&n.canRun(),d=()=>WT(n.networkMode)&&n.canRun(),h=g=>{var b;r||(r=!0,(b=n.onSuccess)==null||b.call(n,g),s==null||s(),i.resolve(g))},f=g=>{var b;r||(r=!0,(b=n.onError)==null||b.call(n,g),s==null||s(),i.reject(g))},p=()=>new Promise(g=>{var b;s=y=>{(r||u())&&g(y)},(b=n.onPause)==null||b.call(n)}).then(()=>{var g;s=void 0,r||(g=n.onContinue)==null||g.call(n)}),m=()=>{if(r)return;let g;const b=t===0?n.initialPromise:void 0;try{g=b??n.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var T;if(r)return;const v=n.retry??(ev?0:3),x=n.retryDelay??rF,A=typeof x=="function"?x(t,y):x,C=v===!0||typeof v=="number"&&t<v||typeof v=="function"&&v(t,y);if(e||!C){f(y);return}t++,(T=n.onFail)==null||T.call(n,t,y),KO(A).then(()=>u()?void 0:p()).then(()=>{e?f(y):m()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?m():p().then(m),i)}}var sF=n=>setTimeout(n,0);function iF(){let n=[],e=0,t=a=>{a()},r=a=>{a()},s=sF;const i=a=>{e?n.push(a):s(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{t(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var gn=iF(),za,sE,XT=(sE=class{constructor(){S(this,za)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qO(this.gcTime)&&w(this,za,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(ev?1/0:5*60*1e3))}clearGcTimeout(){l(this,za)&&(clearTimeout(l(this,za)),w(this,za,void 0))}},za=new WeakMap,sE),nu,Ha,hr,Ua,Qt,rf,Va,Br,ei,iE,oF=(iE=class extends XT{constructor(e){super();S(this,Br);S(this,nu);S(this,Ha);S(this,hr);S(this,Ua);S(this,Qt);S(this,rf);S(this,Va);w(this,Va,!1),w(this,rf,e.defaultOptions),this.setOptions(e.options),this.observers=[],w(this,Ua,e.client),w(this,hr,l(this,Ua).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,w(this,nu,lF(this.options)),this.state=e.state??l(this,nu),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=l(this,Qt))==null?void 0:e.promise}setOptions(e){this.options={...l(this,rf),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&l(this,hr).remove(this)}setData(e,t){const r=QO(this.state.data,e,this.options);return E(this,Br,ei).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){E(this,Br,ei).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,s;const t=(r=l(this,Qt))==null?void 0:r.promise;return(s=l(this,Qt))==null||s.cancel(e),t?t.then($r).catch($r):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(l(this,nu))}isActive(){return this.observers.some(e=>YO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>hw(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!XO(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=l(this,Qt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=l(this,Qt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),l(this,hr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(l(this,Qt)&&(l(this,Va)?l(this,Qt).cancel({revert:!0}):l(this,Qt).cancelRetry()),this.scheduleGc()),l(this,hr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||E(this,Br,ei).call(this,{type:"invalidate"})}fetch(e,t){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(l(this,Qt))return l(this,Qt).continueRetry(),l(this,Qt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(w(this,Va,!0),r.signal)})},i=()=>{const f=UT(this.options,t),m=(()=>{const g={client:l(this,Ua),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return w(this,Va,!1),this.options.persister?this.options.persister(f,m,this):f(m)},a=(()=>{const f={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:l(this,Ua),state:this.state,fetchFn:i};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(a,this),w(this,Ha,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&E(this,Br,ei).call(this,{type:"fetch",meta:(h=a.fetchOptions)==null?void 0:h.meta});const c=f=>{var p,m,g,b;Zv(f)&&f.silent||E(this,Br,ei).call(this,{type:"error",error:f}),Zv(f)||((m=(p=l(this,hr).config).onError)==null||m.call(p,f,this),(b=(g=l(this,hr).config).onSettled)==null||b.call(g,this.state.data,f,this)),this.scheduleGc()};return w(this,Qt,qT({initialPromise:t==null?void 0:t.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,m,g,b;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){c(y);return}(m=(p=l(this,hr).config).onSuccess)==null||m.call(p,f,this),(b=(g=l(this,hr).config).onSettled)==null||b.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,p)=>{E(this,Br,ei).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{E(this,Br,ei).call(this,{type:"pause"})},onContinue:()=>{E(this,Br,ei).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),l(this,Qt).start()}},nu=new WeakMap,Ha=new WeakMap,hr=new WeakMap,Ua=new WeakMap,Qt=new WeakMap,rf=new WeakMap,Va=new WeakMap,Br=new WeakSet,ei=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...aF(r.data,this.options),fetchMeta:e.meta??null};case"success":return w(this,Ha,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Zv(s)&&s.revert&&l(this,Ha)?{...l(this,Ha),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),gn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),l(this,hr).notify({query:this,type:"updated",action:e})})},iE);function aF(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:WT(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function lF(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var bs,oE,cF=(oE=class extends Zy{constructor(e={}){super();S(this,bs);this.config=e,w(this,bs,new Map)}build(e,t,r){const s=t.queryKey,i=t.queryHash??Ux(s,t);let o=this.get(i);return o||(o=new oF({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){l(this,bs).has(e.queryHash)||(l(this,bs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=l(this,bs).get(e.queryHash);t&&(e.destroy(),t===e&&l(this,bs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){gn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return l(this,bs).get(e)}getAll(){return[...l(this,bs).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>sA(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>sA(e,r)):t}notify(e){gn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){gn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){gn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},bs=new WeakMap,oE),xs,cn,Wa,Ss,co,aE,uF=(aE=class extends XT{constructor(e){super();S(this,Ss);S(this,xs);S(this,cn);S(this,Wa);this.mutationId=e.mutationId,w(this,cn,e.mutationCache),w(this,xs,[]),this.state=e.state||dF(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){l(this,xs).includes(e)||(l(this,xs).push(e),this.clearGcTimeout(),l(this,cn).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){w(this,xs,l(this,xs).filter(t=>t!==e)),this.scheduleGc(),l(this,cn).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){l(this,xs).length||(this.state.status==="pending"?this.scheduleGc():l(this,cn).remove(this))}continue(){var e;return((e=l(this,Wa))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,u,d,h,f,p,m,g,b,y,v,x,A,C,T,P,k;const t=()=>{E(this,Ss,co).call(this,{type:"continue"})};w(this,Wa,qT({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(N,M)=>{E(this,Ss,co).call(this,{type:"failed",failureCount:N,error:M})},onPause:()=>{E(this,Ss,co).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>l(this,cn).canRun(this)}));const r=this.state.status==="pending",s=!l(this,Wa).canStart();try{if(r)t();else{E(this,Ss,co).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=l(this,cn).config).onMutate)==null?void 0:o.call(i,e,this));const M=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));M!==this.state.context&&E(this,Ss,co).call(this,{type:"pending",context:M,variables:e,isPaused:s})}const N=await l(this,Wa).start();return await((d=(u=l(this,cn).config).onSuccess)==null?void 0:d.call(u,N,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,N,e,this.state.context)),await((m=(p=l(this,cn).config).onSettled)==null?void 0:m.call(p,N,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,N,null,e,this.state.context)),E(this,Ss,co).call(this,{type:"success",data:N}),N}catch(N){try{throw await((v=(y=l(this,cn).config).onError)==null?void 0:v.call(y,N,e,this.state.context,this)),await((A=(x=this.options).onError)==null?void 0:A.call(x,N,e,this.state.context)),await((T=(C=l(this,cn).config).onSettled)==null?void 0:T.call(C,void 0,N,this.state.variables,this.state.context,this)),await((k=(P=this.options).onSettled)==null?void 0:k.call(P,void 0,N,e,this.state.context)),N}finally{E(this,Ss,co).call(this,{type:"error",error:N})}}finally{l(this,cn).runNext(this)}}},xs=new WeakMap,cn=new WeakMap,Wa=new WeakMap,Ss=new WeakSet,co=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),gn.batch(()=>{l(this,xs).forEach(r=>{r.onMutationUpdate(e)}),l(this,cn).notify({mutation:this,type:"updated",action:e})})},aE);function dF(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var li,zr,sf,lE,hF=(lE=class extends Zy{constructor(e={}){super();S(this,li);S(this,zr);S(this,sf);this.config=e,w(this,li,new Set),w(this,zr,new Map),w(this,sf,0)}build(e,t,r){const s=new uF({mutationCache:this,mutationId:++Et(this,sf)._,options:e.defaultMutationOptions(t),state:r});return this.add(s),s}add(e){l(this,li).add(e);const t=wg(e);if(typeof t=="string"){const r=l(this,zr).get(t);r?r.push(e):l(this,zr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(l(this,li).delete(e)){const t=wg(e);if(typeof t=="string"){const r=l(this,zr).get(t);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&l(this,zr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=wg(e);if(typeof t=="string"){const r=l(this,zr).get(t),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const t=wg(e);if(typeof t=="string"){const s=(r=l(this,zr).get(t))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){gn.batch(()=>{l(this,li).forEach(e=>{this.notify({type:"removed",mutation:e})}),l(this,li).clear(),l(this,zr).clear()})}getAll(){return Array.from(l(this,li))}find(e){const t={exact:!0,...e};return this.getAll().find(r=>iA(t,r))}findAll(e={}){return this.getAll().filter(t=>iA(e,t))}notify(e){gn.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return gn.batch(()=>Promise.all(e.map(t=>t.continue().catch($r))))}},li=new WeakMap,zr=new WeakMap,sf=new WeakMap,lE);function wg(n){var e;return(e=n.options.scope)==null?void 0:e.id}function lA(n){return{onFetch:(e,t)=>{var d,h,f,p,m;const r=e.options,s=(f=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((p=e.state.data)==null?void 0:p.pages)||[],o=((m=e.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const b=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=UT(e.options,e.fetchOptions),v=async(x,A,C)=>{if(g)return Promise.reject();if(A==null&&x.pages.length)return Promise.resolve(x);const P=(()=>{const F={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return b(F),F})(),k=await y(P),{maxPages:N}=e.options,M=C?ZO:JO;return{pages:M(x.pages,k,N),pageParams:M(x.pageParams,A,N)}};if(s&&i.length){const x=s==="backward",A=x?fF:cA,C={pages:i,pageParams:o},T=A(r,C);a=await v(C,T,x)}else{const x=n??i.length;do{const A=c===0?o[0]??r.initialPageParam:cA(r,a);if(c>0&&A==null)break;a=await v(a,A),c++}while(c<x)}return a};e.options.persister?e.fetchFn=()=>{var g,b;return(b=(g=e.options).persister)==null?void 0:b.call(g,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function cA(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function fF(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}var nt,vo,wo,ru,su,bo,iu,ou,cE,pF=(cE=class{constructor(n={}){S(this,nt);S(this,vo);S(this,wo);S(this,ru);S(this,su);S(this,bo);S(this,iu);S(this,ou);w(this,nt,n.queryCache||new cF),w(this,vo,n.mutationCache||new hF),w(this,wo,n.defaultOptions||{}),w(this,ru,new Map),w(this,su,new Map),w(this,bo,0)}mount(){Et(this,bo)._++,l(this,bo)===1&&(w(this,iu,VT.subscribe(async n=>{n&&(await this.resumePausedMutations(),l(this,nt).onFocus())})),w(this,ou,Ym.subscribe(async n=>{n&&(await this.resumePausedMutations(),l(this,nt).onOnline())})))}unmount(){var n,e;Et(this,bo)._--,l(this,bo)===0&&((n=l(this,iu))==null||n.call(this),w(this,iu,void 0),(e=l(this,ou))==null||e.call(this),w(this,ou,void 0))}isFetching(n){return l(this,nt).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return l(this,vo).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=l(this,nt).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=l(this,nt).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(hw(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return l(this,nt).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),s=l(this,nt).get(r.queryHash),i=s==null?void 0:s.state.data,o=GO(e,i);if(o!==void 0)return l(this,nt).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return gn.batch(()=>l(this,nt).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=l(this,nt).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=l(this,nt);gn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=l(this,nt);return gn.batch(()=>(t.findAll(n).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=gn.batch(()=>l(this,nt).findAll(n).map(s=>s.cancel(t)));return Promise.all(r).then($r).catch($r)}invalidateQueries(n,e={}){return gn.batch(()=>(l(this,nt).findAll(n).forEach(t=>{t.invalidate()}),(n==null?void 0:n.refetchType)==="none"?Promise.resolve():this.refetchQueries({...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=gn.batch(()=>l(this,nt).findAll(n).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch($r)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then($r)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=l(this,nt).build(this,e);return t.isStaleByTime(hw(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then($r).catch($r)}fetchInfiniteQuery(n){return n.behavior=lA(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then($r).catch($r)}ensureInfiniteQueryData(n){return n.behavior=lA(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Ym.isOnline()?l(this,vo).resumePausedMutations():Promise.resolve()}getQueryCache(){return l(this,nt)}getMutationCache(){return l(this,vo)}getDefaultOptions(){return l(this,wo)}setDefaultOptions(n){w(this,wo,n)}setQueryDefaults(n,e){l(this,ru).set(Xh(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...l(this,ru).values()],t={};return e.forEach(r=>{Yh(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){l(this,su).set(Xh(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...l(this,su).values()],t={};return e.forEach(r=>{Yh(n,r.mutationKey)&&Object.assign(t,r.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...l(this,wo).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Ux(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Vx&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...l(this,wo).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){l(this,nt).clear(),l(this,vo).clear()}},nt=new WeakMap,vo=new WeakMap,wo=new WeakMap,ru=new WeakMap,su=new WeakMap,bo=new WeakMap,iu=new WeakMap,ou=new WeakMap,cE),gF=_.createContext(void 0),mF=({client:n,children:e})=>(_.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),R.jsx(gF.Provider,{value:n,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Km(){return Km=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Km.apply(this,arguments)}var oa;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(oa||(oa={}));const uA="popstate";function yF(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return pw("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:KT(s)}return wF(e,t,null,n)}function On(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function YT(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vF(){return Math.random().toString(36).substr(2,8)}function dA(n,e){return{usr:n.state,key:n.key,idx:e}}function pw(n,e,t,r){return t===void 0&&(t=null),Km({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?tv(e):e,{state:t,key:e&&e.key||r||vF()})}function KT(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tv(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function wF(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=oa.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Km({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=oa.Pop;let b=d(),y=b==null?null:b-u;u=b,c&&c({action:a,location:g.location,delta:y})}function f(b,y){a=oa.Push;let v=pw(g.location,b,y);u=d()+1;let x=dA(v,u),A=g.createHref(v);try{o.pushState(x,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function p(b,y){a=oa.Replace;let v=pw(g.location,b,y);u=d();let x=dA(v,u),A=g.createHref(v);o.replaceState(x,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function m(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof b=="string"?b:KT(b);return v=v.replace(/ $/,"%20"),On(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let g={get action(){return a},get location(){return n(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(uA,h),c=b,()=>{s.removeEventListener(uA,h),c=null}},createHref(b){return e(s,b)},createURL:m,encodeLocation(b){let y=m(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(b){return o.go(b)}};return g}var hA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(hA||(hA={}));function bF(n,e,t){return t===void 0&&(t="/"),xF(n,e,t,!1)}function xF(n,e,t,r){let s=typeof e=="string"?tv(e):e,i=ZT(s.pathname||"/",t);if(i==null)return null;let o=QT(n);SF(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let u=MF(i);a=LF(o[c],u,r)}return a}function QT(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(On(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Yc([r,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(On(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),QT(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:RF(u,i.index),routesMeta:d})};return n.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of JT(i.path))s(i,o,c)}),e}function JT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=JT(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>n.startsWith("/")&&c===""?"/":c)}function SF(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kF(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const AF=/^:[\w-]+$/,EF=3,CF=2,_F=1,TF=10,PF=-2,fA=n=>n==="*";function RF(n,e){let t=n.split("/"),r=t.length;return t.some(fA)&&(r+=PF),e&&(r+=CF),t.filter(s=>!fA(s)).reduce((s,i)=>s+(AF.test(i)?EF:i===""?_F:TF),r)}function kF(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function LF(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=pA({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&t&&!r[r.length-1].route.index&&(h=pA({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Yc([i,h.pathname]),pathnameBase:IF(Yc([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Yc([i,h.pathnameBase]))}return o}function pA(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=NF(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let g=a[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[h];return p&&!m?u[f]=void 0:u[f]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:n}}function NF(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),YT(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function MF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return YT(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function ZT(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const Yc=n=>n.join("/").replace(/\/\/+/g,"/"),IF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/");function DF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const eP=["post","put","patch","delete"];new Set(eP);const OF=["get",...eP];new Set(OF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qm(){return Qm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qm.apply(this,arguments)}const FF=_.createContext(null),jF=_.createContext(null),tP=_.createContext(null),nv=_.createContext(null),rv=_.createContext({outlet:null,matches:[],isDataRoute:!1}),nP=_.createContext(null);function Wx(){return _.useContext(nv)!=null}function rP(){return Wx()||On(!1),_.useContext(nv).location}function $F(n,e){return BF(n,e)}function BF(n,e,t,r){Wx()||On(!1);let{navigator:s}=_.useContext(tP),{matches:i}=_.useContext(rv),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=rP(),d;if(e){var h;let b=typeof e=="string"?tv(e):e;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||On(!1),d=b}else d=u;let f=d.pathname||"/",p=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=bF(n,{pathname:p}),g=WF(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:Yc([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Yc([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,t,r);return e&&g?_.createElement(nv.Provider,{value:{location:Qm({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:oa.Pop}},g):g}function zF(){let n=YF(),e=DF(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:s},t):null,null)}const HF=_.createElement(zF,null);class UF extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?_.createElement(rv.Provider,{value:this.props.routeContext},_.createElement(nP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VF(n){let{routeContext:e,match:t,children:r}=n,s=_.useContext(FF);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(rv.Provider,{value:e},r)}function WF(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||On(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:p}=t,m=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||m){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,m=!1,g=null,b=null;t&&(p=a&&h.route.id?a[h.route.id]:void 0,g=h.route.errorElement||HF,c&&(u<0&&f===0?(m=!0,b=null):u===f&&(m=!0,b=h.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,f+1)),v=()=>{let x;return p?x=g:m?x=b:h.route.Component?x=_.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,_.createElement(VF,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:t!=null},children:x})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?_.createElement(UF,{location:t.location,revalidation:t.revalidation,component:g,error:p,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var gw=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(gw||{});function GF(n){let e=_.useContext(jF);return e||On(!1),e}function qF(n){let e=_.useContext(rv);return e||On(!1),e}function XF(n){let e=qF(),t=e.matches[e.matches.length-1];return t.route.id||On(!1),t.route.id}function YF(){var n;let e=_.useContext(nP),t=GF(gw.UseRouteError),r=XF(gw.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function KF(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function mw(n){On(!1)}function QF(n){let{basename:e="/",children:t=null,location:r,navigationType:s=oa.Pop,navigator:i,static:o=!1,future:a}=n;Wx()&&On(!1);let c=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:c,navigator:i,static:o,future:Qm({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=tv(r));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=r,g=_.useMemo(()=>{let b=ZT(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:p,key:m},navigationType:s}},[c,d,h,f,p,m,s]);return g==null?null:_.createElement(tP.Provider,{value:u},_.createElement(nv.Provider,{children:t,value:g}))}function JF(n){let{children:e,location:t}=n;return $F(yw(e),t)}new Promise(()=>{});function yw(n,e){e===void 0&&(e=[]);let t=[];return _.Children.forEach(n,(r,s)=>{if(!_.isValidElement(r))return;let i=[...e,s];if(r.type===_.Fragment){t.push.apply(t,yw(r.props.children,i));return}r.type!==mw&&On(!1),!r.props.index||!r.props.children||On(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yw(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ZF="6";try{window.__reactRouterVersion=ZF}catch{}const ej="startTransition",gA=SE[ej];function tj(n){let{basename:e,children:t,future:r,window:s}=n,i=_.useRef();i.current==null&&(i.current=yF({window:s,v5Compat:!0}));let o=i.current,[a,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=_.useCallback(h=>{u&&gA?gA(()=>c(h)):c(h)},[c,u]);return _.useLayoutEffect(()=>o.listen(d),[o,d]),_.useEffect(()=>KF(r),[r]),_.createElement(QF,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:r})}var mA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(mA||(mA={}));var yA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(yA||(yA={}));const nc=_.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:ot("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));nc.displayName="Card";const nj=_.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:ot("flex flex-col space-y-1.5 p-6",n),...e}));nj.displayName="CardHeader";const rj=_.forwardRef(({className:n,...e},t)=>R.jsx("h3",{ref:t,className:ot("text-2xl font-semibold leading-none tracking-tight",n),...e}));rj.displayName="CardTitle";const sj=_.forwardRef(({className:n,...e},t)=>R.jsx("p",{ref:t,className:ot("text-sm text-muted-foreground",n),...e}));sj.displayName="CardDescription";const ij=_.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:ot("p-6 pt-0",n),...e}));ij.displayName="CardContent";const oj=_.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:ot("flex items-center p-6 pt-0",n),...e}));oj.displayName="CardFooter";const aj=qy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Bs=_.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?BM:"button";return R.jsx(o,{className:ot(aj({variant:e,size:t,className:n})),ref:i,...s})});Bs.displayName="Button";var Gx="Progress",qx=100,[lj,Mz]=Pd(Gx),[cj,uj]=lj(Gx),sP=_.forwardRef((n,e)=>{const{__scopeProgress:t,value:r=null,max:s,getValueLabel:i=dj,...o}=n;(s||s===0)&&!vA(s)&&console.error(hj(`${s}`,"Progress"));const a=vA(s)?s:qx;r!==null&&!wA(r,a)&&console.error(fj(`${r}`,"Progress"));const c=wA(r,a)?r:null,u=Jm(c)?i(c,a):void 0;return R.jsx(cj,{scope:t,value:c,max:a,children:R.jsx(ft.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Jm(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":aP(c,a),"data-value":c??void 0,"data-max":a,...o,ref:e})})});sP.displayName=Gx;var iP="ProgressIndicator",oP=_.forwardRef((n,e)=>{const{__scopeProgress:t,...r}=n,s=uj(iP,t);return R.jsx(ft.div,{"data-state":aP(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});oP.displayName=iP;function dj(n,e){return`${Math.round(n/e*100)}%`}function aP(n,e){return n==null?"indeterminate":n===e?"complete":"loading"}function Jm(n){return typeof n=="number"}function vA(n){return Jm(n)&&!isNaN(n)&&n>0}function wA(n,e){return Jm(n)&&!isNaN(n)&&n<=e&&n>=0}function hj(n,e){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${qx}\`.`}function fj(n,e){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${qx} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var lP=sP,pj=oP;const cP=_.forwardRef(({className:n,value:e,...t},r)=>R.jsx(lP,{ref:r,className:ot("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:R.jsx(pj,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));cP.displayName=lP.displayName;const gj=qy("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),uP=_.forwardRef(({className:n,variant:e,...t},r)=>R.jsx("div",{ref:r,role:"alert",className:ot(gj({variant:e}),n),...t}));uP.displayName="Alert";const mj=_.forwardRef(({className:n,...e},t)=>R.jsx("h5",{ref:t,className:ot("mb-1 font-medium leading-none tracking-tight",n),...e}));mj.displayName="AlertTitle";const dP=_.forwardRef(({className:n,...e},t)=>R.jsx("div",{ref:t,className:ot("text-sm [&_p]:leading-relaxed",n),...e}));dP.displayName="AlertDescription";const fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),vw=[.001,0,0,.001,0,0],e0=1.35,Zn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},hP="pdfjs_internal_editor_",ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ve={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},fP={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ph={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},at={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},wc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Hp={ERRORS:0,WARNINGS:1,INFOS:5},Kh={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},bg={moveTo:0,lineTo:1,curveTo:2,closePath:3},pP={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let sv=Hp.WARNINGS;function yj(n){Number.isInteger(n)&&(sv=n)}function vj(){return sv}function iv(n){sv>=Hp.INFOS&&console.log(`Info: ${n}`)}function le(n){sv>=Hp.WARNINGS&&console.log(`Warning: ${n}`)}function Le(n){throw new Error(n)}function mt(n,e){n||Le(e)}function wj(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Xx(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=Ej(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return wj(r)?r:null}function Yx(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&Xx(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function me(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const pc=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class bA extends pc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class t0 extends pc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Zm extends pc{constructor(e){super(e,"InvalidPDFException")}}class Qh extends pc{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class bj extends pc{constructor(e){super(e,"FormatError")}}class Qi extends pc{constructor(e){super(e,"AbortException")}}function gP(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Le("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),o=n.subarray(s,i);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function Up(n){typeof n!="string"&&Le("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function xj(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function Sj(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function Aj(){try{return new Function(""),!0}catch{return!1}}class It{static get isLittleEndian(){return me(this,"isLittleEndian",Sj())}static get isEvalSupported(){return me(this,"isEvalSupported",Aj())}static get isOffscreenCanvasSupported(){return me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return me(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return me(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const n0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Hi,Ug,ww;class re{static makeHexColor(e,t,r){return`#${n0[e]}${n0[t]}${n0[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[r+d],f=e[r+d+1];e[r+d]=h*s+f*o+c,e[r+d+1]=h*i+f*a+u}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],p=e[3];let m=s*d+c,g=m,b=s*f+c,y=b,v=a*h+u,x=v,A=a*p+u,C=A;if(i!==0||o!==0){const T=i*d,P=i*f,k=o*h,N=o*p;m+=k,y+=k,b+=N,g+=N,v+=T,C+=T,A+=P,x+=P}r[0]=Math.min(r[0],m,b,g,y),r[1]=Math.min(r[1],v,A,x,C),r[2]=Math.max(r[2],m,b,g,y),r[3]=Math.max(r[3],v,A,x,C)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],o=e[3],a=r**2+s**2,c=r*i+s*o,u=i**2+o**2,d=(a+u)/2,h=Math.sqrt(d**2-(a*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,s,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,o,a,c,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c),E(this,Hi,ww).call(this,e,r,i,a,t,s,o,c,3*(-e+3*(r-i)+a),6*(e-2*r+i),3*(r-e),u),E(this,Hi,ww).call(this,e,r,i,a,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),u)}}Hi=new WeakSet,Ug=function(e,t,r,s,i,o,a,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,m=h*(h*(h*e+3*u*t)+3*f*r)+p*s,g=h*(h*(h*i+3*u*o)+3*f*a)+p*c;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],g)},ww=function(e,t,r,s,i,o,a,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&E(this,Hi,Ug).call(this,e,t,r,s,i,o,a,c,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const m=Math.sqrt(p),g=2*u;E(this,Hi,Ug).call(this,e,t,r,s,i,o,a,c,(-d+m)/g,f),E(this,Hi,Ug).call(this,e,t,r,s,i,o,a,c,(-d-m)/g,f)},S(re,Hi);function Ej(n){return decodeURIComponent(escape(n))}let r0=null,xA=null;function mP(n){return r0||(r0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xA=new Map([["","t"]])),n.replaceAll(r0,(e,t,r)=>t?t.normalize("NFKC"):xA.get(r))}function Kx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),gP(n)}const Qx="pdfjs_internal_id_";function Cj(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const o=i.length;let a=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function tn(n,e,t){return Math.min(Math.max(n,e),t)}function yP(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(gP(n))}function _j(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Up(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});const ti="http://www.w3.org/2000/svg",Da=class Da{};G(Da,"CSS",96),G(Da,"PDF",72),G(Da,"PDF_TO_CSS_UNITS",Da.CSS/Da.PDF);let Ji=Da;async function Md(n,e="text"){if(Zd(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Vp{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=o,r*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,p;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let m,g,b,y;d===0?(m=Math.abs(u-e[1])*r+i,g=Math.abs(c-e[0])*r+o,b=(e[3]-e[1])*r,y=(e[2]-e[0])*r):(m=Math.abs(c-e[0])*r+i,g=Math.abs(u-e[1])*r+o,b=(e[2]-e[0])*r,y=(e[3]-e[1])*r),this.transform=[d*r,h*r,f*r,p*r,m-d*r*c-f*r*u,g-h*r*c-p*r*u],this.width=b,this.height=y}get rawDims(){const e=this.viewBox;return me(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Vp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return re.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];re.applyTransform(t,this.transform);const r=[e[2],e[3]];return re.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return re.applyInverseTransform(r,this.transform),r}}class ov extends pc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Wp(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function av(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function vP(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function wP(n,e="document.pdf"){if(typeof n!="string")return e;if(Wp(n))return le('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},i=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(i.test(o))return s(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const u of a)if(i.test(u))return s(u);const c=Array.from(r.searchParams.keys()).reverse();for(const u of c)if(i.test(u))return s(u)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return s(c[0])}return e}class SA{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&le(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||le(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Zd(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Rr(n){n.preventDefault()}function ut(n){n.preventDefault(),n.stopPropagation()}function Tj(n){console.log("Deprecated API usage: "+n)}var of;class lv{static toDateObject(e){if(!e||typeof e!="string")return null;l(this,of)||w(this,of,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,of).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(r,s,i,o,a,c))}}of=new WeakMap,S(lv,of);function bP(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Vp({viewBox:i,userUnit:1,scale:e,rotation:t})}function Jx(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(le(`Not a valid color format: "${n}"`),[0,0,0])}function Pj(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Jx(r))}e.remove()}function Je(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform();return[e,t,r,s,i,o]}function gs(n){const{a:e,b:t,c:r,d:s,e:i,f:o}=n.getTransform().invertSelf();return[e,t,r,s,i,o]}function wa(n,e,t=!1,r=!0){if(e instanceof Vp){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:o}=n,a=It.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${i}px`,d=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class ls{constructor(){const{pixelRatio:e}=ls;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let o=1/0,a=1/0,c=1/0;r=ls.capPixels(r,i),r>0&&(o=Math.sqrt(r/(e*t))),s!==-1&&(a=s/e,c=s/t);const u=Math.min(o,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const ey=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var xo,Ga,fr,So,af,au,lf,uy,xP,yn,SP,AP,eh,Vg;const ii=class ii{constructor(e){S(this,yn);S(this,xo,null);S(this,Ga,null);S(this,fr);S(this,So,null);S(this,af,null);S(this,au,null);w(this,fr,e),l(ii,lf)||w(ii,lf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=w(this,xo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,fr)._uiManager._signal;e.addEventListener("contextmenu",Rr,{signal:t}),e.addEventListener("pointerdown",E(ii,uy,xP),{signal:t});const r=w(this,So,document.createElement("div"));r.className="buttons",e.append(r);const s=l(this,fr).toolbarPosition;if(s){const{style:i}=e,o=l(this,fr)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,xo)}hide(){var e;l(this,xo).classList.add("hidden"),(e=l(this,Ga))==null||e.hideDropdown()}show(){var e;l(this,xo).classList.remove("hidden"),(e=l(this,af))==null||e.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=l(this,fr),r=document.createElement("button");r.className="delete",r.tabIndex=0,r.setAttribute("data-l10n-id",l(ii,lf)[e]),E(this,yn,eh).call(this,r),r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),l(this,So).append(r)}async addAltText(e){const t=await e.render();E(this,yn,eh).call(this,t),l(this,So).append(t,l(this,yn,Vg)),w(this,af,e)}addColorPicker(e){w(this,Ga,e);const t=e.renderButton();E(this,yn,eh).call(this,t),l(this,So).append(t,l(this,yn,Vg))}async addEditSignatureButton(e){const t=w(this,au,await e.renderEditButton(l(this,fr)));E(this,yn,eh).call(this,t),l(this,So).append(t,l(this,yn,Vg))}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(e){l(this,au)&&(l(this,au).title=e)}remove(){var e;l(this,xo).remove(),(e=l(this,Ga))==null||e.destroy(),w(this,Ga,null)}};xo=new WeakMap,Ga=new WeakMap,fr=new WeakMap,So=new WeakMap,af=new WeakMap,au=new WeakMap,lf=new WeakMap,uy=new WeakSet,xP=function(e){e.stopPropagation()},yn=new WeakSet,SP=function(e){l(this,fr)._focusEventsAllowed=!1,ut(e)},AP=function(e){l(this,fr)._focusEventsAllowed=!0,ut(e)},eh=function(e){const t=l(this,fr)._uiManager._signal;e.addEventListener("focusin",E(this,yn,SP).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,yn,AP).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Rr,{signal:t})},Vg=function(){const e=document.createElement("div");return e.className="divider",e},S(ii,uy),S(ii,lf,null);let bw=ii;var cf,qa,Xa,xa,EP,CP,_P;class Rj{constructor(e){S(this,xa);S(this,cf,null);S(this,qa,null);S(this,Xa);w(this,Xa,e)}show(e,t,r){const[s,i]=E(this,xa,CP).call(this,t,r),{style:o}=l(this,qa)||w(this,qa,E(this,xa,EP).call(this));e.append(l(this,qa)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,qa).remove()}}cf=new WeakMap,qa=new WeakMap,Xa=new WeakMap,xa=new WeakSet,EP=function(){const e=w(this,qa,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Rr,{signal:l(this,Xa)._signal});const t=w(this,cf,document.createElement("div"));return t.className="buttons",e.append(t),E(this,xa,_P).call(this),e},CP=function(e,t){let r=0,s=0;for(const i of e){const o=i.y+i.height;if(o<r)continue;const a=i.x+(t?i.width:0);if(o>r){s=a,r=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,r]},_P=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const r=l(this,Xa)._signal;e.addEventListener("contextmenu",Rr,{signal:r}),e.addEventListener("click",()=>{l(this,Xa).highlightSelection("floating_button")},{signal:r}),l(this,cf).append(e)};function TP(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var dy;class kj{constructor(){S(this,dy,0)}get id(){return`${hP}${Et(this,dy)._++}`}}dy=new WeakMap;var lu,uf,Jt,cu,Wg;const m1=class m1{constructor(){S(this,cu);S(this,lu,Kx());S(this,uf,0);S(this,Jt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return me(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return E(this,cu,Wg).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return E(this,cu,Wg).call(this,e,e)}async getFromBlob(e,t){const r=await t;return E(this,cu,Wg).call(this,e,r)}async getFromId(e){l(this,Jt)||w(this,Jt,new Map);const t=l(this,Jt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,Jt)||w(this,Jt,new Map);let r=l(this,Jt).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${l(this,lu)}_${Et(this,uf)._++}`,refCounter:1,isSvg:!1},l(this,Jt).set(e,r),l(this,Jt).set(r.id,r),r}getSvgUrl(e){const t=l(this,Jt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;l(this,Jt)||w(this,Jt,new Map);const t=l(this,Jt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,lu)}_`)}};lu=new WeakMap,uf=new WeakMap,Jt=new WeakMap,cu=new WeakSet,Wg=async function(e,t){l(this,Jt)||w(this,Jt,new Map);let r=l(this,Jt).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${l(this,lu)}_${Et(this,uf)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await Md(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=m1._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,d)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,u()},o.onload=async()=>{const h=r.svgUrl=o.result;a.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(s),await c}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){le(s),r=null}return l(this,Jt).set(e,r),r&&l(this,Jt).set(r.id,r),r};let xw=m1;var lt,Ao,df,Qe;class Lj{constructor(e=128){S(this,lt,[]);S(this,Ao,!1);S(this,df);S(this,Qe,-1);w(this,df,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),l(this,Ao))return;const c={cmd:e,undo:t,post:r,type:i};if(l(this,Qe)===-1){l(this,lt).length>0&&(l(this,lt).length=0),w(this,Qe,0),l(this,lt).push(c);return}if(o&&l(this,lt)[l(this,Qe)].type===i){a&&(c.undo=l(this,lt)[l(this,Qe)].undo),l(this,lt)[l(this,Qe)]=c;return}const u=l(this,Qe)+1;u===l(this,df)?l(this,lt).splice(0,1):(w(this,Qe,u),u<l(this,lt).length&&l(this,lt).splice(u)),l(this,lt).push(c)}undo(){if(l(this,Qe)===-1)return;w(this,Ao,!0);const{undo:e,post:t}=l(this,lt)[l(this,Qe)];e(),t==null||t(),w(this,Ao,!1),w(this,Qe,l(this,Qe)-1)}redo(){if(l(this,Qe)<l(this,lt).length-1){w(this,Qe,l(this,Qe)+1),w(this,Ao,!0);const{cmd:e,post:t}=l(this,lt)[l(this,Qe)];e(),t==null||t(),w(this,Ao,!1)}}hasSomethingToUndo(){return l(this,Qe)!==-1}hasSomethingToRedo(){return l(this,Qe)<l(this,lt).length-1}cleanType(e){if(l(this,Qe)!==-1){for(let t=l(this,Qe);t>=0;t--)if(l(this,lt)[t].type!==e){l(this,lt).splice(t+1,l(this,Qe)-t),w(this,Qe,t);return}l(this,lt).length=0,w(this,Qe,-1)}}destroy(){w(this,lt,null)}}lt=new WeakMap,Ao=new WeakMap,df=new WeakMap,Qe=new WeakMap;var hy,PP;class Gp{constructor(e){S(this,hy);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=It.platform;for(const[r,s,i={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(E(this,hy,PP).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(s.bind(e,...o,t)(),i||ut(t))}}hy=new WeakSet,PP=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const fy=class fy{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Pj(e),me(this,"_colors",e)}convert(e){const t=Jx(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,o)=>i===t[o]))return fy._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?re.makeHexColor(...t):e}};G(fy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Sw=fy;var uu,$n,wt,Dt,du,ci,hu,pr,Eo,Co,fu,Ya,As,Hr,Ka,hf,ff,pu,pf,Es,_o,gu,To,Cs,py,Po,gf,Ro,Qa,Ja,ko,mf,Ct,_e,ui,Lo,Za,yf,vf,No,_s,di,wf,bf,gr,K,Gg,Aw,RP,kP,qg,LP,NP,MP,Ew,IP,Cw,_w,DP,an,ni,OP,FP,Tw,jP,th,Pw;const $c=class $c{constructor(e,t,r,s,i,o,a,c,u,d,h,f,p,m,g){S(this,K);S(this,uu,new AbortController);S(this,$n,null);S(this,wt,new Map);S(this,Dt,new Map);S(this,du,null);S(this,ci,null);S(this,hu,null);S(this,pr,new Lj);S(this,Eo,null);S(this,Co,null);S(this,fu,0);S(this,Ya,new Set);S(this,As,null);S(this,Hr,null);S(this,Ka,new Set);G(this,"_editorUndoBar",null);S(this,hf,!1);S(this,ff,!1);S(this,pu,!1);S(this,pf,null);S(this,Es,null);S(this,_o,null);S(this,gu,null);S(this,To,!1);S(this,Cs,null);S(this,py,new kj);S(this,Po,!1);S(this,gf,!1);S(this,Ro,null);S(this,Qa,null);S(this,Ja,null);S(this,ko,null);S(this,mf,null);S(this,Ct,ae.NONE);S(this,_e,new Set);S(this,ui,null);S(this,Lo,null);S(this,Za,null);S(this,yf,null);S(this,vf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,No,[0,0]);S(this,_s,null);S(this,di,null);S(this,wf,null);S(this,bf,null);S(this,gr,null);const b=this._signal=l(this,uu).signal;w(this,di,e),w(this,wf,t),w(this,bf,r),w(this,du,s),w(this,Lo,i),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:b}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:b}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:b}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:b}),o._on("setpreference",this.onSetPreference.bind(this),{signal:b}),o._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:b}),E(this,K,LP).call(this),E(this,K,DP).call(this),E(this,K,Ew).call(this),w(this,ci,a.annotationStorage),w(this,pf,a.filterFactory),w(this,Za,c),w(this,gu,u||null),w(this,hf,d),w(this,ff,h),w(this,pu,f),w(this,mf,p||null),this.viewParameters={realScale:Ji.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=g!==!1}static get _keyboardManager(){const e=$c.prototype,t=o=>l(o,di).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return me(this,"_keyboardManager",new Gp([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,di).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,di).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,o,a,c;(e=l(this,gr))==null||e.resolve(),w(this,gr,null),(t=l(this,uu))==null||t.abort(),w(this,uu,null),this._signal=null;for(const u of l(this,Dt).values())u.destroy();l(this,Dt).clear(),l(this,wt).clear(),l(this,Ka).clear(),(r=l(this,ko))==null||r.clear(),w(this,$n,null),l(this,_e).clear(),l(this,pr).destroy(),(s=l(this,du))==null||s.destroy(),(i=l(this,Lo))==null||i.destroy(),(o=l(this,Cs))==null||o.hide(),w(this,Cs,null),(a=l(this,Ja))==null||a.destroy(),w(this,Ja,null),l(this,Es)&&(clearTimeout(l(this,Es)),w(this,Es,null)),l(this,_s)&&(clearTimeout(l(this,_s)),w(this,_s,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,mf)}get useNewAltTextFlow(){return l(this,ff)}get useNewAltTextWhenAddingImage(){return l(this,pu)}get hcmFilter(){return me(this,"hcmFilter",l(this,Za)?l(this,pf).addHCMFilter(l(this,Za).foreground,l(this,Za).background):"none")}get direction(){return me(this,"direction",getComputedStyle(l(this,di)).direction)}get highlightColors(){return me(this,"highlightColors",l(this,gu)?new Map(l(this,gu).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColorNames(){return me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),w(this,Co,e)}setMainHighlightColorPicker(e){w(this,Ja,e)}editAltText(e,t=!1){var r;(r=l(this,du))==null||r.editAltText(this,e,t)}getSignature(e){var t;(t=l(this,Lo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,Lo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":w(this,pu,t);break}}onPageChanging({pageNumber:e}){w(this,fu,e-1)}focusMainContainer(){l(this,di).focus()}findParent(e,t){for(const r of l(this,Dt).values()){const{x:s,y:i,width:o,height:a}=r.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=i&&t<=i+a)return r}return null}disableUserSelect(e=!1){l(this,wf).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,Ka).add(e)}removeShouldRescale(e){l(this,Ka).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ji.PDF_TO_CSS_UNITS;for(const r of l(this,Ka))r.onScaleChanging();(t=l(this,Co))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o}=t,a=t.toString(),u=E(this,K,Gg).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;t.empty();const h=E(this,K,Aw).call(this,u),f=l(this,Ct)===ae.NONE,p=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:r,anchorOffset:s,focusNode:i,focusOffset:o,text:a}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(ae.HIGHLIGHT,p);return}p()}addToAnnotationStorage(e){!e.isEmpty()&&l(this,ci)&&!l(this,ci).has(e.id)&&l(this,ci).setValue(e.id,e)}a11yAlert(e,t=null){const r=l(this,bf);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,To)&&(w(this,To,!1),E(this,K,qg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,_e))if(t.div.contains(e)){w(this,Qa,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Qa))return;const[e,t]=l(this,Qa);w(this,Qa,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,K,Ew).call(this),E(this,K,Cw).call(this)}removeEditListeners(){E(this,K,IP).call(this),E(this,K,_w).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of l(this,Hr))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of l(this,Hr))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=l(this,$n))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of l(this,_e)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of l(this,Hr))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){le(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of r){const u=await s.deserialize(c);if(!u)return;i.push(u)}const o=()=>{for(const c of i)E(this,K,Tw).call(this,c);E(this,K,Pw).call(this,i)},a=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){le(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Ct)!==ae.NONE&&!this.isEditorHandlingKeyboard&&$c._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,To)&&(w(this,To,!1),E(this,K,qg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(E(this,K,NP).call(this),E(this,K,Cw).call(this),E(this,K,an).call(this,{isEditing:l(this,Ct)!==ae.NONE,isEmpty:E(this,K,th).call(this),hasSomethingToUndo:l(this,pr).hasSomethingToUndo(),hasSomethingToRedo:l(this,pr).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,K,MP).call(this),E(this,K,_w).call(this),E(this,K,an).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Hr)){w(this,Hr,e);for(const t of l(this,Hr))E(this,K,ni).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,py).id}get currentLayer(){return l(this,Dt).get(l(this,fu))}getLayer(e){return l(this,Dt).get(e)}get currentPageIndex(){return l(this,fu)}addLayer(e){l(this,Dt).set(e.pageIndex,e),l(this,Po)?e.enable():e.disable()}removeLayer(e){l(this,Dt).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1){var i,o,a;if(l(this,Ct)!==e&&!(l(this,gr)&&(await l(this,gr).promise,!l(this,gr)))){if(w(this,gr,Promise.withResolvers()),(i=l(this,Co))==null||i.commitOrRemove(),w(this,Ct,e),e===ae.NONE){this.setEditingState(!1),E(this,K,FP).call(this),(o=this._editorUndoBar)==null||o.hide(),l(this,gr).resolve();return}e===ae.SIGNATURE&&await((a=l(this,Lo))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await E(this,K,OP).call(this),this.unselectAll();for(const c of l(this,Dt).values())c.updateMode(e);if(!t){r&&this.addNewEditorFromKeyboard(),l(this,gr).resolve();return}for(const c of l(this,wt).values())c.annotationElementId===t||c.id===t?(this.setSelected(c),s&&c.enterInEditMode()):c.unselect();l(this,gr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,Ct)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){var r;if(l(this,Hr)){switch(e){case ve.CREATE:this.currentLayer.addNewEditor(t);return;case ve.HIGHLIGHT_DEFAULT_COLOR:(r=l(this,Ja))==null||r.updateColor(t);break;case ve.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,yf)||w(this,yf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of l(this,_e))s.updateParams(e,t);for(const s of l(this,Hr))s.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const o of l(this,wt).values())o.editorType===e&&o.show(t);(((i=l(this,yf))==null?void 0:i.get(ve.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,K,ni).call(this,[[ve.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,gf)!==e){w(this,gf,e);for(const t of l(this,Dt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const r of l(this,wt).values())r.pageIndex===e&&t.push(r);return t}getEditor(e){return l(this,wt).get(e)}addEditor(e){l(this,wt).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(l(this,Es)&&clearTimeout(l(this,Es)),w(this,Es,setTimeout(()=>{this.focusMainContainer(),w(this,Es,null)},0))),l(this,wt).delete(e.id),e.annotationElementId&&((t=l(this,ko))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!l(this,Ya).has(e.annotationElementId))&&((r=l(this,ci))==null||r.remove(e.id))}addDeletedAnnotationElement(e){l(this,Ya).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Ya).has(e)}removeDeletedAnnotationElement(e){l(this,Ya).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,$n)!==e&&(w(this,$n,e),e&&E(this,K,ni).call(this,e.propertiesToUpdate))}updateUI(e){l(this,K,jP)===e&&E(this,K,ni).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){E(this,K,ni).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,_e).has(e)){l(this,_e).delete(e),e.unselect(),E(this,K,an).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,_e).add(e),e.select(),E(this,K,ni).call(this,e.propertiesToUpdate),E(this,K,an).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=l(this,Co))==null||t.commitOrRemove();for(const r of l(this,_e))r!==e&&r.unselect();l(this,_e).clear(),l(this,_e).add(e),e.select(),E(this,K,ni).call(this,e.propertiesToUpdate),E(this,K,an).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,_e).has(e)}get firstSelectedEditor(){return l(this,_e).values().next().value}unselect(e){e.unselect(),l(this,_e).delete(e),E(this,K,an).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,_e).size!==0}get isEnterHandled(){return l(this,_e).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,pr).undo(),E(this,K,an).call(this,{hasSomethingToUndo:l(this,pr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,K,th).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,pr).redo(),E(this,K,an).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,pr).hasSomethingToRedo(),isEmpty:E(this,K,th).call(this)})}addCommands(e){l(this,pr).add(e),E(this,K,an).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,K,th).call(this)})}cleanUndoStack(e){l(this,pr).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,_e)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},s=()=>{for(const o of t)E(this,K,Tw).call(this,o)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=l(this,$n))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,$n)||this.hasSelection}selectAll(){for(const e of l(this,_e))e.commit();E(this,K,Pw).call(this,l(this,wt).values())}unselectAll(){var e;if(!(l(this,$n)&&(l(this,$n).commitOrRemove(),l(this,Ct)!==ae.NONE))&&!((e=l(this,Co))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,_e))t.unselect();l(this,_e).clear(),E(this,K,an).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;l(this,No)[0]+=e,l(this,No)[1]+=t;const[s,i]=l(this,No),o=[...l(this,_e)],a=1e3;l(this,_s)&&clearTimeout(l(this,_s)),w(this,_s,setTimeout(()=>{w(this,_s,null),l(this,No)[0]=l(this,No)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,wt).has(c.id)&&(c.translateInPage(s,i),c.translationDone())},undo:()=>{for(const c of o)l(this,wt).has(c.id)&&(c.translateInPage(-s,-i),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,As,new Map);for(const e of l(this,_e))l(this,As).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,As))return!1;this.disableUserSelect(!1);const e=l(this,As);w(this,As,null);let t=!1;for(const[{x:s,y:i,pageIndex:o},a]of e)a.newX=s,a.newY=i,a.newPageIndex=o,t||(t=s!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(s,i,o,a)=>{if(l(this,wt).has(s.id)){const c=l(this,Dt).get(a);c?s._setParentAndPosition(c,i,o):(s.pageIndex=a,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:a}]of e)r(s,i,o,a)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:a}]of e)r(s,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,As))for(const r of l(this,As).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,_e).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,$n)===e}getActive(){return l(this,$n)}getMode(){return l(this,Ct)}get imageManager(){return me(this,"imageManager",new xw)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-s)/o,y:1-(u+h-r)/i,width:f/o,height:h/i});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-r)/i,y:1-(d+f-s)/o,width:h/i,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-s)/o,y:(u-r)/i,width:f/o,height:h/i});break;default:a=(u,d,h,f)=>({x:(u-r)/i,y:(d-s)/o,width:h/i,height:f/o});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:m,height:g}of h.getClientRects())m===0||g===0||c.push(a(f,p,m,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,hu)||w(this,hu,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,hu))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=l(this,hu))==null?void 0:s.get(e.data.id);if(!t)return;const r=l(this,ci).getRawValue(t);r&&(l(this,Ct)===ae.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=l(this,ko))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),l(this,ko).delete(e))}addMissingCanvas(e,t){(l(this,ko)||w(this,ko,new Map)).set(e,t)}};uu=new WeakMap,$n=new WeakMap,wt=new WeakMap,Dt=new WeakMap,du=new WeakMap,ci=new WeakMap,hu=new WeakMap,pr=new WeakMap,Eo=new WeakMap,Co=new WeakMap,fu=new WeakMap,Ya=new WeakMap,As=new WeakMap,Hr=new WeakMap,Ka=new WeakMap,hf=new WeakMap,ff=new WeakMap,pu=new WeakMap,pf=new WeakMap,Es=new WeakMap,_o=new WeakMap,gu=new WeakMap,To=new WeakMap,Cs=new WeakMap,py=new WeakMap,Po=new WeakMap,gf=new WeakMap,Ro=new WeakMap,Qa=new WeakMap,Ja=new WeakMap,ko=new WeakMap,mf=new WeakMap,Ct=new WeakMap,_e=new WeakMap,ui=new WeakMap,Lo=new WeakMap,Za=new WeakMap,yf=new WeakMap,vf=new WeakMap,No=new WeakMap,_s=new WeakMap,di=new WeakMap,wf=new WeakMap,bf=new WeakMap,gr=new WeakMap,K=new WeakSet,Gg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Aw=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of l(this,Dt).values())if(r.hasTextLayer(e))return r;return null},RP=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=E(this,K,Gg).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(l(this,Cs)||w(this,Cs,new Rj(this)),l(this,Cs).show(r,s,this.direction==="ltr"))},kP=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,ui)&&((i=l(this,Cs))==null||i.hide(),w(this,ui,null),E(this,K,an).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,ui))return;const s=E(this,K,Gg).call(this,e).closest(".textLayer");if(!s){l(this,ui)&&((o=l(this,Cs))==null||o.hide(),w(this,ui,null),E(this,K,an).call(this,{hasSelectedText:!1}));return}if((a=l(this,Cs))==null||a.hide(),w(this,ui,t),E(this,K,an).call(this,{hasSelectedText:!0}),!(l(this,Ct)!==ae.HIGHLIGHT&&l(this,Ct)!==ae.NONE)&&(l(this,Ct)===ae.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,To,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Ct)===ae.HIGHLIGHT?E(this,K,Aw).call(this,s):null;c==null||c.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&E(this,K,qg).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}},qg=function(e=""){l(this,Ct)===ae.HIGHLIGHT?this.highlightSelection(e):l(this,hf)&&E(this,K,RP).call(this)},LP=function(){document.addEventListener("selectionchange",E(this,K,kP).bind(this),{signal:this._signal})},NP=function(){if(l(this,_o))return;w(this,_o,new AbortController);const e=this.combinedSignal(l(this,_o));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},MP=function(){var e;(e=l(this,_o))==null||e.abort(),w(this,_o,null)},Ew=function(){if(l(this,Ro))return;w(this,Ro,new AbortController);const e=this.combinedSignal(l(this,Ro));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},IP=function(){var e;(e=l(this,Ro))==null||e.abort(),w(this,Ro,null)},Cw=function(){if(l(this,Eo))return;w(this,Eo,new AbortController);const e=this.combinedSignal(l(this,Eo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},_w=function(){var e;(e=l(this,Eo))==null||e.abort(),w(this,Eo,null)},DP=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},an=function(e){Object.entries(e).some(([r,s])=>l(this,vf)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,vf),e)}),l(this,Ct)===ae.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,K,ni).call(this,[[ve.HIGHLIGHT_FREE,!0]]))},ni=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},OP=async function(){if(!l(this,Po)){w(this,Po,!0);const e=[];for(const t of l(this,Dt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,wt).values())t.enable()}},FP=function(){if(this.unselectAll(),l(this,Po)){w(this,Po,!1);for(const e of l(this,Dt).values())e.disable();for(const e of l(this,wt).values())e.disable()}},Tw=function(e){const t=l(this,Dt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},jP=function(){let e=null;for(e of l(this,_e));return e},th=function(){if(l(this,wt).size===0)return!0;if(l(this,wt).size===1)for(const e of l(this,wt).values())return e.isEmpty();return!1},Pw=function(e){for(const t of l(this,_e))t.unselect();l(this,_e).clear();for(const t of e)t.isEmpty()||(l(this,_e).add(t),t.select());E(this,K,an).call(this,{hasSelectedEditor:this.hasSelection})},G($c,"TRANSLATE_SMALL",1),G($c,"TRANSLATE_BIG",10);let ba=$c;var _t,Ts,Ur,mu,Ps,Bn,yu,Rs,_n,hi,el,ks,Mo,ns,nh,Xg;const ln=class ln{constructor(e){S(this,ns);S(this,_t,null);S(this,Ts,!1);S(this,Ur,null);S(this,mu,null);S(this,Ps,null);S(this,Bn,null);S(this,yu,!1);S(this,Rs,null);S(this,_n,null);S(this,hi,null);S(this,el,null);S(this,ks,!1);w(this,_n,e),w(this,ks,e._uiManager.useNewAltTextFlow),l(ln,Mo)||w(ln,Mo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ln._l10n??(ln._l10n=e)}async render(){const e=w(this,Ur,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=w(this,mu,document.createElement("span"));e.append(t),l(this,ks)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(ln,Mo).missing),t.setAttribute("data-l10n-id",l(ln,Mo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=l(this,_n)._uiManager._signal;e.addEventListener("contextmenu",Rr,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),l(this,_n)._uiManager.editAltText(l(this,_n)),l(this,ks)&&l(this,_n)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,ns,nh)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(w(this,yu,!0),s(i))},{signal:r}),await E(this,ns,Xg).call(this),e}finish(){l(this,Ur)&&(l(this,Ur).focus({focusVisible:l(this,yu)}),w(this,yu,!1))}isEmpty(){return l(this,ks)?l(this,_t)===null:!l(this,_t)&&!l(this,Ts)}hasData(){return l(this,ks)?l(this,_t)!==null||!!l(this,hi):this.isEmpty()}get guessedText(){return l(this,hi)}async setGuessedText(e){l(this,_t)===null&&(w(this,hi,e),w(this,el,await ln._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,ns,Xg).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,ks)||l(this,_t)){(t=l(this,Rs))==null||t.remove(),w(this,Rs,null);return}if(!l(this,Rs)){const r=w(this,Rs,document.createElement("div"));r.className="noAltTextBadge",l(this,_n).div.append(r)}l(this,Rs).classList.toggle("hidden",!e)}serialize(e){let t=l(this,_t);return!e&&l(this,hi)===t&&(t=l(this,el)),{altText:t,decorative:l(this,Ts),guessedText:l(this,hi),textWithDisclaimer:l(this,el)}}get data(){return{altText:l(this,_t),decorative:l(this,Ts)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(w(this,hi,r),w(this,el,s)),!(l(this,_t)===e&&l(this,Ts)===t)&&(i||(w(this,_t,e),w(this,Ts,t)),E(this,ns,Xg).call(this))}toggle(e=!1){l(this,Ur)&&(!e&&l(this,Bn)&&(clearTimeout(l(this,Bn)),w(this,Bn,null)),l(this,Ur).disabled=!e)}shown(){l(this,_n)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,ns,nh)}})}destroy(){var e,t;(e=l(this,Ur))==null||e.remove(),w(this,Ur,null),w(this,mu,null),w(this,Ps,null),(t=l(this,Rs))==null||t.remove(),w(this,Rs,null)}};_t=new WeakMap,Ts=new WeakMap,Ur=new WeakMap,mu=new WeakMap,Ps=new WeakMap,Bn=new WeakMap,yu=new WeakMap,Rs=new WeakMap,_n=new WeakMap,hi=new WeakMap,el=new WeakMap,ks=new WeakMap,Mo=new WeakMap,ns=new WeakSet,nh=function(){return l(this,_t)&&"added"||l(this,_t)===null&&this.guessedText&&"review"||"missing"},Xg=async function(){var s,i,o;const e=l(this,Ur);if(!e)return;if(l(this,ks)){if(e.classList.toggle("done",!!l(this,_t)),e.setAttribute("data-l10n-id",l(ln,Mo)[l(this,ns,nh)]),(s=l(this,mu))==null||s.setAttribute("data-l10n-id",l(ln,Mo)[`${l(this,ns,nh)}-label`]),!l(this,_t)){(i=l(this,Ps))==null||i.remove();return}}else{if(!l(this,_t)&&!l(this,Ts)){e.classList.remove("done"),(o=l(this,Ps))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Ps);if(!t){w(this,Ps,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,_n).id}`;const a=100,c=l(this,_n)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,Bn)),w(this,Bn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{w(this,Bn,setTimeout(()=>{w(this,Bn,null),l(this,Ps).classList.add("show"),l(this,_n)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,Bn)&&(clearTimeout(l(this,Bn)),w(this,Bn,null)),(u=l(this,Ps))==null||u.classList.remove("show")},{signal:c})}l(this,Ts)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,_t)),t.parentNode||e.append(t);const r=l(this,_n).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},S(ln,Mo,null),G(ln,"_l10n",null);let ty=ln;var vu,tl,xf,Sf,Af,Ef,Cf,fi,nl,pi,rl,gi,Sa,$P,BP,zP;const y1=class y1{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){S(this,Sa);S(this,vu);S(this,tl,!1);S(this,xf,null);S(this,Sf);S(this,Af);S(this,Ef);S(this,Cf);S(this,fi,null);S(this,nl);S(this,pi,null);S(this,rl);S(this,gi,null);w(this,vu,e),w(this,xf,r),w(this,Sf,t),w(this,Af,s),w(this,Ef,i),w(this,Cf,o),w(this,rl,new AbortController),w(this,nl,AbortSignal.any([a,l(this,rl).signal])),e.addEventListener("touchstart",E(this,Sa,$P).bind(this),{passive:!1,signal:l(this,nl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ls.pixelRatio}destroy(){var e,t;(e=l(this,rl))==null||e.abort(),w(this,rl,null),(t=l(this,fi))==null||t.abort(),w(this,fi,null)}};vu=new WeakMap,tl=new WeakMap,xf=new WeakMap,Sf=new WeakMap,Af=new WeakMap,Ef=new WeakMap,Cf=new WeakMap,fi=new WeakMap,nl=new WeakMap,pi=new WeakMap,rl=new WeakMap,gi=new WeakMap,Sa=new WeakSet,$P=function(e){var s,i,o;if((s=l(this,Sf))!=null&&s.call(this))return;if(e.touches.length===1){if(l(this,fi))return;const a=w(this,fi,new AbortController),c=AbortSignal.any([l(this,nl),a.signal]),u=l(this,vu),d={capture:!0,signal:c,passive:!1},h=f=>{var p;f.pointerType==="touch"&&((p=l(this,fi))==null||p.abort(),w(this,fi,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ut(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!l(this,gi)){w(this,gi,new AbortController);const a=AbortSignal.any([l(this,nl),l(this,gi).signal]),c=l(this,vu),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",E(this,Sa,BP).bind(this),u);const d=E(this,Sa,zP).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",ut,u),c.addEventListener("pointermove",ut,u),c.addEventListener("pointercancel",ut,u),c.addEventListener("pointerup",ut,u),(i=l(this,Af))==null||i.call(this)}if(ut(e),e.touches.length!==2||(o=l(this,xf))!=null&&o.call(this)){w(this,pi,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),w(this,pi,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},BP=function(e){var A;if(!l(this,pi)||e.touches.length!==2)return;ut(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:o,screenY:a}=r,c=l(this,pi),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,p=h-u,m=f-d,g=o-s,b=a-i,y=Math.hypot(g,b)||1,v=Math.hypot(p,m)||1;if(!l(this,tl)&&Math.abs(v-y)<=y1.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=i,c.touch1X=o,c.touch1Y=a,!l(this,tl)){w(this,tl,!0);return}const x=[(s+o)/2,(i+a)/2];(A=l(this,Ef))==null||A.call(this,x,v,y)},zP=function(e){var t;e.touches.length>=2||(l(this,gi)&&(l(this,gi).abort(),w(this,gi,null),(t=l(this,Cf))==null||t.call(this)),l(this,pi)&&(ut(e),w(this,pi,null),w(this,tl,!1)))};let Jh=y1;var sl,Vr,We,wu,Io,_f,il,Ot,ol,mi,Do,Tf,al,zn,Pf,ll,yi,Ls,bu,xu,mr,cl,Rf,gy,ie,Rw,kf,kw,Yg,HP,UP,Lw,Kg,Nw,VP,WP,GP,Mw,qP,Iw,XP,YP,KP,Dw,rh;const fe=class fe{constructor(e){S(this,ie);S(this,sl,null);S(this,Vr,null);S(this,We,null);S(this,wu,!1);S(this,Io,null);S(this,_f,"");S(this,il,!1);S(this,Ot,null);S(this,ol,null);S(this,mi,null);S(this,Do,null);S(this,Tf,"");S(this,al,!1);S(this,zn,null);S(this,Pf,!1);S(this,ll,!1);S(this,yi,!1);S(this,Ls,null);S(this,bu,0);S(this,xu,0);S(this,mr,null);S(this,cl,null);G(this,"isSelected",!1);G(this,"_isCopy",!1);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);S(this,Rf,!1);S(this,gy,fe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=fe.prototype._resizeWithKeyboard,t=ba.TRANSLATE_SMALL,r=ba.TRANSLATE_BIG;return me(this,"_resizerKeyboardManager",new Gp([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],fe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Nj({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(fe._l10n??(fe._l10n=e),fe._l10nResizer||(fe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),fe._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);fe._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Le("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Rf)}set _isDraggable(e){var t;w(this,Rf,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,gy)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):E(this,ie,rh).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,al)?w(this,al,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,o]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){E(this,ie,Rw).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,zn)||w(this,zn,[this.x,this.y,this.width,this.height]),E(this,ie,Rw).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,zn)||w(this,zn,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:d}=r;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,zn)&&(l(this,zn)[0]!==this.x||l(this,zn)[1]!==this.y)}get _hasBeenResized(){return!!l(this,zn)&&(l(this,zn)[2]!==this.width||l(this,zn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=fe,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:o,width:a,height:c}=this;if(a*=r,c*=s,i*=r,o*=s,this._mustFixPosition)switch(e){case 0:i=tn(i,0,r-a),o=tn(o,0,s-c);break;case 90:i=tn(i,0,r-c),o=tn(o,a,s);break;case 180:i=tn(i,a,r),o=tn(o,c,s);break;case 270:i=tn(i,c,r),o=tn(o,0,s-a);break}this.x=i/=r,this.y=o/=s;const[u,d]=this.getBaseTranslation();i+=u,o+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return E(r=fe,kf,kw).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return E(r=fe,kf,kw).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(e,t){const[r,s]=this.parentDimensions,{style:i}=this.div;i.width=`${(100*e/r).toFixed(2)}%`,l(this,il)||(i.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:r}=e,s=r.endsWith("%"),i=!l(this,il)&&t.endsWith("%");if(s&&i)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!l(this,il)&&!i&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,We))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,ll))return this._editToolbar;this._editToolbar=new bw(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=l(this,We))==null||e.destroy())}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,We)||(ty.initialize(fe._l10n),w(this,We,new ty(this)),l(this,sl)&&(l(this,We).data=l(this,sl),w(this,sl,null))),l(this,We)}get altTextData(){var e;return(e=l(this,We))==null?void 0:e.data}set altTextData(e){l(this,We)&&(l(this,We).data=e)}get guessedAltText(){var e;return(e=l(this,We))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,We))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,We))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,We)&&!l(this,We).isEmpty()}hasAltTextData(){var e;return((e=l(this,We))==null?void 0:e.hasData())??!1}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,wu)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),E(this,ie,Iw).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),TP(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,cl)||w(this,cl,new Jh({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,ie,VP).bind(this),onPinching:E(this,ie,WP).bind(this),onPinchEnd:E(this,ie,GP).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=It.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(w(this,al,!0),this._isDraggable){E(this,ie,qP).call(this,e);return}E(this,ie,Mw).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Ls)&&clearTimeout(l(this,Ls)),w(this,Ls,setTimeout(()=>{var e;w(this,Ls,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/s,d=t/s,h=this.x*i,f=this.y*o,p=this.width*i,m=this.height*o;switch(r){case 0:return[h+u+a,o-f-d-m+c,h+u+p+a,o-f-d+c];case 90:return[h+d+a,o-f+u+c,h+d+m+a,o-f+u+p+c];case 180:return[h-u-p+a,o-f+d+c,h-u+a,o-f+d+m+c];case 270:return[h-d-m+a,o-f-u-p+c,h-d+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,o]=e,a=i-r,c=o-s;switch(this.rotation){case 0:return[r,t-o,a,c];case 90:return[r,t-s,c,a];case 180:return[i,t-s,a,c];case 270:return[i,t-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),w(this,ll,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),w(this,ll,!1),!0):!1}isInEditMode(){return l(this,ll)}shouldGetKeyboardEvents(){return l(this,yi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&s>0&&e<i&&r>0}rebuild(){E(this,ie,Iw).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Le("An editor must be serializable")}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId});s.rotation=e.rotation,w(s,sl,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,o]=s.pageDimensions,[a,c,u,d]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/i,s.y=c/o,s.width=u/i,s.height=d/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,Do))==null||e.abort(),w(this,Do,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Ls)&&(clearTimeout(l(this,Ls)),w(this,Ls,null)),E(this,ie,rh).call(this),this.removeEditToolbar(),l(this,mr)){for(const r of l(this,mr).values())clearTimeout(r);w(this,mr,null)}this.parent=null,(t=l(this,cl))==null||t.destroy(),w(this,cl,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,ie,HP).call(this),l(this,Ot).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),w(this,mi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Ot).children;if(!l(this,Vr)){w(this,Vr,Array.from(t));const o=E(this,ie,XP).bind(this),a=E(this,ie,YP).bind(this),c=this._uiManager._signal;for(const u of l(this,Vr)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",E(this,ie,KP).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",fe._l10nResizer[d])}}const r=l(this,Vr)[0];let s=0;for(const o of t){if(o===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,Vr).length/4);if(i!==s){if(i<s)for(let a=0;a<s-i;a++)l(this,Ot).append(l(this,Ot).firstChild);else if(i>s)for(let a=0;a<i-s;a++)l(this,Ot).firstChild.before(l(this,Ot).lastChild);let o=0;for(const a of t){const u=l(this,Vr)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",fe._l10nResizer[u])}}E(this,ie,Dw).call(this,0),w(this,yi,!0),l(this,Ot).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,yi)&&E(this,ie,Nw).call(this,l(this,Tf),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,ie,rh).call(this),this.div.focus()}select(){var e,t,r;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=l(this,We))==null||r.toggleAltTextBadge(!1)}}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=l(this,Ot))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=l(this,We))==null||i.toggleAltTextBadge(!0))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,Pf)}set isEditing(e){w(this,Pf,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){w(this,il,!0);const r=e/t,{style:s}=this.div;s.aspectRatio=r,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,mr)||w(this,mr,new Map);const{action:r}=e;let s=l(this,mr).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),l(this,mr).delete(r),l(this,mr).size===0&&w(this,mr,null)},fe._telemetryTimeout),l(this,mr).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),w(this,wu,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,wu,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};sl=new WeakMap,Vr=new WeakMap,We=new WeakMap,wu=new WeakMap,Io=new WeakMap,_f=new WeakMap,il=new WeakMap,Ot=new WeakMap,ol=new WeakMap,mi=new WeakMap,Do=new WeakMap,Tf=new WeakMap,al=new WeakMap,zn=new WeakMap,Pf=new WeakMap,ll=new WeakMap,yi=new WeakMap,Ls=new WeakMap,bu=new WeakMap,xu=new WeakMap,mr=new WeakMap,cl=new WeakMap,Rf=new WeakMap,gy=new WeakMap,ie=new WeakSet,Rw=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},kf=new WeakSet,kw=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Yg=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},HP=function(){if(l(this,Ot))return;w(this,Ot,document.createElement("div")),l(this,Ot).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");l(this,Ot).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",E(this,ie,UP).bind(this,r),{signal:t}),s.addEventListener("contextmenu",Rr,{signal:t}),s.tabIndex=-1}this.div.prepend(l(this,Ot))},UP=function(e,t){var d;t.preventDefault();const{isMac:r}=It.platform;if(t.button!==0||t.ctrlKey&&r)return;(d=l(this,We))==null||d.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,w(this,ol,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,ie,Nw).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ut,{passive:!1,signal:o}),window.addEventListener("contextmenu",Rr,{signal:o}),w(this,mi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=l(this,We))==null||h.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=c,E(this,ie,Kg).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Lw=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t;const[i,o]=this.parentDimensions;this.setDims(i*r,o*s),this.fixAndSetPosition(),this._onResized()},Kg=function(){if(!l(this,mi))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=l(this,mi);w(this,mi,null);const i=this.x,o=this.y,a=this.width,c=this.height;i===e&&o===t&&a===r&&c===s||this.addCommands({cmd:E(this,ie,Lw).bind(this,i,o,a,c),undo:E(this,ie,Lw).bind(this,e,t,r,s),mustExec:!0})},Nw=function(e,t){const[r,s]=this.parentDimensions,i=this.x,o=this.y,a=this.width,c=this.height,u=fe.MIN_SIZE/r,d=fe.MIN_SIZE/s,h=E(this,ie,Yg).call(this,this.rotation),f=(B,O)=>[h[0]*B+h[2]*O,h[1]*B+h[3]*O],p=E(this,ie,Yg).call(this,360-this.rotation),m=(B,O)=>[p[0]*B+p[2]*O,p[1]*B+p[3]*O];let g,b,y=!1,v=!1;switch(e){case"topLeft":y=!0,g=(B,O)=>[0,0],b=(B,O)=>[B,O];break;case"topMiddle":g=(B,O)=>[B/2,0],b=(B,O)=>[B/2,O];break;case"topRight":y=!0,g=(B,O)=>[B,0],b=(B,O)=>[0,O];break;case"middleRight":v=!0,g=(B,O)=>[B,O/2],b=(B,O)=>[0,O/2];break;case"bottomRight":y=!0,g=(B,O)=>[B,O],b=(B,O)=>[0,0];break;case"bottomMiddle":g=(B,O)=>[B/2,O],b=(B,O)=>[B/2,0];break;case"bottomLeft":y=!0,g=(B,O)=>[0,O],b=(B,O)=>[B,0];break;case"middleLeft":v=!0,g=(B,O)=>[0,O/2],b=(B,O)=>[B,O/2];break}const x=g(a,c),A=b(a,c);let C=f(...A);const T=fe._round(i+C[0]),P=fe._round(o+C[1]);let k=1,N=1,M,F;if(t.fromKeyboard)({deltaX:M,deltaY:F}=t);else{const{screenX:B,screenY:O}=t,[D,L]=l(this,ol);[M,F]=this.screenToPageTranslation(B-D,O-L),l(this,ol)[0]=B,l(this,ol)[1]=O}if([M,F]=m(M/r,F/s),y){const B=Math.hypot(a,c);k=N=Math.max(Math.min(Math.hypot(A[0]-x[0]-M,A[1]-x[1]-F)/B,1/a,1/c),u/a,d/c)}else v?k=tn(Math.abs(A[0]-x[0]-M),u,1)/a:N=tn(Math.abs(A[1]-x[1]-F),d,1)/c;const z=fe._round(a*k),V=fe._round(c*N);C=f(...b(z,V));const $=T-C[0],Y=P-C[1];l(this,zn)||w(this,zn,[this.x,this.y,this.width,this.height]),this.width=z,this.height=V,this.x=$,this.y=Y,this.setDims(r*z,s*V),this.fixAndSetPosition(),this._onResizing()},VP=function(){var e;w(this,mi,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,We))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},WP=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const o=E(this,ie,Yg).call(this,this.rotation),a=(T,P)=>[o[0]*T+o[2]*P,o[1]*T+o[3]*P],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,m=fe.MIN_SIZE/c,g=fe.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/p),m/f,g/p);const b=fe._round(f*i),y=fe._round(p*i);if(b===f&&y===p)return;l(this,zn)||w(this,zn,[d,h,f,p]);const v=a(f/2,p/2),x=fe._round(d+v[0]),A=fe._round(h+v[1]),C=a(b/2,y/2);this.x=x-C[0],this.y=A-C[1],this.width=b,this.height=y,this.setDims(c*b,u*y),this.fixAndSetPosition(),this._onResizing()},GP=function(){var e;(e=l(this,We))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),E(this,ie,Kg).call(this)},Mw=function(e){const{isMac:t}=It.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},qP=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:i},a=u=>{s.abort(),w(this,Io,null),w(this,al,!1),this._uiManager.endDragSession()||E(this,ie,Mw).call(this,u),r&&this._onStopDragging()};t&&(w(this,bu,e.clientX),w(this,xu,e.clientY),w(this,Io,e.pointerId),w(this,_f,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==l(this,Io)){ut(u);return}const[p,m]=this.screenToPageTranslation(d-l(this,bu),h-l(this,xu));w(this,bu,d),w(this,xu,h),this._uiManager.dragSelectedEditors(p,m)},o),window.addEventListener("touchmove",ut,o),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,_f)&&(l(this,cl)||u.isPrimary)&&a(u),ut(u)},o));const c=u=>{if(!l(this,Io)||l(this,Io)===u.pointerId){a(u);return}ut(u)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},Iw=function(){if(l(this,Do)||!this.div)return;w(this,Do,new AbortController);const e=this._uiManager.combinedSignal(l(this,Do));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},XP=function(e){fe._resizerKeyboardManager.exec(this,e)},YP=function(e){var t;l(this,yi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Ot)&&E(this,ie,rh).call(this)},KP=function(e){w(this,Tf,l(this,yi)?e:"")},Dw=function(e){if(l(this,Vr))for(const t of l(this,Vr))t.tabIndex=e},rh=function(){w(this,yi,!1),E(this,ie,Dw).call(this,-1),E(this,ie,Kg).call(this)},S(fe,kf),G(fe,"_l10n",null),G(fe,"_l10nResizer",null),G(fe,"_borderLineWidth",-1),G(fe,"_colorManager",new Sw),G(fe,"_zIndex",1),G(fe,"_telemetryTimeout",1e3);let je=fe;class Nj extends je{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const AA=3285377520,dr=4294901760,ms=65535;class QP{constructor(e){this.h1=e?e&4294967295:AA,this.h2=e?e&4294967295:AA}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,b=e.length;g<b;g++){const y=e.charCodeAt(g);y<=255?t[r++]=y:(t[r++]=y>>>8,t[r++]=y&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&ms,m=f&ms;for(let g=0;g<s;g++)g&1?(a=o[g],a=a*h&dr|a*p&ms,a=a<<15|a>>>17,a=a*f&dr|a*m&ms,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[g],c=c*h&dr|c*p&ms,c=c<<15|c>>>17,c=c*f&dr|c*m&ms,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,i){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*h&dr|a*p&ms,a=a<<15|a>>>17,a=a*f&dr|a*m&ms,s&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&dr|e*36045&ms,t=t*4283543511&dr|((t<<16|e>>>16)*2950163797&dr)>>>16,e^=t>>>1,e=e*444984403&dr|e*60499&ms,t=t*3301882366&dr|((t<<16|e>>>16)*3120437893&dr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ow=Object.freeze({map:null,hash:"",transfer:void 0});var ul,dl,Ft,my,JP;class Zx{constructor(){S(this,my);S(this,ul,!1);S(this,dl,null);S(this,Ft,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=l(this,Ft).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return l(this,Ft).get(e)}remove(e){if(l(this,Ft).delete(e),l(this,Ft).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of l(this,Ft).values())if(t instanceof je)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=l(this,Ft).get(e);let s=!1;if(r!==void 0)for(const[i,o]of Object.entries(t))r[i]!==o&&(s=!0,r[i]=o);else s=!0,l(this,Ft).set(e,t);s&&E(this,my,JP).call(this),t instanceof je&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return l(this,Ft).has(e)}get size(){return l(this,Ft).size}resetModified(){l(this,ul)&&(w(this,ul,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ZP(this)}get serializable(){if(l(this,Ft).size===0)return Ow;const e=new Map,t=new QP,r=[],s=Object.create(null);let i=!1;for(const[o,a]of l(this,Ft)){const c=a instanceof je?a.serialize(!1,s):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:Ow}get editorStats(){let e=null;const t=new Map;for(const r of l(this,Ft).values()){if(!(r instanceof je))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=e[i]||(e[i]=new Map);for(const[a,c]of Object.entries(s)){if(a==="type")continue;let u=o.get(a);u||(u=new Map,o.set(a,u));const d=u.get(c)??0;u.set(c,d+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){w(this,dl,null)}get modifiedIds(){if(l(this,dl))return l(this,dl);const e=[];for(const t of l(this,Ft).values())!(t instanceof je)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return w(this,dl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,Ft).entries()}}ul=new WeakMap,dl=new WeakMap,Ft=new WeakMap,my=new WeakSet,JP=function(){l(this,ul)||(w(this,ul,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Lf;class ZP extends Zx{constructor(t){super();S(this,Lf);const{map:r,hash:s,transfer:i}=t.serializable,o=structuredClone(r,i?{transfer:i}:null);w(this,Lf,{map:o,hash:s,transfer:i})}get print(){Le("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Lf)}get modifiedIds(){return me(this,"modifiedIds",{ids:new Set,hash:""})}}Lf=new WeakMap;var Su;class Mj{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,Su,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Su).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||l(this,Su).has(e.loadedName))){if(mt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:o}=e,a=new FontFace(s,i,o);this.addNativeFontFace(a);try{await a.load(),l(this,Su).add(s),r==null||r(e)}catch{le(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Le("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw le(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return me(this,"isSyncFontLoadingSupported",fn||It.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(mt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(A,C){return A.charCodeAt(C)<<24|A.charCodeAt(C+1)<<16|A.charCodeAt(C+2)<<8|A.charCodeAt(C+3)&255}function s(A,C,T,P){const k=A.substring(0,C),N=A.substring(C+T);return k+P+N}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function d(A,C){if(++u>30){le("Load test font never loaded."),C();return}if(c.font="30px "+A,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(d.bind(null,A,C))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,h.length,h);const m=16,g=1482184792;let b=r(f,m);for(i=0,o=h.length-3;i<o;i+=4)b=b-g+r(h,i)|0;i<h.length&&(b=b-g+r(h+"XXX",i)|0),f=s(f,m,4,xj(b));const y=`url(data:font/opentype;base64,${btoa(f)});`,v=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(v);const x=this._document.createElement("div");x.style.visibility="hidden",x.style.width=x.style.height="10px",x.style.position="absolute",x.style.top=x.style.left="0px";for(const A of[e.loadedName,h]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=A,x.append(C)}this._document.body.append(x),d(h,()=>{x.remove(),t.complete()})}}Su=new WeakMap;class Ij{constructor(e,t=null){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this._inspectFont=t}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${yP(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(o){le(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}}function Dj(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(fn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Oj(n){if(fn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Up(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function xg(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Fw=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,Fj=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",eR=Cj.bind(null,Fw,Fj);var vi,yy;class jj{constructor(){S(this,vi,new Map);S(this,yy,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};l(this,yy).then(()=>{for(const[s]of l(this,vi))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){le("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}l(this,vi).set(t,s)}removeEventListener(e,t){const r=l(this,vi).get(t);r==null||r(),l(this,vi).delete(t)}terminate(){for(const[,e]of l(this,vi))e==null||e();l(this,vi).clear()}}vi=new WeakMap,yy=new WeakMap;const Sg={DATA:1,ERROR:2},pt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function EA(){}function En(n){if(n instanceof Qi||n instanceof Zm||n instanceof bA||n instanceof Qh||n instanceof t0)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Le('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Qi(n.message);case"InvalidPDFException":return new Zm(n.message);case"PasswordException":return new bA(n.message,n.code);case"ResponseException":return new Qh(n.message,n.status,n.missing);case"UnknownErrorException":return new t0(n.message,n.details)}return new t0(n.message,n.toString())}var Au,_r,tR,nR,rR,Qg;class sh{constructor(e,t,r){S(this,_r);S(this,Au,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",E(this,_r,tR).bind(this),{signal:l(this,Au).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},s),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:o,targetName:a,stream:pt.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{mt(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:pt.CANCEL,streamId:i,reason:En(u)}),d.promise}},r)}destroy(){var e;(e=l(this,Au))==null||e.abort(),w(this,Au,null)}}Au=new WeakMap,_r=new WeakSet,tR=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,_r,rR).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Sg.DATA)s.resolve(e.data);else if(e.callback===Sg.ERROR)s.reject(En(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:r,targetName:s,callback:Sg.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:r,targetName:s,callback:Sg.ERROR,callbackId:e.callbackId,reason:En(o)})});return}if(e.streamId){E(this,_r,nR).call(this,e);return}t(e.data)},nR=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:pt.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:pt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){mt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:pt.ERROR,streamId:t,reason:En(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(a,e.data,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:pt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:pt.START_COMPLETE,streamId:t,reason:En(u)})})},rR=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case pt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(En(e.reason));break;case pt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(En(e.reason));break;case pt.PULL:if(!a){i.postMessage({sourceName:r,targetName:s,stream:pt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||EA).then(function(){i.postMessage({sourceName:r,targetName:s,stream:pt.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:pt.PULL_COMPLETE,streamId:t,reason:En(u)})});break;case pt.ENQUEUE:if(mt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case pt.CLOSE:if(mt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),E(this,_r,Qg).call(this,o,t);break;case pt.ERROR:mt(o,"error should have stream controller"),o.controller.error(En(e.reason)),E(this,_r,Qg).call(this,o,t);break;case pt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(En(e.reason)),E(this,_r,Qg).call(this,o,t);break;case pt.CANCEL:if(!a)break;const c=En(e.reason);Promise.try(a.onCancel||EA,c).then(function(){i.postMessage({sourceName:r,targetName:s,stream:pt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:r,targetName:s,stream:pt.CANCEL_COMPLETE,streamId:t,reason:En(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Qg=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var Nf;class sR{constructor({enableHWA:e=!1}){S(this,Nf,!1);w(this,Nf,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!l(this,Nf)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Le("Abstract method `_createCanvas` called.")}}Nf=new WeakMap;class $j extends sR{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class iR{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Le("Abstract method `_fetch` called.")}}class CA extends iR{async _fetch(e){const t=await Md(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Up(t)}}class oR{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var hl,Eu,wi,bi,Zt,fl,pl,J,Kt,ih,bc,Jg,xc,aR,jw,Sc,oh,ah,$w,lh;class Bj extends oR{constructor({docId:t,ownerDocument:r=globalThis.document}){super();S(this,J);S(this,hl);S(this,Eu);S(this,wi);S(this,bi);S(this,Zt);S(this,fl);S(this,pl,0);w(this,bi,t),w(this,Zt,r)}addFilter(t){if(!t)return"none";let r=l(this,J,Kt).get(t);if(r)return r;const[s,i,o]=E(this,J,Jg).call(this,t),a=t.length===1?s:`${s}${i}${o}`;if(r=l(this,J,Kt).get(a),r)return l(this,J,Kt).set(t,r),r;const c=`g_${l(this,bi)}_transfer_map_${Et(this,pl)._++}`,u=E(this,J,xc).call(this,c);l(this,J,Kt).set(t,u),l(this,J,Kt).set(a,u);const d=E(this,J,Sc).call(this,c);return E(this,J,ah).call(this,s,i,o,d),u}addHCMFilter(t,r){var m;const s=`${t}-${r}`,i="base";let o=l(this,J,ih).get(i);if((o==null?void 0:o.key)===s||(o?((m=o.filter)==null||m.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,J,ih).set(i,o)),!t||!r))return o.url;const a=E(this,J,lh).call(this,t);t=re.makeHexColor(...a);const c=E(this,J,lh).call(this,r);if(r=re.makeHexColor(...c),l(this,J,bc).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const b=g/255;u[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const d=u.join(","),h=`g_${l(this,bi)}_hcm_filter`,f=o.filter=E(this,J,Sc).call(this,h);E(this,J,ah).call(this,d,d,d,f),E(this,J,jw).call(this,f);const p=(g,b)=>{const y=a[g]/255,v=c[g]/255,x=new Array(b+1);for(let A=0;A<=b;A++)x[A]=y+A/b*(v-y);return x.join(",")};return E(this,J,ah).call(this,p(0,5),p(1,5),p(2,5),f),o.url=E(this,J,xc).call(this,h),o.url}addAlphaFilter(t){let r=l(this,J,Kt).get(t);if(r)return r;const[s]=E(this,J,Jg).call(this,[t]),i=`alpha_${s}`;if(r=l(this,J,Kt).get(i),r)return l(this,J,Kt).set(t,r),r;const o=`g_${l(this,bi)}_alpha_map_${Et(this,pl)._++}`,a=E(this,J,xc).call(this,o);l(this,J,Kt).set(t,a),l(this,J,Kt).set(i,a);const c=E(this,J,Sc).call(this,o);return E(this,J,$w).call(this,s,c),a}addLuminosityFilter(t){let r=l(this,J,Kt).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=E(this,J,Jg).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=l(this,J,Kt).get(i),r)return l(this,J,Kt).set(t,r),r;const o=`g_${l(this,bi)}_luminosity_map_${Et(this,pl)._++}`,a=E(this,J,xc).call(this,o);l(this,J,Kt).set(t,a),l(this,J,Kt).set(i,a);const c=E(this,J,Sc).call(this,o);return E(this,J,aR).call(this,c),t&&E(this,J,$w).call(this,s,c),a}addHighlightHCMFilter(t,r,s,i,o){var v;const a=`${r}-${s}-${i}-${o}`;let c=l(this,J,ih).get(t);if((c==null?void 0:c.key)===a||(c?((v=c.filter)==null||v.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,J,ih).set(t,c)),!r||!s))return c.url;const[u,d]=[r,s].map(E(this,J,lh).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,m]=[i,o].map(E(this,J,lh).bind(this));f<h&&([h,f,p,m]=[f,h,m,p]),l(this,J,bc).style.color="";const g=(x,A,C)=>{const T=new Array(256),P=(f-h)/C,k=x/255,N=(A-x)/(255*C);let M=0;for(let F=0;F<=C;F++){const z=Math.round(h+F*P),V=k+F*N;for(let $=M;$<=z;$++)T[$]=V;M=z+1}for(let F=M;F<256;F++)T[F]=T[M-1];return T.join(",")},b=`g_${l(this,bi)}_hcm_${t}_filter`,y=c.filter=E(this,J,Sc).call(this,b);return E(this,J,jw).call(this,y),E(this,J,ah).call(this,g(p[0],m[0],5),g(p[1],m[1],5),g(p[2],m[2],5),y),c.url=E(this,J,xc).call(this,b),c.url}destroy(t=!1){var r,s,i,o;t&&((r=l(this,fl))!=null&&r.size)||((s=l(this,wi))==null||s.parentNode.parentNode.remove(),w(this,wi,null),(i=l(this,Eu))==null||i.clear(),w(this,Eu,null),(o=l(this,fl))==null||o.clear(),w(this,fl,null),w(this,pl,0))}}hl=new WeakMap,Eu=new WeakMap,wi=new WeakMap,bi=new WeakMap,Zt=new WeakMap,fl=new WeakMap,pl=new WeakMap,J=new WeakSet,Kt=function(){return l(this,Eu)||w(this,Eu,new Map)},ih=function(){return l(this,fl)||w(this,fl,new Map)},bc=function(){if(!l(this,wi)){const t=l(this,Zt).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=l(this,Zt).createElementNS(ti,"svg");s.setAttribute("width",0),s.setAttribute("height",0),w(this,wi,l(this,Zt).createElementNS(ti,"defs")),t.append(s),s.append(l(this,wi)),l(this,Zt).body.append(t)}return l(this,wi)},Jg=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[r,s,i]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=r[u]/255,a[u]=s[u]/255,c[u]=i[u]/255;return[o.join(","),a.join(","),c.join(",")]},xc=function(t){if(l(this,hl)===void 0){w(this,hl,"");const r=l(this,Zt).URL;r!==l(this,Zt).baseURI&&(Wp(r)?le('#createUrl: ignore "data:"-URL for performance reasons.'):w(this,hl,Yx(r,"")))}return`url(${l(this,hl)}#${t})`},aR=function(t){const r=l(this,Zt).createElementNS(ti,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},jw=function(t){const r=l(this,Zt).createElementNS(ti,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Sc=function(t){const r=l(this,Zt).createElementNS(ti,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),l(this,J,bc).append(r),r},oh=function(t,r,s){const i=l(this,Zt).createElementNS(ti,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},ah=function(t,r,s,i){const o=l(this,Zt).createElementNS(ti,"feComponentTransfer");i.append(o),E(this,J,oh).call(this,o,"feFuncR",t),E(this,J,oh).call(this,o,"feFuncG",r),E(this,J,oh).call(this,o,"feFuncB",s)},$w=function(t,r){const s=l(this,Zt).createElementNS(ti,"feComponentTransfer");r.append(s),E(this,J,oh).call(this,s,"feFuncA",t)},lh=function(t){return l(this,J,bc).style.color=t,Jx(getComputedStyle(l(this,J,bc)).getPropertyValue("color"))};class lR{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Le("Abstract method `_fetch` called.")}}class _A extends lR{async _fetch(e){const t=await Md(e,"arraybuffer");return new Uint8Array(t)}}class cR{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Le("Abstract method `_fetch` called.")}}class TA extends cR{async _fetch(e){const t=await Md(e,"arraybuffer");return new Uint8Array(t)}}fn&&le("Please use the `legacy` build in Node.js environments.");async function e1(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class zj extends oR{}class Hj extends sR{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class Uj extends iR{async _fetch(e){return e1(e)}}class Vj extends lR{async _fetch(e){return e1(e)}}class Wj extends cR{async _fetch(e){return e1(e)}}const zt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Bw(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class t1{isModifyingCurrentTransform(){return!1}getPattern(){Le("Abstract method `getPattern` called.")}}class Gj extends t1{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===zt.STROKE||s===zt.FILL){const o=t.current.getClippedPathBoundingBox(s,Je(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),r=re.transform(r,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),Bw(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(r);i.setTransform(h)}else Bw(e,this._bbox),i=this._createGradient(e);return i}}function s0(n,e,t,r,s,i,o,a){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=i,i=o,o=f),c[r+1]>c[s+1]&&(f=r,r=s,s=f,f=o,o=a,a=f),c[t+1]>c[r+1]&&(f=t,t=r,r=f,f=i,i=o,o=f);const p=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,g=(c[r]+e.offsetX)*e.scaleX,b=(c[r+1]+e.offsetY)*e.scaleY,y=(c[s]+e.offsetX)*e.scaleX,v=(c[s+1]+e.offsetY)*e.scaleY;if(m>=v)return;const x=u[i],A=u[i+1],C=u[i+2],T=u[o],P=u[o+1],k=u[o+2],N=u[a],M=u[a+1],F=u[a+2],z=Math.round(m),V=Math.round(v);let $,Y,B,O,D,L,I,j;for(let H=z;H<=V;H++){if(H<b){const Q=H<m?0:(m-H)/(m-b);$=p-(p-g)*Q,Y=x-(x-T)*Q,B=A-(A-P)*Q,O=C-(C-k)*Q}else{let Q;H>v?Q=1:b===v?Q=0:Q=(b-H)/(b-v),$=g-(g-y)*Q,Y=T-(T-N)*Q,B=P-(P-M)*Q,O=k-(k-F)*Q}let U;H<m?U=0:H>v?U=1:U=(m-H)/(m-v),D=p-(p-y)*U,L=x-(x-N)*U,I=A-(A-M)*U,j=C-(C-F)*U;const q=Math.round(Math.min($,D)),se=Math.round(Math.max($,D));let oe=h*H+q*4;for(let Q=q;Q<=se;Q++)U=($-Q)/($-D),U<0?U=0:U>1&&(U=1),d[oe++]=Y-(Y-L)*U|0,d[oe++]=B-(B-I)*U|0,d[oe++]=O-(O-j)*U|0,d[oe++]=255}}function qj(n,e,t){const r=e.coords,s=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(r.length/a)-1,u=a-1;for(i=0;i<c;i++){let d=i*a;for(let h=0;h<u;h++,d++)s0(n,t,r[d],r[d+1],r[d+a],s[d],s[d+1],s[d+a]),s0(n,t,r[d+a+1],r[d+1],r[d+a],s[d+a+1],s[d+1],s[d+a])}break;case"triangles":for(i=0,o=r.length;i<o;i+=3)s0(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class Xj extends t1{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=u/h,m=d/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/p,scaleY:1/m},b=h+2*2,y=f+2*2,v=r.getCanvas("mesh",b,y),x=v.context,A=x.createImageData(h,f);if(t){const T=A.data;for(let P=0,k=T.length;P<k;P+=4)T[P]=t[0],T[P+1]=t[1],T[P+2]=t[2],T[P+3]=255}for(const T of this._figures)qj(A,T,g);return x.putImageData(A,2,2),{canvas:v.canvas,offsetX:a-2*p,offsetY:c-2*m,scaleX:p,scaleY:m}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){Bw(e,this._bbox);const i=new Float32Array(2);if(s===zt.SHADING)re.singularValueDecompose2dScale(Je(e),i);else if(this.matrix){re.singularValueDecompose2dScale(this.matrix,i);const[a,c]=i;re.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=c}else re.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,s===zt.SHADING?null:this._background,t.cachedCanvases);return s!==zt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class Yj extends t1{getPattern(){return"hotpink"}}function Kj(n){switch(n[0]){case"RadialAxial":return new Gj(n);case"Mesh":return new Xj(n);case"Dummy":return new Yj}throw new Error(`Unknown IR type: ${n[0]}`)}const PA={COLORED:1,UNCOLORED:2},vy=class vy{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:r,paintType:s,tilingType:i,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),iv("TilingType: "+i);const d=t[0],h=t[1],f=t[2],p=t[3],m=f-d,g=p-h,b=new Float32Array(2);re.singularValueDecompose2dScale(this.matrix,b);const[y,v]=b;re.singularValueDecompose2dScale(this.baseTransform,b);const x=y*b[0],A=v*b[1];let C=m,T=g,P=!1,k=!1;const N=Math.ceil(c*x),M=Math.ceil(u*A),F=Math.ceil(m*x),z=Math.ceil(g*A);N>=F?C=c:P=!0,M>=z?T=u:k=!0;const V=this.getSizeAndScale(C,this.ctx.canvas.width,x),$=this.getSizeAndScale(T,this.ctx.canvas.height,A),Y=e.cachedCanvases.getCanvas("pattern",V.size,$.size),B=Y.context,O=a.createCanvasGraphics(B);if(O.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(O,s,o),B.translate(-V.scale*d,-$.scale*h),O.transform(V.scale,0,0,$.scale,0,0),B.save(),this.clipBbox(O,d,h,f,p),O.baseTransform=Je(O.ctx),O.executeOperatorList(r),O.endDrawing(),B.restore(),P||k){const D=Y.canvas;P&&(C=c),k&&(T=u);const L=this.getSizeAndScale(C,this.ctx.canvas.width,x),I=this.getSizeAndScale(T,this.ctx.canvas.height,A),j=L.size,H=I.size,U=e.cachedCanvases.getCanvas("pattern-workaround",j,H),q=U.context,se=P?Math.floor(m/c):0,oe=k?Math.floor(g/u):0;for(let Q=0;Q<=se;Q++)for(let Se=0;Se<=oe;Se++)q.drawImage(D,j*Q,H*Se,j,H,0,0,j,H);return{canvas:U.canvas,scaleX:L.scale,scaleY:I.scale,offsetX:d,offsetY:h}}return{canvas:Y.canvas,scaleX:V.scale,scaleY:$.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,t,r){const s=Math.max(vy.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const o=s-t,a=i-r;e.ctx.rect(t,r,o,a),re.axialAlignedBoundingBox([t,r,s,i],Je(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case PA.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;s.fillStyle=i.fillColor=o,s.strokeStyle=i.strokeColor=a;break;case PA.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new bj(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s){let i=r;s!==zt.SHADING&&(i=re.transform(i,t.baseTransform),this.matrix&&(i=re.transform(i,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(i);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};G(vy,"MAX_PATTERN_SIZE",3e3);let zw=vy;function Qj({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=It.isLittleEndian?4278190080:255,[c,u]=o?[i,a]:[a,i],d=r>>3,h=r&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<s;m++){for(const b=e+d;e<b;e++){const y=e<f?n[e]:255;t[p++]=y&128?u:c,t[p++]=y&64?u:c,t[p++]=y&32?u:c,t[p++]=y&16?u:c,t[p++]=y&8?u:c,t[p++]=y&4?u:c,t[p++]=y&2?u:c,t[p++]=y&1?u:c}if(h===0)continue;const g=e<f?n[e++]:255;for(let b=0;b<h;b++)t[p++]=g&1<<7-b?u:c}return{srcPos:e,destPos:p}}const RA=16,kA=100,Jj=15,LA=10,kn=16,i0=new DOMMatrix,tr=new Float32Array(2),jc=new Float32Array([1/0,1/0,-1/0,-1/0]);function Zj(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,o,a){e.transform(t,r,s,i,o,a),this.__originalTransform(t,r,s,i,o,a)},n.setTransform=function(t,r,s,i,o,a){e.setTransform(t,r,s,i,o,a),this.__originalSetTransform(t,r,s,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,o,a){e.bezierCurveTo(t,r,s,i,o,a),this.__originalBezierCurveTo(t,r,s,i,o,a)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class e3{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ag(n,e,t,r,s,i,o,a,c,u){const[d,h,f,p,m,g]=Je(n);if(h===0&&f===0){const v=o*d+m,x=Math.round(v),A=a*p+g,C=Math.round(A),T=(o+c)*d+m,P=Math.abs(Math.round(T)-x)||1,k=(a+u)*p+g,N=Math.abs(Math.round(k)-C)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),x,C),n.drawImage(e,t,r,s,i,0,0,P,N),n.setTransform(d,h,f,p,m,g),[P,N]}if(d===0&&p===0){const v=a*f+m,x=Math.round(v),A=o*h+g,C=Math.round(A),T=(a+u)*f+m,P=Math.abs(Math.round(T)-x)||1,k=(o+c)*h+g,N=Math.abs(Math.round(k)-C)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,x,C),n.drawImage(e,t,r,s,i,0,0,N,P),n.setTransform(d,h,f,p,m,g),[N,P]}n.drawImage(e,t,r,s,i,o,a,c,u);const b=Math.hypot(d,h),y=Math.hypot(f,p);return[b*c,y*u]}class NA{constructor(e,t){G(this,"alphaIsShape",!1);G(this,"fontSize",0);G(this,"fontSizeScale",1);G(this,"textMatrix",null);G(this,"textMatrixScale",1);G(this,"fontMatrix",vw);G(this,"leading",0);G(this,"x",0);G(this,"y",0);G(this,"lineX",0);G(this,"lineY",0);G(this,"charSpacing",0);G(this,"wordSpacing",0);G(this,"textHScale",1);G(this,"textRenderingMode",Yt.FILL);G(this,"textRise",0);G(this,"fillColor","#000000");G(this,"strokeColor","#000000");G(this,"patternFill",!1);G(this,"patternStroke",!1);G(this,"fillAlpha",1);G(this,"strokeAlpha",1);G(this,"lineWidth",1);G(this,"activeSMask",null);G(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,e,t]),this.minMax=jc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=zt.FILL,t=null){const r=this.minMax.slice();if(e===zt.STROKE){t||Le("Stroke bounding box must include transform."),re.singularValueDecompose2dScale(t,tr);const s=tr[0]*this.lineWidth/2,i=tr[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=re.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(jc,0)}getClippedPathBoundingBox(e=zt.FILL,t=null){return re.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function MA(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%kn,i=(t-s)/kn,o=s===0?i:i+1,a=n.createImageData(r,kn);let c=0,u;const d=e.data,h=a.data;let f,p,m,g;if(e.kind===Ph.GRAYSCALE_1BPP){const b=d.byteLength,y=new Uint32Array(h.buffer,0,h.byteLength>>2),v=y.length,x=r+7>>3,A=4294967295,C=It.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(m=f<i?kn:s,u=0,p=0;p<m;p++){const T=b-c;let P=0;const k=T>x?r:T*8-7,N=k&-8;let M=0,F=0;for(;P<N;P+=8)F=d[c++],y[u++]=F&128?A:C,y[u++]=F&64?A:C,y[u++]=F&32?A:C,y[u++]=F&16?A:C,y[u++]=F&8?A:C,y[u++]=F&4?A:C,y[u++]=F&2?A:C,y[u++]=F&1?A:C;for(;P<k;P++)M===0&&(F=d[c++],M=128),y[u++]=F&M?A:C,M>>=1}for(;u<v;)y[u++]=0;n.putImageData(a,0,f*kn)}}else if(e.kind===Ph.RGBA_32BPP){for(p=0,g=r*kn*4,f=0;f<i;f++)h.set(d.subarray(c,c+g)),c+=g,n.putImageData(a,0,p),p+=kn;f<o&&(g=r*s*4,h.set(d.subarray(c,c+g)),n.putImageData(a,0,p))}else if(e.kind===Ph.RGB_24BPP)for(m=kn,g=r*m,f=0;f<o;f++){for(f>=i&&(m=s,g=r*m),u=0,p=g;p--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(a,0,f*kn)}else throw new Error(`bad image kind: ${e.kind}`)}function IA(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%kn,i=(t-s)/kn,o=s===0?i:i+1,a=n.createImageData(r,kn);let c=0;const u=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<i?kn:s;({srcPos:c}=Qj({src:u,srcPos:c,dest:d,width:r,height:f,nonBlackColor:0})),n.putImageData(a,0,h*kn)}}function Wd(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Eg(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function DA(n,e){if(e)return!0;re.singularValueDecompose2dScale(n,tr);const t=Math.fround(ls.pixelRatio*Ji.PDF_TO_CSS_UNITS);return tr[0]<=t&&tr[1]<=t}const t3=["butt","round","square"],n3=["miter","round","bevel"],r3={},OA={};var cs,Hw,Uw,Vw;const v1=class v1{constructor(e,t,r,s,i,{optionalContentConfig:o,markedContentStack:a=null},c,u){S(this,cs);this.ctx=e,this.current=new NA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new e3(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,r){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Je(this.compositeCtx))}this.ctx.save(),Eg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Je(this.ctx)}executeOperatorList(e,t,r,s){const i=e.argsArray,o=e.fnArray;let a=t||0;const c=i.length;if(c===a)return a;const u=c-a>LA&&typeof r=="function",d=u?Date.now()+Jj:0;let h=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,r),a;if(m=o[a],m!==Kh.dependency)this[m].apply(this,i[a]);else for(const g of i[a]){const b=g.startsWith("g_")?f:p;if(!b.has(g))return b.get(g,r),a}if(a++,a===c)return a;if(u&&++h>LA){if(Date.now()>d)return r(),a;h=0}}}endDrawing(){E(this,cs,Hw).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,cs,Uw).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,c=s,u="prescale1",d,h;for(;i>2&&a>1||o>2&&c>1;){let f=a,p=c;i>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/f),o>2&&c>1&&(p=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,a,c,0,0,f,p),e=d.canvas,a=f,c=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:s}=e,i=this.current.fillColor,o=this.current.patternFill,a=Je(t);let c,u,d,h;if((e.bitmap||e.data)&&e.count>1){const N=e.bitmap||e.data.buffer;u=JSON.stringify(o?a:[a.slice(0,4),i]),c=this._cachedBitmapsMap.get(N),c||(c=new Map,this._cachedBitmapsMap.set(N,c));const M=c.get(u);if(M&&!o){const F=Math.round(Math.min(a[0],a[2])+a[4]),z=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:M,offsetX:F,offsetY:z}}d=M}d||(h=this.cachedCanvases.getCanvas("maskCanvas",r,s),IA(h.context,e));let f=re.transform(a,[1/r,0,0,-1/s,0,0]);f=re.transform(f,[1,0,0,1,0,-s]);const p=jc.slice();re.axialAlignedBoundingBox([0,0,r,s],f,p);const[m,g,b,y]=p,v=Math.round(b-m)||1,x=Math.round(y-g)||1,A=this.cachedCanvases.getCanvas("fillCanvas",v,x),C=A.context,T=m,P=g;C.translate(-T,-P),C.transform(...f),d||(d=this._scaleImage(h.canvas,gs(C)),d=d.img,c&&o&&c.set(u,d)),C.imageSmoothingEnabled=DA(Je(C),e.interpolate),Ag(C,d,0,0,d.width,d.height,0,0,r,s),C.globalCompositeOperation="source-in";const k=re.transform(gs(C),[1,0,0,1,-T,-P]);return C.fillStyle=o?i.getPattern(t,this,k,zt.FILL):i,C.fillRect(0,0,r,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,A.canvas)),{canvas:A.canvas,offsetX:Math.round(T),offsetY:Math.round(P)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=t3[e]}setLineJoin(e){this.ctx.lineJoin=n3[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=r;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,e,t);this.suspendedCtx=this.ctx;const i=this.ctx=s.context;i.setTransform(this.suspendedCtx.getTransform()),Wd(this.suspendedCtx,i),Zj(i,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Wd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],o=s[1],a=s[2]-i,c=s[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,r,a,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,o,a,c,u,d,h){let f=e.canvas,p=c-d,m=u-h;if(o)if(p<0||m<0||p+r>f.width||m+s>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",r,s),y=b.context;y.drawImage(f,-p,-m),y.globalCompositeOperation="destination-atop",y.fillStyle=o,y.fillRect(0,0,r,s),y.globalCompositeOperation="source-over",f=b.canvas,p=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(p,m,r,s),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,m,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(c,u,r,s),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,r,s,c,u,r,s),t.restore()}save(){this.inSMaskMode&&Wd(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Wd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,o){this.ctx.transform(e,t,r,s,i,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){let[s]=t;if(!r){s||(s=t[0]=new Path2D),this[e](s);return}if(!(s instanceof Path2D)){const i=t[0]=new Path2D;for(let o=0,a=s.length;o<a;)switch(s[o++]){case bg.moveTo:i.moveTo(s[o++],s[o++]);break;case bg.lineTo:i.lineTo(s[o++],s[o++]);break;case bg.curveTo:i.bezierCurveTo(s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case bg.closePath:i.closePath();break;default:le(`Unrecognized drawing path operator: ${s[o-1]}`);break}s=i}re.axialAlignedBoundingBox(r,Je(this.ctx),this.current.minMax),this[e](s)}closePath(){this.ctx.closePath()}stroke(e,t=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const i=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,gs(r),zt.STROKE),i){const o=new Path2D;o.addPath(e,r.getTransform().invertSelf().multiplySelf(i)),e=o}this.rescaleAndStroke(e,!1),r.restore()}else this.rescaleAndStroke(e,!0);t&&this.consumePath(e,this.current.getClippedPathBoundingBox(zt.STROKE,Je(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e){this.stroke(e)}fill(e,t=!0){const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;let o=!1;if(i){const c=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.fillStyle=s.getPattern(r,this,gs(r),zt.FILL),c){const u=new Path2D;u.addPath(e,r.getTransform().invertSelf().multiplySelf(c)),e=u}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(r.fill(e,"evenodd"),this.pendingEOFill=!1):r.fill(e)),o&&r.restore(),t&&this.consumePath(e,a)}eoFill(e){this.pendingEOFill=!0,this.fill(e)}fillStroke(e){this.fill(e,!1),this.stroke(e,!1),this.consumePath(e)}eoFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}closeFillStroke(e){this.fillStroke(e)}closeEOFillStroke(e){this.pendingEOFill=!0,this.fillStroke(e)}endPath(e){this.consumePath(e)}rawFillPath(e){this.ctx.fill(e)}clip(){this.pendingClip=r3}eoClip(){this.pendingClip=OA}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0)return;const r=new Path2D,s=t.getTransform().invertSelf();for(const{transform:i,x:o,y:a,fontSize:c,path:u}of e)r.addPath(u,new DOMMatrix(i).preMultiplySelf(s).translate(o,a).scale(c,-c));t.clip(r),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const r=this.commonObjs.get(e),s=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=r.fontMatrix||vw,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&le("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const i=r.loadedName||"sans-serif",o=((d=r.systemFontInfo)==null?void 0:d.css)||`"${i}", ${r.fallbackName}`;let a="normal";r.black?a="900":r.bold&&(a="bold");const c=r.italic?"italic":"normal";let u=t;t<RA?u=RA:t>kA&&(u=kA),this.current.fontSizeScale=t/u,this.ctx.font=`${c} ${a} ${u}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e){const{current:t}=this;t.textMatrix=e,t.textMatrixScale=Math.hypot(e[0],e[1]),t.x=t.lineX=0,t.y=t.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,s,i){const o=this.ctx,a=this.current,c=a.font,u=a.textRenderingMode,d=a.fontSize/a.fontSizeScale,h=u&Yt.FILL_STROKE_MASK,f=!!(u&Yt.ADD_TO_PATH_FLAG),p=a.patternFill&&!c.missingFile,m=a.patternStroke&&!c.missingFile;let g;if((c.disableFontFace||f||p||m)&&(g=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||p||m){o.save(),o.translate(t,r),o.scale(d,-d);let b;if((h===Yt.FILL||h===Yt.FILL_STROKE)&&(s?(b=o.getTransform(),o.setTransform(...s),o.fill(E(this,cs,Vw).call(this,g,b,s))):o.fill(g)),h===Yt.STROKE||h===Yt.FILL_STROKE)if(i){b||(b=o.getTransform()),o.setTransform(...i);const{a:y,b:v,c:x,d:A}=b,C=re.inverseTransform(i),T=re.transform([y,v,x,A,0,0],C);re.singularValueDecompose2dScale(T,tr),o.lineWidth*=Math.max(tr[0],tr[1])/d,o.stroke(E(this,cs,Vw).call(this,g,b,i))}else o.lineWidth/=d,o.stroke(g);o.restore()}else(h===Yt.FILL||h===Yt.FILL_STROKE)&&o.fillText(e,t,r),(h===Yt.STROKE||h===Yt.FILL_STROKE)&&o.strokeText(e,t,r);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Je(o),x:t,y:r,fontSize:d,path:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return me(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,o=t.fontSizeScale,a=t.charSpacing,c=t.wordSpacing,u=t.fontDirection,d=t.textHScale*u,h=e.length,f=r.vertical,p=f?1:-1,m=r.defaultVMetrics,g=s*t.fontMatrix[0],b=t.textRenderingMode===Yt.FILL&&!r.disableFontFace&&!t.patternFill;i.save(),t.textMatrix&&i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),u>0?i.scale(d,-1):i.scale(d,1);let y,v;if(t.patternFill){i.save();const P=t.fillColor.getPattern(i,this,gs(i),zt.FILL);y=Je(i),i.restore(),i.fillStyle=P}if(t.patternStroke){i.save();const P=t.strokeColor.getPattern(i,this,gs(i),zt.STROKE);v=Je(i),i.restore(),i.strokeStyle=P}let x=t.lineWidth;const A=t.textMatrixScale;if(A===0||x===0){const P=t.textRenderingMode&Yt.FILL_STROKE_MASK;(P===Yt.STROKE||P===Yt.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=A;if(o!==1&&(i.scale(o,o),x/=o),i.lineWidth=x,r.isInvalidPDFjsFont){const P=[];let k=0;for(const N of e)P.push(N.unicode),k+=N.width;i.fillText(P.join(""),0,0),t.x+=k*g*d,i.restore(),this.compose();return}let C=0,T;for(T=0;T<h;++T){const P=e[T];if(typeof P=="number"){C+=p*P*s/1e3;continue}let k=!1;const N=(P.isSpace?c:0)+a,M=P.fontChar,F=P.accent;let z,V,$=P.width;if(f){const B=P.vmetric||m,O=-(P.vmetric?B[1]:$*.5)*g,D=B[2]*g;$=B?-B[0]:$,z=O/o,V=(C+D)/o}else z=C/o,V=0;if(r.remeasure&&$>0){const B=i.measureText(M).width*1e3/s*o;if($<B&&this.isFontSubpixelAAEnabled){const O=$/B;k=!0,i.save(),i.scale(O,1),z/=O}else $!==B&&(z+=($-B)/2e3*s/o)}if(this.contentVisible&&(P.isInFont||r.missingFile)){if(b&&!F)i.fillText(M,z,V);else if(this.paintChar(M,z,V,y,v),F){const B=z+s*F.offset.x/o,O=V-s*F.offset.y/o;this.paintChar(F.fontChar,B,O,y,v)}}const Y=f?$*g-N*u:$*g+N*u;C+=Y,k&&i.restore()}f?t.y-=C:t.x+=C*d,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,s=r.font,i=r.fontSize,o=r.fontDirection,a=s.vertical?1:-1,c=r.charSpacing,u=r.wordSpacing,d=r.textHScale*o,h=r.fontMatrix||vw,f=e.length,p=r.textRenderingMode===Yt.INVISIBLE;let m,g,b,y;if(!(p||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),r.textMatrix&&t.transform(...r.textMatrix),t.translate(r.x,r.y+r.textRise),t.scale(d,o),m=0;m<f;++m){if(g=e[m],typeof g=="number"){y=a*g*i/1e3,this.ctx.translate(y,0),r.x+=y*d;continue}const v=(g.isSpace?u:0)+c,x=s.charProcOperatorList[g.operatorListId];x?this.contentVisible&&(this.save(),t.scale(i,i),t.transform(...h),this.executeOperatorList(x),this.restore()):le(`Type3 character "${g.operatorListId}" is not available.`);const A=[g.width,0];re.applyTransform(A,h),b=A[0]*i+v,t.translate(b,0),r.x+=b*d}t.restore()}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,s,i,o){const a=new Path2D;a.rect(r,s,i-r,o-s),this.ctx.clip(a),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const r=this.baseTransform||Je(this.ctx),s={createCanvasGraphics:i=>new v1(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new zw(e,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e){this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e){this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=Kj(this.getObject(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,gs(t),zt.SHADING);const s=gs(t);if(s){const{width:i,height:o}=t.canvas,a=jc.slice();re.axialAlignedBoundingBox([0,0,i,o],s,a);const[c,u,d,h]=a;this.ctx.fillRect(c,u,d-c,h-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Le("Should not call beginInlineImage")}beginImageData(){Le("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Je(this.ctx),t)){re.axialAlignedBoundingBox(t,this.baseTransform,this.current.minMax);const[r,s,i,o]=t,a=new Path2D;a.rect(r,s,i-r,o-s),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||iv("TODO: Support non-isolated groups."),e.knockout&&le("Knockout groups not supported.");const r=Je(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=jc.slice();re.axialAlignedBoundingBox(e.bbox,Je(t),s);const i=[0,0,t.canvas.width,t.canvas.height];s=re.intersect(s,i)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),u=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,c,u),f=h.context;f.translate(-o,-a),f.transform(...r);let p=new Path2D;const[m,g,b,y]=e.bbox;if(p.rect(m,g,b-m,y-g),e.matrix){const v=new Path2D;v.addPath(p,new DOMMatrix(e.matrix)),p=v}f.clip(p),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),Wd(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Je(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=jc.slice();re.axialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s,i),this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,r,s,i){if(E(this,cs,Hw).call(this),Eg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(i&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a,re.singularValueDecompose2dScale(Je(this.ctx),tr);const{viewportScale:c}=this,u=Math.ceil(o*this.outputScaleX*c),d=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:h,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(tr[0],0,0,-tr[1],0,a*tr[1]),Eg(this.ctx)}else{Eg(this.ctx),this.endPath();const c=new Path2D;c.rect(t[0],t[1],o,a),this.ctx.clip(c)}}this.current=new NA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...r),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),E(this,cs,Uw).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,s=this._createMaskCanvas(e),i=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(i,s.offsetX,s.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,s=0,i,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const c=Je(a);a.transform(t,r,s,i,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]);for(let d=0,h=o.length;d<h;d+=2){const f=re.transform(c,[t,r,s,i,o[d],o[d+1]]);a.drawImage(u.canvas,f[4],f[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:o,width:a,height:c,transform:u}=i,d=this.cachedCanvases.getCanvas("maskCanvas",a,c),h=d.context;h.save();const f=this.getObject(o,i);IA(h,f),h.globalCompositeOperation="source-in",h.fillStyle=s?r.getPattern(h,this,gs(t),zt.FILL):r,h.fillRect(0,0,a,c),h.restore(),t.save(),t.transform(...u),t.scale(1,-1),Ag(t,d.canvas,0,0,a,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){le("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,r,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){le("Dependent image isn't ready yet");return}const o=i.width,a=i.height,c=[];for(let u=0,d=s.length;u<d;u+=2)c.push({transform:[t,0,0,r,s[u],s[u+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,s=this.ctx;this.save();const{filter:i}=s;i!=="none"&&i!==""&&(s.filter="none"),s.scale(1/t,-1/r);let o;if(e.bitmap)o=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)o=e;else{const u=this.cachedCanvases.getCanvas("inlineImage",t,r).context;MA(u,e),o=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(o,gs(s));s.imageSmoothingEnabled=DA(Je(s),e.interpolate),Ag(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-r,t,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,o=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,o).context;MA(c,e),s=this.applyTransferMapsToCanvas(c)}for(const i of t)r.save(),r.transform(...i.transform),r.scale(1,-1),Ag(r,s,i.x,i.y,i.w,i.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e,t){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const s=this.ctx;this.pendingClip&&(r||(this.pendingClip===OA?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Je(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let o,a;if(r===0&&s===0){const c=Math.abs(t),u=Math.abs(i);if(c===u)if(e===0)o=a=1/c;else{const d=c*e;o=a=d<1?1/d:1}else if(e===0)o=1/c,a=1/u;else{const d=c*e,h=u*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const c=Math.abs(t*i-r*s),u=Math.hypot(t,r),d=Math.hypot(s,i);if(e===0)o=d/c,a=u/c;else{const h=e*c;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,o]=this.getScaleForStroking();if(i===o){r.lineWidth=(s||1)*i,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(i,o),i0.a=1/i,i0.d=1/o;const c=new Path2D;if(c.addPath(e,i0),a.length>0){const u=Math.max(i,o);r.setLineDash(a.map(d=>d/u)),r.lineDashOffset/=u}r.lineWidth=s||1,r.stroke(c),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};cs=new WeakSet,Hw=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Uw=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Vw=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Kc=v1;for(const n in Kh)Kc.prototype[n]!==void 0&&(Kc.prototype[Kh[n]]=Kc.prototype[n]);var Mf,If;class Sr{static get workerPort(){return l(this,Mf)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");w(this,Mf,e)}static get workerSrc(){return l(this,If)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");w(this,If,e)}}Mf=new WeakMap,If=new WeakMap,S(Sr,Mf,null),S(Sr,If,"");var Cu,Df;class s3{constructor({parsedData:e,rawData:t}){S(this,Cu);S(this,Df);w(this,Cu,e),w(this,Df,t)}getRaw(){return l(this,Df)}get(e){return l(this,Cu).get(e)??null}[Symbol.iterator](){return l(this,Cu).entries()}}Cu=new WeakMap,Df=new WeakMap;const Ac=Symbol("INTERNAL");var Of,Ff,jf,_u;class i3{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){S(this,Of,!1);S(this,Ff,!1);S(this,jf,!1);S(this,_u,!0);w(this,Of,!!(e&Zn.DISPLAY)),w(this,Ff,!!(e&Zn.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(l(this,jf))return l(this,_u);if(!l(this,_u))return!1;const{print:e,view:t}=this.usage;return l(this,Of)?(t==null?void 0:t.viewState)!=="OFF":l(this,Ff)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==Ac&&Le("Internal method `_setVisible` called."),w(this,jf,r),w(this,_u,t)}}Of=new WeakMap,Ff=new WeakMap,jf=new WeakMap,_u=new WeakMap;var Oo,Re,Tu,Pu,$f,Ww;class o3{constructor(e,t=Zn.DISPLAY){S(this,$f);S(this,Oo,null);S(this,Re,new Map);S(this,Tu,null);S(this,Pu,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,w(this,Pu,e.order);for(const r of e.groups)l(this,Re).set(r.id,new i3(t,r));if(e.baseState==="OFF")for(const r of l(this,Re).values())r._setVisible(Ac,!1);for(const r of e.on)l(this,Re).get(r)._setVisible(Ac,!0);for(const r of e.off)l(this,Re).get(r)._setVisible(Ac,!1);w(this,Tu,this.getHash())}}isVisible(e){if(l(this,Re).size===0)return!0;if(!e)return iv("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Re).has(e.id)?l(this,Re).get(e.id).visible:(le(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,$f,Ww).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Re).has(t))return le(`Optional content group not found: ${t}`),!0;if(l(this,Re).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Re).has(t))return le(`Optional content group not found: ${t}`),!0;if(!l(this,Re).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Re).has(t))return le(`Optional content group not found: ${t}`),!0;if(!l(this,Re).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Re).has(t))return le(`Optional content group not found: ${t}`),!0;if(l(this,Re).get(t).visible)return!1}return!0}return le(`Unknown optional content policy ${e.policy}.`),!0}return le(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=l(this,Re).get(e);if(!s){le(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const a of o)a!==e&&((i=l(this,Re).get(a))==null||i._setVisible(Ac,!1,!0));s._setVisible(Ac,!!t,!0),w(this,Oo,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=l(this,Re).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}w(this,Oo,null)}get hasInitialVisibility(){return l(this,Tu)===null||this.getHash()===l(this,Tu)}getOrder(){return l(this,Re).size?l(this,Pu)?l(this,Pu).slice():[...l(this,Re).keys()]:null}getGroup(e){return l(this,Re).get(e)||null}getHash(){if(l(this,Oo)!==null)return l(this,Oo);const e=new QP;for(const[t,r]of l(this,Re))e.update(`${t}:${r.visible}`);return w(this,Oo,e.hexdigest())}[Symbol.iterator](){return l(this,Re).entries()}}Oo=new WeakMap,Re=new WeakMap,Tu=new WeakMap,Pu=new WeakMap,$f=new WeakSet,Ww=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let o;if(Array.isArray(i))o=E(this,$f,Ww).call(this,i);else if(l(this,Re).has(i))o=l(this,Re).get(i).visible;else return le(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class a3{constructor(e,{disableRange:t=!1,disableStream:r=!1}){mt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});mt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){mt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new l3(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new c3(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class l3{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=av(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class c3{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function u3(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=c(d),d=u(d),i(d)}if(t=o(n),t){const d=u(t);return i(d)}if(t=r("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),i(d)}function r(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function s(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=Up(h);h=f.decode(p),e=!1}catch{}}return h}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,g,b,y]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[b,y]}const m=[];for(let g=0;g<h.length&&g in h;++g){let[b,y]=h[g];y=a(y),b&&(y=unescape(y),g===0&&(y=c(y))),m.push(y)}return m.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),m=d.slice(h+1).replace(/^[^']*'/,"");return s(f,m)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function uR(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function cv(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function dR({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function hR(n){const e=n.get("Content-Disposition");if(e){let t=u3(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(av(t))return t}return null}function qp(n,e){return new Qh(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function fR(n){return n===200||n===206}function pR(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function gR(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(le(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class d3{constructor(e){G(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=uR(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return mt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new f3(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class h3{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,pR(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=cv(i.url),!fR(i.status))throw qp(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:c}=dR({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=hR(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Qi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class f3{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const o=s.url;fetch(o,pR(i,this._withCredentials,this._abortController)).then(a=>{const c=cv(a.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!fR(a.status))throw qp(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:gR(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const o0=200,a0=206;function p3(n){const e=n.response;return typeof e!="string"?e:Up(e).buffer}class g3{constructor({url:e,httpHeaders:t,withCredentials:r}){G(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=uR(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=a0):s.expectedStatus=o0,t.responseType="arraybuffer",mt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||o0;if(!(i===o0&&r.expectedStatus===a0)&&i!==r.expectedStatus){r.onError(s.status);return}const a=p3(s);if(i===a0){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?r.onDone({begin:parseInt(u[1],10),chunk:a}):(le('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class m3{constructor(e){this._source=e,this._manager=new g3(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return mt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new y3(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new v3(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class y3{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=cv(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=dR({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=hR(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=qp(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class v3{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=cv((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=qp(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const w3=/^[a-z][a-z0-9\-+.]+:/i;function b3(n){if(w3.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class x3{constructor(e){this.source=e,this.url=b3(e.url),mt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return mt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new S3(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new A3(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class S3{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=qp(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Qi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class A3{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Gd=Symbol("INITIAL_DATA");var Hn,Bf,Gw;class mR{constructor(){S(this,Bf);S(this,Hn,Object.create(null))}get(e,t=null){if(t){const s=E(this,Bf,Gw).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=l(this,Hn)[e];if(!r||r.data===Gd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=l(this,Hn)[e];return!!t&&t.data!==Gd}delete(e){const t=l(this,Hn)[e];return!t||t.data===Gd?!1:(delete l(this,Hn)[e],!0)}resolve(e,t=null){const r=E(this,Bf,Gw).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in l(this,Hn)){const{data:r}=l(this,Hn)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}w(this,Hn,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,Hn)){const{data:t}=l(this,Hn)[e];t!==Gd&&(yield[e,t])}}}Hn=new WeakMap,Bf=new WeakSet,Gw=function(e){var t;return(t=l(this,Hn))[e]||(t[e]={...Promise.withResolvers(),data:Gd})};const E3=1e5,FA=30;var uE,Fo,Tn,zf,Hf,gl,xi,Uf,Vf,ml,Ru,ku,jo,Lu,Wf,Nu,yl,Gf,qf,st,Mu,vl,Xf,$o,Iu,Zi,yR,vR,qw,ar,Zg,Xw,wR,bR;let Zh=(st=class{constructor({textContentSource:e,container:t,viewport:r}){S(this,Zi);S(this,Fo,Promise.withResolvers());S(this,Tn,null);S(this,zf,!1);S(this,Hf,!!((uE=globalThis.FontInspector)!=null&&uE.enabled));S(this,gl,null);S(this,xi,null);S(this,Uf,0);S(this,Vf,0);S(this,ml,null);S(this,Ru,null);S(this,ku,0);S(this,jo,0);S(this,Lu,Object.create(null));S(this,Wf,[]);S(this,Nu,null);S(this,yl,[]);S(this,Gf,new WeakMap);S(this,qf,null);var c;if(e instanceof ReadableStream)w(this,Nu,e);else if(typeof e=="object")w(this,Nu,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,Tn,w(this,Ru,t)),w(this,jo,r.scale*ls.pixelRatio),w(this,ku,r.rotation),w(this,xi,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:a}=r.rawDims;w(this,qf,[1,0,0,-1,-o,a+i]),w(this,Vf,s),w(this,Uf,i),E(c=st,ar,wR).call(c),wa(t,r),l(this,Fo).promise.finally(()=>{l(st,Iu).delete(this),w(this,xi,null),w(this,Lu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=It.platform;return me(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,ml).read().then(({value:t,done:r})=>{if(r){l(this,Fo).resolve();return}l(this,gl)??w(this,gl,t.lang),Object.assign(l(this,Lu),t.styles),E(this,Zi,yR).call(this,t.items),e()},l(this,Fo).reject)};return w(this,ml,l(this,Nu).getReader()),l(st,Iu).add(this),e(),l(this,Fo).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*ls.pixelRatio,s=e.rotation;if(s!==l(this,ku)&&(t==null||t(),w(this,ku,s),wa(l(this,Ru),{rotation:s})),r!==l(this,jo)){t==null||t(),w(this,jo,r);const o={div:null,properties:null,ctx:E(i=st,ar,Zg).call(i,l(this,gl))};for(const a of l(this,yl))o.properties=l(this,Gf).get(a),o.div=a,E(this,Zi,qw).call(this,o)}}cancel(){var t;const e=new Qi("TextLayer task cancelled.");(t=l(this,ml))==null||t.cancel(e).catch(()=>{}),w(this,ml,null),l(this,Fo).reject(e)}get textDivs(){return l(this,yl)}get textContentItemsStr(){return l(this,Wf)}static cleanup(){if(!(l(this,Iu).size>0)){l(this,Mu).clear();for(const{canvas:e}of l(this,vl).values())e.remove();l(this,vl).clear()}}},Fo=new WeakMap,Tn=new WeakMap,zf=new WeakMap,Hf=new WeakMap,gl=new WeakMap,xi=new WeakMap,Uf=new WeakMap,Vf=new WeakMap,ml=new WeakMap,Ru=new WeakMap,ku=new WeakMap,jo=new WeakMap,Lu=new WeakMap,Wf=new WeakMap,Nu=new WeakMap,yl=new WeakMap,Gf=new WeakMap,qf=new WeakMap,Mu=new WeakMap,vl=new WeakMap,Xf=new WeakMap,$o=new WeakMap,Iu=new WeakMap,Zi=new WeakSet,yR=function(e){var s,i;if(l(this,zf))return;(i=l(this,xi)).ctx??(i.ctx=E(s=st,ar,Zg).call(s,l(this,gl)));const t=l(this,yl),r=l(this,Wf);for(const o of e){if(t.length>E3){le("Ignoring additional textDivs for performance reasons."),w(this,zf,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Tn);w(this,Tn,document.createElement("span")),l(this,Tn).classList.add("markedContent"),o.id!==null&&l(this,Tn).setAttribute("id",`${o.id}`),a.append(l(this,Tn))}else o.type==="endMarkedContent"&&w(this,Tn,l(this,Tn).parentNode);continue}r.push(o.str),E(this,Zi,vR).call(this,o)}},vR=function(e){var g;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,yl).push(t);const s=re.transform(l(this,qf),e.transform);let i=Math.atan2(s[1],s[0]);const o=l(this,Lu)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=l(this,Hf)&&o.fontSubstitution||o.fontFamily;a=st.fontFamilyMap.get(a)||a;const c=Math.hypot(s[2],s[3]),u=c*E(g=st,ar,bR).call(g,a,o,l(this,gl));let d,h;i===0?(d=s[4],h=s[5]-u):(d=s[4]+u*Math.sin(i),h=s[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",p=t.style;l(this,Tn)===l(this,Ru)?(p.left=`${(100*d/l(this,Vf)).toFixed(2)}%`,p.top=`${(100*h/l(this,Uf)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(l(st,$o)*c).toFixed(2)}px)`,p.fontFamily=a,r.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Hf)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),y=Math.abs(e.transform[3]);b!==y&&Math.max(b,y)/Math.min(b,y)>1.5&&(m=!0)}if(m&&(r.canvasWidth=o.vertical?e.height:e.width),l(this,Gf).set(t,r),l(this,xi).div=t,l(this,xi).properties=r,E(this,Zi,qw).call(this,l(this,xi)),r.hasText&&l(this,Tn).append(t),r.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),l(this,Tn).append(b)}},qw=function(e){var a;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let o="";if(l(st,$o)>1&&(o=`scale(${1/l(st,$o)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=i,{canvasWidth:u,fontSize:d}=r;E(a=st,ar,Xw).call(a,s,d*l(this,jo),c);const{width:h}=s.measureText(t.textContent);h>0&&(o=`scaleX(${u*l(this,jo)/h}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(i.transform=o)},ar=new WeakSet,Zg=function(e=null){let t=l(this,vl).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,vl).set(e,t),l(this,Xf).set(t,{size:0,family:""})}return t},Xw=function(e,t,r){const s=l(this,Xf).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},wR=function(){if(l(this,$o)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),w(this,$o,e.getBoundingClientRect().height),e.remove()},bR=function(e,t,r){const s=l(this,Mu).get(e);if(s)return s;const i=E(this,ar,Zg).call(this,r);i.canvas.width=i.canvas.height=FA,E(this,ar,Xw).call(this,i,FA,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return a?u=a/(a+c):(It.platform.isFirefox&&le("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),l(this,Mu).set(e,u),u},S(st,ar),S(st,Mu,new Map),S(st,vl,new Map),S(st,Xf,new WeakMap),S(st,$o,null),S(st,Iu,new Set),st);class ef{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(ef.shouldBuildText(a))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)s(u)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const C3=100;function n1(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Yw,{docId:t}=e,r=n.url?Dj(n.url):null,s=n.data?Oj(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof r1?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof Sd?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!Wp(n.docBaseUrl)?n.docBaseUrl:null,p=xg(n.cMapUrl),m=n.cMapPacked!==!1,g=n.CMapReaderFactory||(fn?Uj:CA),b=xg(n.iccUrl),y=xg(n.standardFontDataUrl),v=n.StandardFontDataFactory||(fn?Vj:_A),x=xg(n.wasmUrl),A=n.WasmFactory||(fn?Wj:TA),C=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,k=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!fn,N=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!fn&&(It.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,F=typeof n.disableFontFace=="boolean"?n.disableFontFace:fn,z=n.fontExtraProperties===!0,V=n.enableXfa===!0,$=n.ownerDocument||globalThis.document,Y=n.disableRange===!0,B=n.disableStream===!0,O=n.disableAutoFetch===!0,D=n.pdfBug===!0,L=n.CanvasFactory||(fn?Hj:$j),I=n.FilterFactory||(fn?zj:Bj),j=n.enableHWA===!0,H=n.useWasm!==!1,U=c?c.length:n.length??NaN,q=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!fn&&!F,se=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===CA&&v===_A&&A===TA&&p&&y&&x&&Zd(p,document.baseURI)&&Zd(y,document.baseURI)&&Zd(x,document.baseURI)),oe=null;yj(h);const Q={canvasFactory:new L({ownerDocument:$,enableHWA:j}),filterFactory:new I({docId:t,ownerDocument:$}),cMapReaderFactory:se?null:new g({baseUrl:p,isCompressed:m}),standardFontDataFactory:se?null:new v({baseUrl:y}),wasmFactory:se?null:new A({baseUrl:x})};d||(d=Sd.create({verbosity:h,port:Sr.workerPort}),e._worker=d);const Se={docId:t,apiVersion:"5.3.93",data:s,password:a,disableAutoFetch:O,rangeChunkSize:u,length:U,docBaseUrl:f,enableXfa:V,evaluatorOptions:{maxImageSize:T,disableFontFace:F,ignoreErrors:C,isEvalSupported:P,isOffscreenCanvasSupported:k,isImageDecoderSupported:N,canvasMaxAreaInBytes:M,fontExtraProperties:z,useSystemFonts:q,useWasm:H,useWorkerFetch:se,cMapUrl:p,iccUrl:b,standardFontDataUrl:y,wasmUrl:x}},He={ownerDocument:$,pdfBug:D,styleElement:oe,loadingParams:{disableAutoFetch:O,enableXfa:V}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ge=d.messageHandler.sendWithPromise("GetDocRequest",Se,s?[s.buffer]:null);let Ie;if(c)Ie=new a3(c,{disableRange:Y,disableStream:B});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Gt=Zd(r)?d3:fn?x3:m3;Ie=new Gt({url:r,length:U,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:Y,disableStream:B})}return ge.then(Gt=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const he=new sh(t,Gt,d.port),Ce=new P3(he,e,Ie,He,Q);e._transport=Ce,he.send("Ready",null)})}).catch(e._capability.reject),e}var wy;const by=class by{constructor(){G(this,"_capability",Promise.withResolvers());G(this,"_transport",null);G(this,"_worker",null);G(this,"docId",`d${Et(by,wy)._++}`);G(this,"destroyed",!1);G(this,"onPassword",null);G(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};wy=new WeakMap,S(by,wy,0);let Yw=by;var wl,Yf,Kf,Qf,Jf,dE;let r1=(dE=class{constructor(e,t,r=!1,s=null){S(this,wl,Promise.withResolvers());S(this,Yf,[]);S(this,Kf,[]);S(this,Qf,[]);S(this,Jf,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){l(this,Jf).push(e)}addProgressListener(e){l(this,Qf).push(e)}addProgressiveReadListener(e){l(this,Kf).push(e)}addProgressiveDoneListener(e){l(this,Yf).push(e)}onDataRange(e,t){for(const r of l(this,Jf))r(e,t)}onDataProgress(e,t){l(this,wl).promise.then(()=>{for(const r of l(this,Qf))r(e,t)})}onDataProgressiveRead(e){l(this,wl).promise.then(()=>{for(const t of l(this,Kf))t(e)})}onDataProgressiveDone(){l(this,wl).promise.then(()=>{for(const e of l(this,Yf))e()})}transportReady(){l(this,wl).resolve()}requestDataRange(e,t){Le("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},wl=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,dE);class _3{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Si,bl,ch;class T3{constructor(e,t,r,s=!1){S(this,bl);S(this,Si,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new SA:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new mR,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Vp({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:s=Hs.ENABLE,transform:i=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:h=!1}){var A,C;(A=this._stats)==null||A.time("Overall");const f=this._transport.getRenderingIntent(r,s,d,h),{renderingIntent:p,cacheKey:m}=f;w(this,Si,!1),a||(a=this._transport.getOptionalContentConfig(p));let g=this._intentStates.get(m);g||(g=Object.create(null),this._intentStates.set(m,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const b=!!(p&Zn.PRINT);g.displayReadyCapability||(g.displayReadyCapability=Promise.withResolvers(),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(f));const y=T=>{var P;g.renderTasks.delete(v),b&&w(this,Si,!0),E(this,bl,ch).call(this),T?(v.capability.reject(T),this._abortOperatorList({intentState:g,reason:T instanceof Error?T:new Error(T)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(P=globalThis.Stats)!=null&&P.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Kw({callback:y,params:{canvasContext:e,viewport:t,transform:i,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:u});(g.renderTasks||(g.renderTasks=new Set)).add(v);const x=v.task;return Promise.all([g.displayReadyCapability.promise,a]).then(([T,P])=>{var k;if(this.destroyed){y();return}if((k=this._stats)==null||k.time("Rendering"),!(P.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:T,optionalContentConfig:P}),v.operatorListChanged()}).catch(y),x}getOperatorList({intent:e="display",annotationMode:t=Hs.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,r,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>ef.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){o.read().then(function({value:c,done:u}){if(u){r(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),i()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),w(this,Si,!1),Promise.all(e)}cleanup(e=!1){w(this,Si,!0);const t=E(this,bl,ch).call(this);return e&&t&&this._stats&&(this._stats=new SA),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&E(this,bl,ch).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:o}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();E(this,bl,ch).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof ov){let s=C3;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Qi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Si=new WeakMap,bl=new WeakSet,ch=function(){if(!l(this,Si)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,Si,!1),!0};var Bo,Wr,Ai,xl,xy,Sl,Al,vn,em,xR,SR,uh,Du,tm;const Ve=class Ve{constructor({name:e=null,port:t=null,verbosity:r=vj()}={}){S(this,vn);S(this,Bo,Promise.withResolvers());S(this,Wr,null);S(this,Ai,null);S(this,xl,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(l(Ve,Al).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(Ve,Al).set(t,this),E(this,vn,xR).call(this,t)}else E(this,vn,SR).call(this)}get promise(){return l(this,Bo).promise}get port(){return l(this,Ai)}get messageHandler(){return l(this,Wr)}destroy(){var e,t;this.destroyed=!0,(e=l(this,xl))==null||e.terminate(),w(this,xl,null),l(Ve,Al).delete(l(this,Ai)),w(this,Ai,null),(t=l(this,Wr))==null||t.destroy(),w(this,Wr,null)}static create(e){const t=l(this,Al).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ve(e)}static get workerSrc(){if(Sr.workerSrc)return Sr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return me(this,"_setupFakeWorkerGlobal",(async()=>l(this,Du,tm)?l(this,Du,tm):(await import(this.workerSrc)).WorkerMessageHandler)())}};Bo=new WeakMap,Wr=new WeakMap,Ai=new WeakMap,xl=new WeakMap,xy=new WeakMap,Sl=new WeakMap,Al=new WeakMap,vn=new WeakSet,em=function(){l(this,Bo).resolve(),l(this,Wr).send("configure",{verbosity:this.verbosity})},xR=function(e){w(this,Ai,e),w(this,Wr,new sh("main","worker",e)),l(this,Wr).on("ready",()=>{}),E(this,vn,em).call(this)},SR=function(){if(l(Ve,Sl)||l(Ve,Du,tm)){E(this,vn,uh).call(this);return}let{workerSrc:e}=Ve;try{Ve._isSameOrigin(window.location,e)||(e=Ve._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new sh("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?l(this,Bo).reject(new Error("Worker was destroyed")):E(this,vn,uh).call(this)},i=new AbortController;t.addEventListener("error",()=>{l(this,xl)||s()},{signal:i.signal}),r.on("test",a=>{if(i.abort(),this.destroyed||!a){s();return}w(this,Wr,r),w(this,Ai,t),w(this,xl,t),E(this,vn,em).call(this)}),r.on("ready",a=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{E(this,vn,uh).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{iv("The worker has been disabled.")}E(this,vn,uh).call(this)},uh=function(){l(Ve,Sl)||(le("Setting up fake worker."),w(Ve,Sl,!0)),Ve._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,Bo).reject(new Error("Worker was destroyed"));return}const t=new jj;w(this,Ai,t);const r=`fake${Et(Ve,xy)._++}`,s=new sh(r+"_worker",r,t);e.setup(s,t),w(this,Wr,new sh(r,r+"_worker",t)),E(this,vn,em).call(this)}).catch(e=>{l(this,Bo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Du=new WeakSet,tm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(Ve,Du),S(Ve,xy,0),S(Ve,Sl,!1),S(Ve,Al,new WeakMap),fn&&(w(Ve,Sl,!0),Sr.workerSrc||(Sr.workerSrc="./pdf.worker.mjs")),Ve._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},Ve._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ve.fromPort=e=>{if(Tj("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ve.create(e)};let Sd=Ve;var Ei,Ns,Ou,Fu,Ci,El,dh;class P3{constructor(e,t,r,s,i){S(this,El);S(this,Ei,new Map);S(this,Ns,new Map);S(this,Ou,new Map);S(this,Fu,new Map);S(this,Ci,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new mR,this.fontLoader=new Mj({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return me(this,"annotationStorage",new Zx)}getRenderingIntent(e,t=Hs.ENABLE,r=null,s=!1,i=!1){let o=Zn.DISPLAY,a=Ow;switch(e){case"any":o=Zn.ANY;break;case"display":break;case"print":o=Zn.PRINT;break;default:le(`getRenderingIntent - invalid intent: ${e}`)}const c=o&Zn.PRINT&&r instanceof ZP?r:this.annotationStorage;switch(t){case Hs.DISABLE:o+=Zn.ANNOTATIONS_DISABLE;break;case Hs.ENABLE:break;case Hs.ENABLE_FORMS:o+=Zn.ANNOTATIONS_FORMS;break;case Hs.ENABLE_STORAGE:o+=Zn.ANNOTATIONS_STORAGE,a=c.serializable;break;default:le(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=Zn.IS_EDITING),i&&(o+=Zn.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=l(this,Ci))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of l(this,Ns).values())e.push(s._destroy());l(this,Ns).clear(),l(this,Ou).clear(),l(this,Fu).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ei).clear(),this.filterFactory.destroy(),Zh.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Qi("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{mt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}mt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:o}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(r,s)=>{mt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){s.close();return}mt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new _3(r,this))}),e.on("DocException",r=>{t._capability.reject(En(r))}),e.on("PasswordRequest",r=>{w(this,Ci,Promise.withResolvers());try{if(!t.onPassword)throw En(r);const s=i=>{i instanceof Error?l(this,Ci).reject(i):l(this,Ci).resolve({password:i})};t.onPassword(s,r.code)}catch(s){l(this,Ci).reject(s)}return l(this,Ci).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;l(this,Ns).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const d=i.error;le(`Error during font loading: ${d}`),this.commonObjs.resolve(r,d);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,h)=>globalThis.FontInspector.fontAdded(d,h):null,c=new Ij(i,a);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:u}=i;mt(u,"The imageRef must be defined.");for(const d of l(this,Ns).values())for(const[,h]of d.objs)if((h==null?void 0:h.ref)===u)return h.dataLen?(this.commonObjs.resolve(r,structuredClone(h)),h.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,o])=>{var c;if(this.destroyed)return;const a=l(this,Ns).get(s);if(!a.objs.has(r)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&le("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=l(this,Ou).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,Fu).set(i.refStr,e);const o=new T3(t,i,this,this._params.pdfBug);return l(this,Ns).set(t,o),o});return l(this,Ou).set(t,s),s}getPageIndex(e){return Fw(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,El,dh).call(this,"GetFieldObjects")}hasJSActions(){return E(this,El,dh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return E(this,El,dh).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,El,dh).call(this,"GetOptionalContentConfig").then(t=>new o3(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Ei).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new s3(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,Ei).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Ns).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ei).clear(),this.filterFactory.destroy(!0),Zh.cleanup()}}cachedPageNumber(e){if(!Fw(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,Fu).get(t)??null}}Ei=new WeakMap,Ns=new WeakMap,Ou=new WeakMap,Fu=new WeakMap,Ci=new WeakMap,El=new WeakSet,dh=function(e,t=null){const r=l(this,Ei).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return l(this,Ei).set(e,s),s};var zo;class R3{constructor(e){S(this,zo,null);G(this,"onContinue",null);G(this,"onError",null);w(this,zo,e)}get promise(){return l(this,zo).capability.promise}cancel(e=0){l(this,zo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,zo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,zo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}zo=new WeakMap;var Ho,Cl;const Oa=class Oa{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null}){S(this,Ho,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new R3(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(Oa,Cl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Oa,Cl).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:s,transform:i,background:o}=this.params;this.gfx=new Kc(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),l(this,Ho)&&(window.cancelAnimationFrame(l(this,Ho)),w(this,Ho,null)),l(Oa,Cl).delete(this._canvas),e||(e=new ov(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,Ho,window.requestAnimationFrame(()=>{w(this,Ho,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Oa,Cl).delete(this._canvas),this.callback())))}};Ho=new WeakMap,Cl=new WeakMap,S(Oa,Cl,new WeakSet);let Kw=Oa;const s1="5.3.93",AR="cbeef3233";function jA(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function qd(n){return Math.max(0,Math.min(255,255*n))}class $A{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=qd(e),[e,e,e]}static G_HTML([e]){const t=jA(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(qd)}static RGB_HTML(e){return`#${e.map(jA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[qd(1-Math.min(1,e+s)),qd(1-Math.min(1,r+s)),qd(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,o=1-r,a=Math.min(s,i,o);return["CMYK",s,i,o,a]}}class k3{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Le("Abstract method `_createSVG` called.")}}class tf extends k3{_createSVG(e){return document.createElementNS(ti,e)}}class i1{static setupStorage(e,t,r,s,i){const o=s.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var h,f;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:r});const a=i!=="richText",c=e.div;if(c.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);o.append(p),a&&ef.shouldBuildText(s.name)&&u.push(p)}return{textDivs:u}}const d=[[s,-1,o]];for(;d.length>0;){const[p,m,g]=d.at(-1);if(m+1===p.children.length){d.pop();continue}const b=p.children[++d.at(-1)[1]];if(b===null)continue;const{name:y}=b;if(y==="#text"){const x=document.createTextNode(b.value);u.push(x),g.append(x);continue}const v=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,y):document.createElement(y);if(g.append(v),b.attributes&&this.setAttributes({html:v,element:b,storage:t,intent:i,linkService:r}),((f=b.children)==null?void 0:f.length)>0)d.push([b,-1,v]);else if(b.value){const x=document.createTextNode(b.value);a&&ef.shouldBuildText(y)&&u.push(x),v.append(x)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const L3=9,cc=new WeakSet;class BA{static create(e){switch(e.data.annotationType){case at.LINK:return new ER(e);case at.TEXT:return new N3(e);case at.WIDGET:switch(e.data.fieldType){case"Tx":return new M3(e);case"Btn":return e.data.radioButton?new TR(e):e.data.checkBox?new D3(e):new O3(e);case"Ch":return new F3(e);case"Sig":return new I3(e)}return new gc(e);case at.POPUP:return new Jw(e);case at.FREETEXT:return new NR(e);case at.LINE:return new $3(e);case at.SQUARE:return new B3(e);case at.CIRCLE:return new z3(e);case at.POLYLINE:return new MR(e);case at.CARET:return new U3(e);case at.INK:return new o1(e);case at.POLYGON:return new H3(e);case at.HIGHLIGHT:return new IR(e);case at.UNDERLINE:return new V3(e);case at.SQUIGGLY:return new W3(e);case at.STRIKEOUT:return new G3(e);case at.STAMP:return new DR(e);case at.FILEATTACHMENT:return new q3(e);default:return new ht(e)}}}var _l,ju,$u,Zf,Qw;const w1=class w1{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){S(this,Zf);S(this,_l,null);S(this,ju,!1);S(this,$u,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return w1._hasPopupData(this.data)}updateEdited(e){var r;if(!this.container)return;l(this,_l)||w(this,_l,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&E(this,Zf,Qw).call(this,t),(r=l(this,$u))==null||r.popup.updateEdited(e)}resetEdited(){var e;l(this,_l)&&(E(this,Zf,Qw).call(this,l(this,_l).rect),(e=l(this,$u))==null||e.popup.resetEdited(),w(this,_l,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof gc||(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Jw){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:a,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const v=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=v}else if(this instanceof TR){const v=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=v}switch(t.borderStyle.style){case wc.SOLID:o.borderStyle="solid";break;case wc.DASHED:o.borderStyle="dashed";break;case wc.BEVELED:le("Unimplemented border style: beveled");break;case wc.INSET:le("Unimplemented border style: inset");break;case wc.UNDERLINE:o.borderBottomStyle="solid";break}const y=t.borderColor||null;y?(w(this,ju,!0),o.borderColor=re.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):o.borderWidth=0}const u=re.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=s.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-p)/h}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(o.width=`${100*a/d}%`,o.height=`${100*c/h}%`):this.setRotation(m,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],o=i[0],a=i.slice(1);s.target.style[r]=$A[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:$A[`${o}_rgb`](a)})};return me(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const o=r[s];if(o){const a={detail:{[s]:i},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,y,v]=e.subarray(2,6);if(s===g&&i===b&&t===y&&r===v)return}const{style:o}=this.container;let a;if(l(this,ju)){const{borderColor:g,borderWidth:b}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const c=s-t,u=i-r,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,b=e.length;g<b;g+=8){const y=e[g],v=e[g+1],x=e[g+2],A=e[g+3],C=d.createElement("rect"),T=(x-t)/c,P=(i-v)/u,k=(y-x)/c,N=(v-A)/u;C.setAttribute("x",T),C.setAttribute("y",P),C.setAttribute("width",k),C.setAttribute("height",N),p.append(C),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${P}" width="${k}" height="${N}"/>`)}l(this,ju)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=w(this,$u,new Jw({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Le("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:o,exportValues:a}of s){if(i===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!cc.has(u)){le(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:c,domElement:u})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==t&&cc.has(s)&&r.push({id:o,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};_l=new WeakMap,ju=new WeakMap,$u=new WeakMap,Zf=new WeakSet,Qw=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let ht=w1;var rr,Na,CR,_R;class ER extends ht{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});S(this,rr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(E(this,rr,CR).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(E(this,rr,_R).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&E(this,rr,Na).call(this)}_bindNamedAction(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),E(this,rr,Na).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const o=s.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),E(this,rr,Na).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),E(this,rr,Na).call(this),!this._fieldObjects){le('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var h;s==null||s();const{fields:i,refs:o,include:a}=r,c=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const p of i){const m=this._fieldObjects[p]||[];for(const{id:g}of m)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===a&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:p}=f;switch(d.push(p),f.type){case"text":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;u.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!cc.has(m)){le(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}rr=new WeakSet,Na=function(){this.container.setAttribute("data-internal-link","")},CR=function(t,r,s=null){t.href=this.linkService.getAnchorUrl(""),r.description&&(t.title=r.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(r.content,r.filename,s),!1},E(this,rr,Na).call(this)},_R=function(t,r){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),E(this,rr,Na).call(this)};class N3 extends ht{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class gc extends ht{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return It.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(e,t,r,s){var i,o,a;for(const[c,u]of r)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":re.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||L3,i=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(e0*s))||1,h=u/d;o=Math.min(s,c(h/e0))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,c(u/e0))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=re.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class M3 extends gc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),cc.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const h=this.data.dateFormat||this.data.timeFormat;h&&(r.title=h),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(r,"value",p.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue??"";r.value=d.userValue=m,d.formattedValue=null});let f=p=>{const{formattedValue:m}=d;m!=null&&(p.target.value=m),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",m=>{var b;if(d.focused)return;const{target:g}=m;d.userValue&&(g.value=d.userValue),d.lastCommittedValue=g.value,d.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const g={value(b){d.userValue=b.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:y}=b.detail;d.formattedValue=y,y!=null&&b.target!==document.activeElement&&(b.target.value=y),e.setValue(t,{formattedValue:y})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var A;const{charLimit:y}=b.detail,{target:v}=b;if(y===0){v.removeAttribute("maxLength");return}v.setAttribute("maxLength",y);let x=d.userValue;!x||x.length<=y||(x=x.slice(0,y),v.value=d.userValue=x,e.setValue(t,{value:x}),(A=this.linkService.eventBus)==null||A.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:x,willCommit:!0,commitKey:1,selStart:v.selectionStart,selEnd:v.selectionEnd}}))}};this._dispatchEventFromSandbox(g,m)}),r.addEventListener("keydown",m=>{var y;d.commitKey=1;let g=-1;if(m.key==="Escape"?g=0:m.key==="Enter"&&!this.data.multiLine?g=2:m.key==="Tab"&&(d.commitKey=3),g===-1)return;const{value:b}=m.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:g,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const p=f;f=null,r.addEventListener("blur",m=>{var b,y;if(!d.focused||!m.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(d.focused=!1);const{value:g}=m.target;d.userValue=g,d.lastCommittedValue!==g&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:d.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),p(m)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",m=>{var T;d.lastCommittedValue=null;const{data:g,target:b}=m,{value:y,selectionStart:v,selectionEnd:x}=b;let A=v,C=x;switch(m.inputType){case"deleteWordBackward":{const P=y.substring(0,v).match(/\w*[^\w]*$/);P&&(A-=P[0].length);break}case"deleteWordForward":{const P=y.substring(v).match(/^[^\w]*\w*/);P&&(C+=P[0].length);break}case"deleteContentBackward":v===x&&(A-=1);break;case"deleteContentForward":v===x&&(C+=1);break}m.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,change:g||"",willCommit:!1,selStart:A,selEnd:C}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class I3 extends gc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class D3 extends gc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return cc.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class TR extends gc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(cc.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class O3 extends ER{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class F3 extends gc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");cc.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,r.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),i=!1),s.append(h)}let o=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),o=()=>{d.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const g of s.options)g.selected=m.has(g.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,m=f.detail.remove;p[m].selected=!1,s.remove(m),p.length>0&&Array.prototype.findIndex.call(p,b=>b.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:p,displayValue:m,exportValue:g}=f.detail.insert,b=s.children[p],y=document.createElement("option");y.textContent=m,y.value=g,b?b.before(y):s.append(y),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of p){const{displayValue:g,exportValue:b}=m,y=document.createElement("option");y.textContent=g,y.value=b,s.append(y)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),s.addEventListener("input",d=>{var p;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Jw extends ht{constructor(e){const{data:t,elements:r}=e;super(e,{isRenderable:ht._hasPopupData(t)}),this.elements=r,this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=new j3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),r=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",r.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(s=>`${Qx}${s}`).join(",")),this.container}}var Bu,Sy,Ay,zu,Hu,rt,_i,Tl,ep,tp,Uu,Ti,Gr,Pi,np,Ri,rp,Pl,Rl,Ne,nm,Zw,PR,RR,kR,LR,rm,sm,eb;class j3{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:o,richText:a,parent:c,rect:u,parentRect:d,open:h}){S(this,Ne);S(this,Bu,E(this,Ne,kR).bind(this));S(this,Sy,E(this,Ne,eb).bind(this));S(this,Ay,E(this,Ne,sm).bind(this));S(this,zu,E(this,Ne,rm).bind(this));S(this,Hu,null);S(this,rt,null);S(this,_i,null);S(this,Tl,null);S(this,ep,null);S(this,tp,null);S(this,Uu,null);S(this,Ti,!1);S(this,Gr,null);S(this,Pi,null);S(this,np,null);S(this,Ri,null);S(this,rp,null);S(this,Pl,null);S(this,Rl,!1);var f;w(this,rt,e),w(this,rp,s),w(this,_i,o),w(this,Ri,a),w(this,tp,c),w(this,Hu,t),w(this,np,u),w(this,Uu,d),w(this,ep,r),w(this,Tl,lv.toDateObject(i)),this.trigger=r.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",l(this,zu)),p.addEventListener("mouseenter",l(this,Ay)),p.addEventListener("mouseleave",l(this,Sy)),p.classList.add("popupTriggerArea");for(const p of r)(f=p.container)==null||f.addEventListener("keydown",l(this,Bu));l(this,rt).hidden=!0,h&&E(this,Ne,rm).call(this)}render(){if(l(this,Gr))return;const e=w(this,Gr,document.createElement("div"));if(e.className="popup",l(this,Hu)){const i=e.style.outlineColor=re.makeHexColor(...l(this,Hu));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");t.className="header";const r=document.createElement("h1");if(t.append(r),{dir:r.dir,str:r.textContent}=l(this,rp),e.append(t),l(this,Tl)){const i=document.createElement("time");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Tl).valueOf()})),i.dateTime=l(this,Tl).toISOString(),t.append(i)}const s=l(this,Ne,nm);if(s)i1.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(l(this,_i));e.append(i)}l(this,rt).append(e)}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.classList.add("popupContent"),r.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,o=s.length;i<o;++i){const a=s[i];r.append(document.createTextNode(a)),i<o-1&&r.append(document.createElement("br"))}return r}updateEdited({rect:e,popupContent:t}){var r;l(this,Pl)||w(this,Pl,{contentsObj:l(this,_i),richText:l(this,Ri)}),e&&w(this,Pi,null),t&&(w(this,Ri,E(this,Ne,RR).call(this,t)),w(this,_i,null)),(r=l(this,Gr))==null||r.remove(),w(this,Gr,null)}resetEdited(){var e;l(this,Pl)&&({contentsObj:Et(this,_i)._,richText:Et(this,Ri)._}=l(this,Pl),w(this,Pl,null),(e=l(this,Gr))==null||e.remove(),w(this,Gr,null),w(this,Pi,null))}forceHide(){w(this,Rl,this.isVisible),l(this,Rl)&&(l(this,rt).hidden=!0)}maybeShow(){l(this,Rl)&&(l(this,Gr)||E(this,Ne,sm).call(this),w(this,Rl,!1),l(this,rt).hidden=!1)}get isVisible(){return l(this,rt).hidden===!1}}Bu=new WeakMap,Sy=new WeakMap,Ay=new WeakMap,zu=new WeakMap,Hu=new WeakMap,rt=new WeakMap,_i=new WeakMap,Tl=new WeakMap,ep=new WeakMap,tp=new WeakMap,Uu=new WeakMap,Ti=new WeakMap,Gr=new WeakMap,Pi=new WeakMap,np=new WeakMap,Ri=new WeakMap,rp=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,Ne=new WeakSet,nm=function(){const e=l(this,Ri),t=l(this,_i);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Ri).html||null},Zw=function(){var e,t,r;return((r=(t=(e=l(this,Ne,nm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},PR=function(){var e,t,r;return((r=(t=(e=l(this,Ne,nm))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},RR=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:l(this,Ne,PR),fontSize:l(this,Ne,Zw)?`calc(${l(this,Ne,Zw)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},kR=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Ti))&&E(this,Ne,rm).call(this)},LR=function(){if(l(this,Pi)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=l(this,tp);let o=!!l(this,Uu),a=o?l(this,Uu):l(this,np);for(const m of l(this,ep))if(!a||re.intersect(m.data.rect,a)!==null){a=m.data.rect,o=!0;break}const c=re.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,h=c[0]+d,f=c[1];w(this,Pi,[100*(h-s)/t,100*(f-i)/r]);const{style:p}=l(this,rt);p.left=`${l(this,Pi)[0]}%`,p.top=`${l(this,Pi)[1]}%`},rm=function(){w(this,Ti,!l(this,Ti)),l(this,Ti)?(E(this,Ne,sm).call(this),l(this,rt).addEventListener("click",l(this,zu)),l(this,rt).addEventListener("keydown",l(this,Bu))):(E(this,Ne,eb).call(this),l(this,rt).removeEventListener("click",l(this,zu)),l(this,rt).removeEventListener("keydown",l(this,Bu)))},sm=function(){l(this,Gr)||this.render(),this.isVisible?l(this,Ti)&&l(this,rt).classList.add("focused"):(E(this,Ne,LR).call(this),l(this,rt).hidden=!1,l(this,rt).style.zIndex=parseInt(l(this,rt).style.zIndex)+1e3)},eb=function(){l(this,rt).classList.remove("focused"),!(l(this,Ti)||!this.isVisible)&&(l(this,rt).hidden=!0,l(this,rt).style.zIndex=parseInt(l(this,rt).style.zIndex)-1e3)};class NR extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var sp;class $3 extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,sp,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=w(this,sp,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,sp)}addHighlightArea(){this.container.classList.add("highlightArea")}}sp=new WeakMap;var ip;class B3 extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,ip,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=w(this,ip,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",s-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ip)}addHighlightArea(){this.container.classList.add("highlightArea")}}ip=new WeakMap;var op;class z3 extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,op,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),o=t.borderStyle.width,a=w(this,op,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",s/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",s/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,op)}addHighlightArea(){this.container.classList.add("highlightArea")}}op=new WeakMap;var ap;class MR extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,ap,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:o,height:a}=this;if(!r)return this.container;const c=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=r.length;h<f;h+=2){const p=r[h]-t[0],m=t[3]-r[h+1];u.push(`${p},${m}`)}u=u.join(" ");const d=w(this,ap,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ap)}addHighlightArea(){this.container.classList.add("highlightArea")}}ap=new WeakMap;class H3 extends MR{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class U3 extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var lp,kl,cp,tb;class o1 extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,cp);S(this,lp,null);S(this,kl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ae.HIGHLIGHT:ae.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:o}}=this,{transform:a,width:c,height:u}=E(this,cp,tb).call(this,r,t),d=this.svgFactory.create(c,u,!0),h=w(this,lp,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,p=s.length;f<p;f++){const m=this.svgFactory.createElement(this.svgElementName);l(this,kl).push(m),m.setAttribute("points",s[f].join(",")),h.append(m)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,o=l(this,lp);if(r>=0&&o.setAttribute("stroke-width",r||1),s)for(let a=0,c=l(this,kl).length;a<c;a++)l(this,kl)[a].setAttribute("points",s[a].join(","));if(i){const{transform:a,width:c,height:u}=E(this,cp,tb).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,kl)}addHighlightArea(){this.container.classList.add("highlightArea")}}lp=new WeakMap,kl=new WeakMap,cp=new WeakSet,tb=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class IR extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ae.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class V3 extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class W3 extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class G3 extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class DR extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ae.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var up,dp,nb;class q3 extends ht{constructor(t){var s;super(t,{isRenderable:!0});S(this,dp);S(this,up,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",E(this,dp,nb).bind(this)),w(this,up,s);const{isMac:i}=It.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&E(this,dp,nb).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return l(this,up)}addHighlightArea(){this.container.classList.add("highlightArea")}}up=new WeakMap,dp=new WeakSet,nb=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var hp,Ll,Uo,fp,Aa,rb,sb,Vu;let a1=(Vu=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:o,structTreeLayer:a}){S(this,Aa);S(this,hp,null);S(this,Ll,null);S(this,Uo,new Map);S(this,fp,null);this.div=e,w(this,hp,t),w(this,Ll,r),w(this,fp,a||null),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return l(this,Uo).size>0}async render(e){var o;const{annotations:t}=e,r=this.div;wa(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new tf,annotationStorage:e.annotationStorage||new Zx,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const c=a.annotationType===at.POPUP;if(c){const h=s.get(a.id);if(!h)continue;i.elements=h}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;i.data=a;const u=BA.create(i);if(!u.isRenderable)continue;if(!c&&a.popupRef){const h=s.get(a.popupRef);h?h.push(u):s.set(a.popupRef,[u])}const d=u.render();a.hidden&&(d.style.visibility="hidden"),await E(this,Aa,rb).call(this,d,a.id,i.elements),u._isEditable&&(l(this,Uo).set(u.data.id,u),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(u))}E(this,Aa,sb).call(this)}async addLinkAnnotations(e,t){const r={data:null,layer:this.div,linkService:t,svgFactory:new tf,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=Vu._defaultBorderStyle),r.data=s;const i=BA.create(r);if(!i.isRenderable)continue;const o=i.render();await E(this,Aa,rb).call(this,o,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,wa(t,{rotation:e.rotation}),E(this,Aa,sb).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Uo).values())}getEditableAnnotation(e){return l(this,Uo).get(e)}static get _defaultBorderStyle(){return me(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:wc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},hp=new WeakMap,Ll=new WeakMap,Uo=new WeakMap,fp=new WeakMap,Aa=new WeakSet,rb=async function(e,t,r){var a,c;const s=e.firstChild||e,i=s.id=`${Qx}${t}`,o=await((a=l(this,fp))==null?void 0:a.getAriaAttributes(i));if(o)for(const[u,d]of o)s.setAttribute(u,d);r?r.at(-1).container.after(e):(this.div.append(e),(c=l(this,hp))==null||c.moveElementInDOM(this.div,e,s,!1))},sb=function(){var t;if(!l(this,Ll))return;const e=this.div;for(const[r,s]of l(this,Ll)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):i.append(s);const a=l(this,Uo).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),a._hasNoCanvas=!1):a.canvas=s)}l(this,Ll).clear()},Vu);const Cg=/\r\n?|\n/g;var qr,Un,pp,Nl,Vn,yt,OR,FR,jR,im,Ui,om,am,$R,ob,BR;const De=class De extends je{constructor(t){super({...t,name:"freeTextEditor"});S(this,yt);S(this,qr);S(this,Un,"");S(this,pp,`${this.id}-editor`);S(this,Nl,null);S(this,Vn);w(this,qr,t.color||De._defaultColor||je._defaultLineColor),w(this,Vn,t.fontSize||De._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=De.prototype,r=o=>o.isEmpty(),s=ba.TRANSLATE_SMALL,i=ba.TRANSLATE_BIG;return me(this,"_keyboardManager",new Gp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){je.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case ve.FREETEXT_SIZE:De._defaultFontSize=r;break;case ve.FREETEXT_COLOR:De._defaultColor=r;break}}updateParams(t,r){switch(t){case ve.FREETEXT_SIZE:E(this,yt,OR).call(this,r);break;case ve.FREETEXT_COLOR:E(this,yt,FR).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ve.FREETEXT_SIZE,De._defaultFontSize],[ve.FREETEXT_COLOR,De._defaultColor||je._defaultLineColor]]}get propertiesToUpdate(){return[[ve.FREETEXT_SIZE,l(this,Vn)],[ve.FREETEXT_COLOR,l(this,qr)]]}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-De._internalPadding*t,-(De._internalPadding+l(this,Vn))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),w(this,Nl,new AbortController);const t=this._uiManager.combinedSignal(l(this,Nl));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,pp)),this._isDraggable=!0,(t=l(this,Nl))==null||t.abort(),w(this,Nl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,Un),r=w(this,Un,E(this,yt,jR).call(this).trimEnd());if(t===r)return;const s=i=>{if(w(this,Un,i),!i){this.remove();return}E(this,yt,am).call(this),this._uiManager.rebuild(this),E(this,yt,im).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),E(this,yt,im).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){De._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,pp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,Vn)}px * var(--total-scale-factor))`,s.color=l(this,qr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let m,g;switch(this.rotation){case 0:m=t+(a[0]-f)/d,g=r+this.height-(a[1]-p)/h;break;case 90:m=t+(a[0]-f)/d,g=r-(a[1]-p)/h,[c,u]=[u,-c];break;case 180:m=t-this.width+(a[0]-f)/d,g=r-(a[1]-p)/h,[c,u]=[-c,-u];break;case 270:m=t+(a[0]-f-this.height*h)/d,g=r+(a[1]-p-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(m*i,g*o,c,u)}else this._moveAfterPaste(t,r);E(this,yt,am).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,g,b;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=E(m=De,Ui,ob).call(m,r.getData("text")||"").replaceAll(Cg,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const y=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(Cg,"")),y!==this.editorDiv){let v=d;for(const x of this.editorDiv.childNodes){if(x===y){v=h;continue}v.push(E(g=De,Ui,om).call(g,x))}}d.push(c.nodeValue.slice(0,u).replaceAll(Cg,""))}else if(c===this.editorDiv){let y=d,v=0;for(const x of this.editorDiv.childNodes)v++===u&&(y=h),y.push(E(b=De,Ui,om).call(b,x))}w(this,Un,`${d.join(`
`)}${i}${h.join(`
`)}`),E(this,yt,am).call(this);const f=new Range;let p=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const v=y.nodeValue.length;if(p<=v){f.setStart(y,p),f.setEnd(y,p);break}p-=v}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,r,s){var a;let i=null;if(t instanceof NR){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:p},textContent:m,textPosition:g,parent:{page:{pageNumber:b}}}=t;if(!m||m.length===0)return null;i=t={annotationType:ae.FREETEXT,color:Array.from(u),fontSize:c,value:m.join(`
`),position:g,pageIndex:b-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p}}const o=await super.deserialize(t,r,s);return w(o,Vn,t.fontSize),w(o,qr,re.makeHexColor(...t.color)),w(o,Un,E(a=De,Ui,ob).call(a,t.value)),o._initialData=i,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=De._internalPadding*this.parentScale,s=this.getRect(r,r),i=je._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,qr)),o={annotationType:ae.FREETEXT,color:i,fontSize:l(this,Vn),value:E(this,yt,$R).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(o.isCopy=!0,o):this.annotationElementId&&!E(this,yt,BR).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(this.deleted)return r;const{style:s}=r;s.fontSize=`calc(${l(this,Vn)}px * var(--total-scale-factor))`,s.color=l(this,qr),r.replaceChildren();for(const o of l(this,Un).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),r.append(a)}const i=De._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:l(this,Un)}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};qr=new WeakMap,Un=new WeakMap,pp=new WeakMap,Nl=new WeakMap,Vn=new WeakMap,yt=new WeakSet,OR=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-l(this,Vn))*this.parentScale),w(this,Vn,i),E(this,yt,im).call(this)},s=l(this,Vn);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},FR=function(t){const r=i=>{w(this,qr,this.editorDiv.style.color=i)},s=l(this,qr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jR=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(E(s=De,Ui,om).call(s,i)),r=i);return t.join(`
`)},im=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Ui=new WeakSet,om=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Cg,"")},am=function(){if(this.editorDiv.replaceChildren(),!!l(this,Un))for(const t of l(this,Un).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},$R=function(){return l(this,Un).replaceAll(""," ")},ob=function(t){return t.replaceAll(" ","")},BR=function(t){const{value:r,fontSize:s,color:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((a,c)=>a!==i[c])||t.pageIndex!==o},S(De,Ui),G(De,"_freeTextDefaultContent",""),G(De,"_internalPadding",0),G(De,"_defaultColor",null),G(De,"_defaultFontSize",10),G(De,"_type","freetext"),G(De,"_editorType",ae.FREETEXT);let ib=De;class Z{toSVGPath(){Le("Abstract method `toSVGPath` must be implemented.")}get box(){Le("Abstract getter `box` must be implemented.")}serialize(e,t){Le("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a]*s,o[a+1]=r+e[a+1]*i;return o}static _rescaleAndSwap(e,t,r,s,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a+1]*s,o[a+1]=r+e[a]*i;return o}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,o){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+o)/6,(r+i)/2,(s+o)/2]}}G(Z,"PRECISION",1e-4);var Wn,Xr,Wu,Gu,Ms,pe,Ml,Il,gp,mp,qu,Xu,Vo,yp,Ey,Cy,At,hh,zR,HR,UR,VR,WR,GR;const oi=class oi{constructor({x:e,y:t},r,s,i,o,a=0){S(this,At);S(this,Wn);S(this,Xr,[]);S(this,Wu);S(this,Gu);S(this,Ms,[]);S(this,pe,new Float32Array(18));S(this,Ml);S(this,Il);S(this,gp);S(this,mp);S(this,qu);S(this,Xu);S(this,Vo,[]);w(this,Wn,r),w(this,Xu,i*s),w(this,Gu,o),l(this,pe).set([NaN,NaN,NaN,NaN,e,t],6),w(this,Wu,a),w(this,mp,l(oi,yp)*s),w(this,gp,l(oi,Cy)*s),w(this,qu,s),l(this,Vo).push(e,t)}isEmpty(){return isNaN(l(this,pe)[8])}add({x:e,y:t}){var N;w(this,Ml,e),w(this,Il,t);const[r,s,i,o]=l(this,Wn);let[a,c,u,d]=l(this,pe).subarray(8,12);const h=e-u,f=t-d,p=Math.hypot(h,f);if(p<l(this,gp))return!1;const m=p-l(this,mp),g=m/p,b=g*h,y=g*f;let v=a,x=c;a=u,c=d,u+=b,d+=y,(N=l(this,Vo))==null||N.push(e,t);const A=-y/m,C=b/m,T=A*l(this,Xu),P=C*l(this,Xu);return l(this,pe).set(l(this,pe).subarray(2,8),0),l(this,pe).set([u+T,d+P],4),l(this,pe).set(l(this,pe).subarray(14,18),12),l(this,pe).set([u-T,d-P],16),isNaN(l(this,pe)[6])?(l(this,Ms).length===0&&(l(this,pe).set([a+T,c+P],2),l(this,Ms).push(NaN,NaN,NaN,NaN,(a+T-r)/i,(c+P-s)/o),l(this,pe).set([a-T,c-P],14),l(this,Xr).push(NaN,NaN,NaN,NaN,(a-T-r)/i,(c-P-s)/o)),l(this,pe).set([v,x,a,c,u,d],6),!this.isEmpty()):(l(this,pe).set([v,x,a,c,u,d],6),Math.abs(Math.atan2(x-c,v-a)-Math.atan2(y,b))<Math.PI/2?([a,c,u,d]=l(this,pe).subarray(2,6),l(this,Ms).push(NaN,NaN,NaN,NaN,((a+u)/2-r)/i,((c+d)/2-s)/o),[a,c,v,x]=l(this,pe).subarray(14,18),l(this,Xr).push(NaN,NaN,NaN,NaN,((v+a)/2-r)/i,((x+c)/2-s)/o),!0):([v,x,a,c,u,d]=l(this,pe).subarray(0,6),l(this,Ms).push(((v+5*a)/6-r)/i,((x+5*c)/6-s)/o,((5*a+u)/6-r)/i,((5*c+d)/6-s)/o,((a+u)/2-r)/i,((c+d)/2-s)/o),[u,d,a,c,v,x]=l(this,pe).subarray(12,18),l(this,Xr).push(((v+5*a)/6-r)/i,((x+5*c)/6-s)/o,((5*a+u)/6-r)/i,((5*c+d)/6-s)/o,((a+u)/2-r)/i,((c+d)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,Ms),t=l(this,Xr);if(isNaN(l(this,pe)[6])&&!this.isEmpty())return E(this,At,zR).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);E(this,At,UR).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return E(this,At,HR).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,o){return new qR(e,t,r,s,i,o)}getOutlines(){var h;const e=l(this,Ms),t=l(this,Xr),r=l(this,pe),[s,i,o,a]=l(this,Wn),c=new Float32Array((((h=l(this,Vo))==null?void 0:h.length)??0)+2);for(let f=0,p=c.length-2;f<p;f+=2)c[f]=(l(this,Vo)[f]-s)/o,c[f+1]=(l(this,Vo)[f+1]-i)/a;if(c[c.length-2]=(l(this,Ml)-s)/o,c[c.length-1]=(l(this,Il)-i)/a,isNaN(r[6])&&!this.isEmpty())return E(this,At,VR).call(this,c);const u=new Float32Array(l(this,Ms).length+24+l(this,Xr).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=E(this,At,GR).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+p],u[d+1]=t[f+p+1],d+=2}return E(this,At,WR).call(this,u,d),this.newFreeDrawOutline(u,c,l(this,Wn),l(this,qu),l(this,Wu),l(this,Gu))}};Wn=new WeakMap,Xr=new WeakMap,Wu=new WeakMap,Gu=new WeakMap,Ms=new WeakMap,pe=new WeakMap,Ml=new WeakMap,Il=new WeakMap,gp=new WeakMap,mp=new WeakMap,qu=new WeakMap,Xu=new WeakMap,Vo=new WeakMap,yp=new WeakMap,Ey=new WeakMap,Cy=new WeakMap,At=new WeakSet,hh=function(){const e=l(this,pe).subarray(4,6),t=l(this,pe).subarray(16,18),[r,s,i,o]=l(this,Wn);return[(l(this,Ml)+(e[0]-t[0])/2-r)/i,(l(this,Il)+(e[1]-t[1])/2-s)/o,(l(this,Ml)+(t[0]-e[0])/2-r)/i,(l(this,Il)+(t[1]-e[1])/2-s)/o]},zR=function(){const[e,t,r,s]=l(this,Wn),[i,o,a,c]=E(this,At,hh).call(this);return`M${(l(this,pe)[2]-e)/r} ${(l(this,pe)[3]-t)/s} L${(l(this,pe)[4]-e)/r} ${(l(this,pe)[5]-t)/s} L${i} ${o} L${a} ${c} L${(l(this,pe)[16]-e)/r} ${(l(this,pe)[17]-t)/s} L${(l(this,pe)[14]-e)/r} ${(l(this,pe)[15]-t)/s} Z`},HR=function(e){const t=l(this,Xr);e.push(`L${t[4]} ${t[5]} Z`)},UR=function(e){const[t,r,s,i]=l(this,Wn),o=l(this,pe).subarray(4,6),a=l(this,pe).subarray(16,18),[c,u,d,h]=E(this,At,hh).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-r)/i} L${c} ${u} L${d} ${h} L${(a[0]-t)/s} ${(a[1]-r)/i}`)},VR=function(e){const t=l(this,pe),[r,s,i,o]=l(this,Wn),[a,c,u,d]=E(this,At,hh).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/o],0),this.newFreeDrawOutline(h,e,l(this,Wn),l(this,qu),l(this,Wu),l(this,Gu))},WR=function(e,t){const r=l(this,Xr);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},GR=function(e,t){const r=l(this,pe).subarray(4,6),s=l(this,pe).subarray(16,18),[i,o,a,c]=l(this,Wn),[u,d,h,f]=E(this,At,hh).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/c],t),t+=24},S(oi,yp,8),S(oi,Ey,2),S(oi,Cy,l(oi,yp)+l(oi,Ey));let ny=oi;var Yu,Dl,ki,vp,Gn,wp,ct,_y,XR;class qR extends Z{constructor(t,r,s,i,o,a){super();S(this,_y);S(this,Yu);S(this,Dl,new Float32Array(4));S(this,ki);S(this,vp);S(this,Gn);S(this,wp);S(this,ct);w(this,ct,t),w(this,Gn,r),w(this,Yu,s),w(this,wp,i),w(this,ki,o),w(this,vp,a),this.lastPoint=[NaN,NaN],E(this,_y,XR).call(this,a);const[c,u,d,h]=l(this,Dl);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,p=r.length;f<p;f+=2)r[f]=(r[f]-c)/d,r[f+1]=(r[f+1]-u)/h}toSVGPath(){const t=[`M${l(this,ct)[4]} ${l(this,ct)[5]}`];for(let r=6,s=l(this,ct).length;r<s;r+=6){if(isNaN(l(this,ct)[r])){t.push(`L${l(this,ct)[r+4]} ${l(this,ct)[r+5]}`);continue}t.push(`C${l(this,ct)[r]} ${l(this,ct)[r+1]} ${l(this,ct)[r+2]} ${l(this,ct)[r+3]} ${l(this,ct)[r+4]} ${l(this,ct)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],o){const a=s-t,c=i-r;let u,d;switch(o){case 0:u=Z._rescale(l(this,ct),t,i,a,-c),d=Z._rescale(l(this,Gn),t,i,a,-c);break;case 90:u=Z._rescaleAndSwap(l(this,ct),t,r,a,c),d=Z._rescaleAndSwap(l(this,Gn),t,r,a,c);break;case 180:u=Z._rescale(l(this,ct),s,r,-a,c),d=Z._rescale(l(this,Gn),s,r,-a,c);break;case 270:u=Z._rescaleAndSwap(l(this,ct),s,i,-a,-c),d=Z._rescaleAndSwap(l(this,Gn),s,i,-a,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return l(this,Dl)}newOutliner(t,r,s,i,o,a=0){return new ny(t,r,s,i,o,a)}getNewOutline(t,r){const[s,i,o,a]=l(this,Dl),[c,u,d,h]=l(this,Yu),f=o*d,p=a*h,m=s*d+c,g=i*h+u,b=this.newOutliner({x:l(this,Gn)[0]*f+m,y:l(this,Gn)[1]*p+g},l(this,Yu),l(this,wp),t,l(this,vp),r??l(this,ki));for(let y=2;y<l(this,Gn).length;y+=2)b.add({x:l(this,Gn)[y]*f+m,y:l(this,Gn)[y+1]*p+g});return b.getOutlines()}}Yu=new WeakMap,Dl=new WeakMap,ki=new WeakMap,vp=new WeakMap,Gn=new WeakMap,wp=new WeakMap,ct=new WeakMap,_y=new WeakSet,XR=function(t){const r=l(this,ct);let s=r[4],i=r[5];const o=[s,i,s,i];let a=s,c=i;const u=t?Math.max:Math.min;for(let h=6,f=r.length;h<f;h+=6){const p=r[h+4],m=r[h+5];if(isNaN(r[h]))re.pointBoundingBox(p,m,o),c<m?(a=p,c=m):c===m&&(a=u(a,p));else{const g=[1/0,1/0,-1/0,-1/0];re.bezierBoundingBox(s,i,...r.slice(h,h+6),g),re.rectBoundingBox(...g,o),c<g[3]?(a=g[2],c=g[3]):c===g[3]&&(a=u(a,g[2]))}s=p,i=m}const d=l(this,Dl);d[0]=o[0]-l(this,ki),d[1]=o[1]-l(this,ki),d[2]=o[2]-o[0]+2*l(this,ki),d[3]=o[3]-o[1]+2*l(this,ki),this.lastPoint=[a,c]};var bp,xp,Wo,Yr,bn,YR,lm,KR,QR,lb;class ab{constructor(e,t=0,r=0,s=!0){S(this,bn);S(this,bp);S(this,xp);S(this,Wo,[]);S(this,Yr,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:m,y:g,width:b,height:y}of e){const v=Math.floor((m-t)/a)*a,x=Math.ceil((m+b+t)/a)*a,A=Math.floor((g-t)/a)*a,C=Math.ceil((g+y+t)/a)*a,T=[v,A,C,!0],P=[x,A,C,!1];l(this,Wo).push(T,P),re.rectBoundingBox(v,A,x,C,i)}const c=i[2]-i[0]+2*r,u=i[3]-i[1]+2*r,d=i[0]-r,h=i[1]-r,f=l(this,Wo).at(s?-1:-2),p=[f[0],f[2]];for(const m of l(this,Wo)){const[g,b,y]=m;m[0]=(g-d)/c,m[1]=(b-h)/u,m[2]=(y-h)/u}w(this,bp,new Float32Array([d,h,c,u])),w(this,xp,p)}getOutlines(){l(this,Wo).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of l(this,Wo))t[3]?(e.push(...E(this,bn,lb).call(this,t)),E(this,bn,KR).call(this,t)):(E(this,bn,QR).call(this,t),e.push(...E(this,bn,lb).call(this,t)));return E(this,bn,YR).call(this,e)}}bp=new WeakMap,xp=new WeakMap,Wo=new WeakMap,Yr=new WeakMap,bn=new WeakSet,YR=function(e){const t=[],r=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const s=[];let i;for(;r.size>0;){const o=r.values().next().value;let[a,c,u,d,h]=o;r.delete(o);let f=a,p=c;for(i=[a,u],s.push(i);;){let m;if(r.has(d))m=d;else if(r.has(h))m=h;else break;r.delete(m),[a,c,u,d,h]=m,f!==a&&(i.push(f,p,a,p===c?c:u),f=a),p=p===c?u:c}i.push(f,p)}return new X3(s,l(this,bp),l(this,xp))},lm=function(e){const t=l(this,Yr);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,o=t[i][0];if(o===e)return i;o<e?r=i+1:s=i-1}return s+1},KR=function([,e,t]){const r=E(this,bn,lm).call(this,e);l(this,Yr).splice(r,0,[e,t])},QR=function([,e,t]){const r=E(this,bn,lm).call(this,e);for(let s=r;s<l(this,Yr).length;s++){const[i,o]=l(this,Yr)[s];if(i!==e)break;if(i===e&&o===t){l(this,Yr).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,o]=l(this,Yr)[s];if(i!==e)break;if(i===e&&o===t){l(this,Yr).splice(s,1);return}}},lb=function(e){const[t,r,s]=e,i=[[t,r,s]],o=E(this,bn,lm).call(this,s);for(let a=0;a<o;a++){const[c,u]=l(this,Yr)[a];for(let d=0,h=i.length;d<h;d++){const[,f,p]=i[d];if(!(u<=f||p<=c)){if(f>=c){if(p>u)i[d][1]=u;else{if(h===1)return[];i.splice(d,1),d--,h--}continue}i[d][2]=c,p>u&&i.push([t,u,p])}}}return i};var Sp,Ku;class X3 extends Z{constructor(t,r,s){super();S(this,Sp);S(this,Ku);w(this,Ku,t),w(this,Sp,r),this.lastPoint=s}toSVGPath(){const t=[];for(const r of l(this,Ku)){let[s,i]=r;t.push(`M${s} ${i}`);for(let o=2;o<r.length;o+=2){const a=r[o],c=r[o+1];a===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${a}`),s=a)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],o){const a=[],c=s-t,u=i-r;for(const d of l(this,Ku)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=i-d[f+1]*u;a.push(h)}return a}get box(){return l(this,Sp)}get classNamesForOutlining(){return["highlightOutline"]}}Sp=new WeakMap,Ku=new WeakMap;class cb extends ny{newFreeDrawOutline(e,t,r,s,i,o){return new Y3(e,t,r,s,i,o)}}class Y3 extends qR{newOutliner(e,t,r,s,i,o=0){return new cb(e,t,r,s,i,o)}}var qn,Ol,Qu,bt,Ap,Ju,Li,Ep,Go,Kr,Zu,Cp,ke,ub,db,hb,Ma,JR,uo;const Cn=class Cn{constructor({editor:e=null,uiManager:t=null}){S(this,ke);S(this,qn,null);S(this,Ol,null);S(this,Qu);S(this,bt,null);S(this,Ap,!1);S(this,Ju,!1);S(this,Li,null);S(this,Ep);S(this,Go,null);S(this,Kr,null);S(this,Zu);var r,s;e?(w(this,Ju,!1),w(this,Zu,ve.HIGHLIGHT_COLOR),w(this,Li,e)):(w(this,Ju,!0),w(this,Zu,ve.HIGHLIGHT_DEFAULT_COLOR)),w(this,Kr,(e==null?void 0:e._uiManager)||t),w(this,Ep,l(this,Kr)._eventBus),w(this,Qu,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=l(this,Kr))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Cn,Cp)||w(Cn,Cp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return me(this,"_keyboardManager",new Gp([[["Escape","mac+Escape"],Cn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Cn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Cn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Cn.prototype._moveToPrevious],[["Home","mac+Home"],Cn.prototype._moveToBeginning],[["End","mac+End"],Cn.prototype._moveToEnd]]))}renderButton(){const e=w(this,qn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Li)&&(e.ariaControls=`${l(this,Li).id}_colorpicker_dropdown`);const t=l(this,Kr)._signal;e.addEventListener("click",E(this,ke,Ma).bind(this),{signal:t}),e.addEventListener("keydown",E(this,ke,hb).bind(this),{signal:t});const r=w(this,Ol,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=l(this,Qu),e.append(r),e}renderMainDropdown(){const e=w(this,bt,E(this,ke,ub).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,qn)){E(this,ke,Ma).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,ke,db).call(this,t,e)}_moveToNext(e){var t,r;if(!l(this,ke,uo)){E(this,ke,Ma).call(this,e);return}if(e.target===l(this,qn)){(t=l(this,bt).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=l(this,bt))==null?void 0:t.firstChild)||e.target===l(this,qn)){l(this,ke,uo)&&this._hideDropdownFromKeyboard();return}l(this,ke,uo)||E(this,ke,Ma).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!l(this,ke,uo)){E(this,ke,Ma).call(this,e);return}(t=l(this,bt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ke,uo)){E(this,ke,Ma).call(this,e);return}(t=l(this,bt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,bt))==null||e.classList.add("hidden"),l(this,qn).ariaExpanded="false",(t=l(this,Go))==null||t.abort(),w(this,Go,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,Ju)){if(!l(this,ke,uo)){(e=l(this,Li))==null||e.unselect();return}this.hideDropdown(),l(this,qn).focus({preventScroll:!0,focusVisible:l(this,Ap)})}}updateColor(e){if(l(this,Ol)&&(l(this,Ol).style.backgroundColor=e),!l(this,bt))return;const t=l(this,Kr).highlightColors.values();for(const r of l(this,bt).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=l(this,qn))==null||e.remove(),w(this,qn,null),w(this,Ol,null),(t=l(this,bt))==null||t.remove(),w(this,bt,null)}};qn=new WeakMap,Ol=new WeakMap,Qu=new WeakMap,bt=new WeakMap,Ap=new WeakMap,Ju=new WeakMap,Li=new WeakMap,Ep=new WeakMap,Go=new WeakMap,Kr=new WeakMap,Zu=new WeakMap,Cp=new WeakMap,ke=new WeakSet,ub=function(){const e=document.createElement("div"),t=l(this,Kr)._signal;e.addEventListener("contextmenu",Rr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Li)&&(e.id=`${l(this,Li).id}_colorpicker_dropdown`);for(const[r,s]of l(this,Kr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",l(Cn,Cp)[r]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.ariaSelected=s===l(this,Qu),i.addEventListener("click",E(this,ke,db).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",E(this,ke,hb).bind(this),{signal:t}),e},db=function(e,t){t.stopPropagation(),l(this,Ep).dispatch("switchannotationeditorparams",{source:this,type:l(this,Zu),value:e})},hb=function(e){Cn._keyboardManager.exec(this,e)},Ma=function(e){if(l(this,ke,uo)){this.hideDropdown();return}if(w(this,Ap,e.detail===0),l(this,Go)||(w(this,Go,new AbortController),window.addEventListener("pointerdown",E(this,ke,JR).bind(this),{signal:l(this,Kr).combinedSignal(l(this,Go))})),l(this,qn).ariaExpanded="true",l(this,bt)){l(this,bt).classList.remove("hidden");return}const t=w(this,bt,E(this,ke,ub).call(this));l(this,qn).append(t)},JR=function(e){var t;(t=l(this,bt))!=null&&t.contains(e.target)||this.hideDropdown()},uo=function(){return l(this,bt)&&!l(this,bt).classList.contains("hidden")},S(Cn,Cp,null);let nf=Cn;var ed,_p,Ni,Fl,Tp,Pn,Pp,Rp,jl,yr,Xn,jt,td,Mi,en,nd,vr,kp,ue,fb,cm,ZR,ek,tk,pb,Ia,Ar,Ec,nk,um,fh,rk,sk,ik,ok,ak;const Ae=class Ae extends je{constructor(t){super({...t,name:"highlightEditor"});S(this,ue);S(this,ed,null);S(this,_p,0);S(this,Ni);S(this,Fl,null);S(this,Tp,null);S(this,Pn,null);S(this,Pp,null);S(this,Rp,0);S(this,jl,null);S(this,yr,null);S(this,Xn,null);S(this,jt,!1);S(this,td,null);S(this,Mi);S(this,en,null);S(this,nd,"");S(this,vr);S(this,kp,"");this.color=t.color||Ae._defaultColor,w(this,vr,t.thickness||Ae._defaultThickness),w(this,Mi,t.opacity||Ae._defaultOpacity),w(this,Ni,t.boxes||null),w(this,kp,t.methodOfCreation||""),w(this,nd,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(w(this,jt,!0),E(this,ue,cm).call(this,t),E(this,ue,Ia).call(this)):l(this,Ni)&&(w(this,ed,t.anchorNode),w(this,_p,t.anchorOffset),w(this,Pp,t.focusNode),w(this,Rp,t.focusOffset),E(this,ue,fb).call(this),E(this,ue,Ia).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ae.prototype;return me(this,"_keyboardManager",new Gp([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,jt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,vr),methodOfCreation:l(this,kp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;je.initialize(t,r),Ae._defaultColor||(Ae._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case ve.HIGHLIGHT_DEFAULT_COLOR:Ae._defaultColor=r;break;case ve.HIGHLIGHT_THICKNESS:Ae._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return l(this,td)}updateParams(t,r){switch(t){case ve.HIGHLIGHT_COLOR:E(this,ue,ZR).call(this,r);break;case ve.HIGHLIGHT_THICKNESS:E(this,ue,ek).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ve.HIGHLIGHT_DEFAULT_COLOR,Ae._defaultColor],[ve.HIGHLIGHT_THICKNESS,Ae._defaultThickness]]}get propertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,this.color||Ae._defaultColor],[ve.HIGHLIGHT_THICKNESS,l(this,vr)||Ae._defaultThickness],[ve.HIGHLIGHT_FREE,l(this,jt)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",w(this,Tp,new nf({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,ue,fh).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,E(this,ue,fh).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){E(this,ue,pb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,ue,Ia).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?E(this,ue,pb).call(this):t&&(E(this,ue,Ia).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,o,a;const{drawLayer:r}=this.parent;let s;l(this,jt)?(t=(t-this.rotation+360)%360,s=E(i=Ae,Ar,Ec).call(i,l(this,yr).box,t)):s=E(o=Ae,Ar,Ec).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(l(this,Xn),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(l(this,en),{bbox:E(a=Ae,Ar,Ec).call(a,l(this,Pn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,nd)&&(t.setAttribute("aria-label",l(this,nd)),t.setAttribute("role","mark")),l(this,jt)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,ue,nk).bind(this),{signal:this._uiManager._signal});const r=w(this,jl,document.createElement("div"));t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=l(this,Fl);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),TP(this,l(this,jl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,ue,um).call(this,!0);break;case 1:case 3:E(this,ue,um).call(this,!1);break}}select(){var t;super.select(),l(this,en)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,en)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,en),{rootClass:{selected:!1}}),l(this,jt)||E(this,ue,um).call(this,!1))}get _mustFixPosition(){return!l(this,jt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Xn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,en),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:o}){const{x:a,y:c,width:u,height:d}=s.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),p=m=>{h.abort(),E(this,Ar,ok).call(this,t,m)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",ut,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Rr,{signal:f}),s.addEventListener("pointermove",E(this,Ar,ik).bind(this,t),{signal:f}),this._freeHighlight=new cb({x:i,y:o},[a,c,u,d],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var g,b,y,v;let i=null;if(t instanceof IR){const{data:{quadPoints:x,rect:A,rotation:C,id:T,color:P,opacity:k,popupRef:N},parent:{page:{pageNumber:M}}}=t;i=t={annotationType:ae.HIGHLIGHT,color:Array.from(P),opacity:k,quadPoints:x,boxes:null,pageIndex:M-1,rect:A.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:N}}else if(t instanceof o1){const{data:{inkLists:x,rect:A,rotation:C,id:T,color:P,borderStyle:{rawWidth:k},popupRef:N},parent:{page:{pageNumber:M}}}=t;i=t={annotationType:ae.HIGHLIGHT,color:Array.from(P),thickness:k,inkLists:x,boxes:null,pageIndex:M-1,rect:A.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:N}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,d=await super.deserialize(t,r,s);d.color=re.makeHexColor(...o),w(d,Mi,u||1),c&&w(d,vr,t.thickness),d._initialData=i;const[h,f]=d.pageDimensions,[p,m]=d.pageTranslation;if(a){const x=w(d,Ni,[]);for(let A=0;A<a.length;A+=8)x.push({x:(a[A]-p)/h,y:1-(a[A+1]-m)/f,width:(a[A+2]-a[A])/h,height:(a[A+1]-a[A+5])/f});E(g=d,ue,fb).call(g),E(b=d,ue,Ia).call(b),d.rotate(d.rotation)}else if(c){w(d,jt,!0);const x=c[0],A={x:x[0]-p,y:f-(x[1]-m)},C=new cb(A,[0,0,h,f],1,l(d,vr)/2,!0,.001);for(let k=0,N=x.length;k<N;k+=2)A.x=x[k]-p,A.y=f-(x[k+1]-m),C.add(A);const{id:T,clipPathId:P}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);E(y=d,ue,cm).call(y,{highlightOutlines:C.getOutlines(),highlightId:T,clipPathId:P}),E(v=d,ue,Ia).call(v),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=this.getRect(0,0),s=je._colorManager.convert(this.color),i={annotationType:ae.HIGHLIGHT,color:s,opacity:l(this,Mi),thickness:l(this,vr),quadPoints:E(this,ue,rk).call(this),outlines:E(this,ue,sk).call(this,r),pageIndex:this.pageIndex,rect:r,rotation:E(this,ue,fh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!E(this,ue,ak).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ed=new WeakMap,_p=new WeakMap,Ni=new WeakMap,Fl=new WeakMap,Tp=new WeakMap,Pn=new WeakMap,Pp=new WeakMap,Rp=new WeakMap,jl=new WeakMap,yr=new WeakMap,Xn=new WeakMap,jt=new WeakMap,td=new WeakMap,Mi=new WeakMap,en=new WeakMap,nd=new WeakMap,vr=new WeakMap,kp=new WeakMap,ue=new WeakSet,fb=function(){const t=new ab(l(this,Ni),.001);w(this,yr,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,yr).box;const r=new ab(l(this,Ni),.0025,.001,this._uiManager.direction==="ltr");w(this,Pn,r.getOutlines());const{lastPoint:s}=l(this,Pn);w(this,td,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},cm=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var h,f;if(w(this,yr,t),w(this,Pn,t.getNewOutline(l(this,vr)/2+1.5,.0025)),r>=0)w(this,Xn,r),w(this,Fl,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),w(this,en,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Pn).box,path:{d:l(this,Pn).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Xn),{bbox:E(h=Ae,Ar,Ec).call(h,l(this,yr).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,en),{bbox:E(f=Ae,Ar,Ec).call(f,l(this,Pn).box,p),path:{d:l(this,Pn).toSVGPath()}})}const[o,a,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*m/p,this.height=u*p/m;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*m/p,this.height=u*p/m;break}}const{lastPoint:d}=l(this,Pn);w(this,td,[(d[0]-o)/c,(d[1]-a)/u])},ZR=function(t){const r=(o,a)=>{var c,u;this.color=o,w(this,Mi,a),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,Xn),{root:{fill:o,"fill-opacity":a}}),(u=l(this,Tp))==null||u.updateColor(o)},s=this.color,i=l(this,Mi);this.addCommands({cmd:r.bind(this,t,Ae._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},ek=function(t){const r=l(this,vr),s=i=>{w(this,vr,i),E(this,ue,tk).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},tk=function(t){if(!l(this,jt))return;E(this,ue,cm).call(this,{highlightOutlines:l(this,yr).getNewOutline(t/2)}),this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)},pb=function(){l(this,Xn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Xn)),w(this,Xn,null),this.parent.drawLayer.remove(l(this,en)),w(this,en,null))},Ia=function(t=this.parent){l(this,Xn)===null&&({id:Et(this,Xn)._,clipPathId:Et(this,Fl)._}=t.drawLayer.draw({bbox:l(this,yr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Mi)},rootClass:{highlight:!0,free:l(this,jt)},path:{d:l(this,yr).toSVGPath()}},!1,!0),w(this,en,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,jt)},bbox:l(this,Pn).box,path:{d:l(this,Pn).toSVGPath()}},l(this,jt))),l(this,jl)&&(l(this,jl).style.clipPath=l(this,Fl)))},Ar=new WeakSet,Ec=function([t,r,s,i],o){switch(o){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},nk=function(t){Ae._keyboardManager.exec(this,t)},um=function(t){if(!l(this,ed))return;const r=window.getSelection();t?r.setPosition(l(this,ed),l(this,_p)):r.setPosition(l(this,Pp),l(this,Rp))},fh=function(){return l(this,jt)?this.rotation:0},rk=function(){if(l(this,jt))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,o=l(this,Ni),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const p=u*t+s,m=(1-d)*r+i;a[c]=a[c+4]=p,a[c+1]=a[c+3]=m,a[c+2]=a[c+6]=p+h*t,a[c+5]=a[c+7]=m-f*r,c+=8}return a},sk=function(t){return l(this,yr).serialize(t,E(this,ue,fh).call(this))},ik=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},ok=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},ak=function(t){const{color:r}=this._initialData;return t.color.some((s,i)=>s!==r[i])},S(Ae,Ar),G(Ae,"_defaultColor",null),G(Ae,"_defaultOpacity",1),G(Ae,"_defaultThickness",12),G(Ae,"_type","highlight"),G(Ae,"_editorType",ae.HIGHLIGHT),G(Ae,"_freeHighlightId",-1),G(Ae,"_freeHighlight",null),G(Ae,"_freeHighlightClipId","");let ry=Ae;var $l;class lk{constructor(){S(this,$l,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){l(this,$l)[e]=t}toSVGProperties(){const e=l(this,$l);return w(this,$l,Object.create(null)),{root:e}}reset(){w(this,$l,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Le("Not implemented")}}$l=new WeakMap;var Yn,rd,Tt,Bl,zl,qo,Xo,Yo,Hl,be,gb,mb,yb,ph,ck,dm,gh,Cc;const te=class te extends je{constructor(t){super(t);S(this,be);S(this,Yn,null);S(this,rd);G(this,"_drawId",null);w(this,rd,t.mustBeCommitted||!1),this._addOutlines(t)}_addOutlines(t){t.drawOutlines&&(E(this,be,gb).call(this,t),E(this,be,ph).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,o]of Object.entries(r))s.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){Le("Not implemented")}static get typesMap(){Le("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(l(te,Tt).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,o=i[r],a=c=>{var d;i.updateProperty(r,c);const u=l(this,Yn).updateProperty(r,c);u&&E(this,be,gh).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties())};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,Yn).getPathResizingSVGProperties(E(this,be,dm).call(this)),{bbox:E(this,be,Cc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,Yn).getPathResizedSVGProperties(E(this,be,dm).call(this)),{bbox:E(this,be,Cc).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:E(this,be,Cc).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,Yn).getPathTranslatedSVGProperties(E(this,be,dm).call(this),this.parentDimensions),{bbox:E(this,be,Cc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,rd)&&(w(this,rd,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){E(this,be,yb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,be,ph).call(this),E(this,be,gh).call(this,l(this,Yn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),E(this,be,yb).call(this)):t&&(this._uiManager.addShouldRescale(this),E(this,be,ph).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties({bbox:E(this,be,Cc).call(this)},l(this,Yn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,be,gh).call(this,l(this,Yn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,o){Le("Not implemented")}static startDrawing(t,r,s,i){var b;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:d}=i;if(l(te,Xo)&&l(te,Xo)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:p}=o.getBoundingClientRect(),m=w(te,Bl,new AbortController),g=t.combinedSignal(m);if(l(te,qo)||w(te,qo,u),l(te,Xo)??w(te,Xo,d),window.addEventListener("pointerup",y=>{var v;l(te,qo)===y.pointerId?this._endDraw(y):(v=l(te,Yo))==null||v.delete(y.pointerId)},{signal:g}),window.addEventListener("pointercancel",y=>{var v;l(te,qo)===y.pointerId?this._currentParent.endDrawingSession():(v=l(te,Yo))==null||v.delete(y.pointerId)},{signal:g}),window.addEventListener("pointerdown",y=>{l(te,Xo)===y.pointerType&&((l(te,Yo)||w(te,Yo,new Set)).add(y.pointerId),l(te,Tt).isCancellable()&&(l(te,Tt).removeLastElement(),l(te,Tt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Rr,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",y=>{y.timeStamp===l(te,Hl)&&ut(y)},{signal:g}),t.toggleDrawing(),(b=r._editorUndoBar)==null||b.hide(),l(te,Tt)){t.drawLayer.updateProperties(this._currentDrawId,l(te,Tt).startNew(a,c,f,p,h));return}r.updateUIForDefaultProperties(this),w(te,Tt,this.createDrawerInstance(a,c,f,p,h)),w(te,zl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(te,zl).toSVGProperties(),l(te,Tt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(w(te,Hl,-1),!l(te,Tt))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(l(te,qo)===i){if(((o=l(te,Yo))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(te,Tt).add(r,s)),w(te,Hl,t.timeStamp),ut(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,w(te,Tt,null),w(te,zl,null),w(te,Xo,null),w(te,Hl,NaN)),l(te,Bl)&&(l(te,Bl).abort(),w(te,Bl,null),w(te,qo,NaN),w(te,Yo,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,l(te,Tt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=l(te,Tt),i=this._currentDrawId,o=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:ve.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(ve.DRAW_STEP),!l(te,Tt).isEmpty()){const{pageDimensions:[s,i],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(te,Tt).getOutlines(s*o,i*o,o,this._INNER_MARGIN),drawingOptions:l(te,zl),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,o,a){Le("Not implemented")}static async deserialize(t,r,s){var h,f;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}=r.viewport,u=this.deserializeDraw(a,c,i,o,this._INNER_MARGIN,t),d=await super.deserialize(t,r,s);return d.createDrawingOptions(t),E(h=d,be,gb).call(h,{drawOutlines:u}),E(f=d,be,ph).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[r,s]=this.pageTranslation,[i,o]=this.pageDimensions;return l(this,Yn).serialize([r,s,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Yn=new WeakMap,rd=new WeakMap,Tt=new WeakMap,Bl=new WeakMap,zl=new WeakMap,qo=new WeakMap,Xo=new WeakMap,Yo=new WeakMap,Hl=new WeakMap,be=new WeakSet,gb=function({drawOutlines:t,drawId:r,drawingOptions:s}){w(this,Yn,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=E(this,be,mb).call(this,t,this.parent),E(this,be,gh).call(this,t.box)},mb=function(t,r){const{id:s}=r.drawLayer.draw(te._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},yb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},ph=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,be,mb).call(this,l(this,Yn),t)}},ck=function([t,r,s,i]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[r,1-t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},dm=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-r,t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},gh=function(t){if([this.x,this.y,this.width,this.height]=E(this,be,ck).call(this,t),this.div){this.fixAndSetPosition();const[r,s]=this.parentDimensions;this.setDims(this.width*r,this.height*s)}this._onResized()},Cc=function(){const{x:t,y:r,width:s,height:i,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(c/u),i*(u/c),s*(c/u)];case 5:return[1-r,t,s*(c/u),i*(u/c)];case 6:return[1-t-i*(u/c),1-r,i*(u/c),s*(c/u)];case 7:return[r-s*(c/u),1-t-i*(u/c),s*(c/u),i*(u/c)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(u/c),r,i*(u/c),s*(c/u)];case 13:return[1-r-s*(c/u),t-i*(u/c),s*(c/u),i*(u/c)];case 14:return[1-t,1-r-s*(c/u),i*(u/c),s*(c/u)];case 15:return[r,1-t,s*(c/u),i*(u/c)];default:return[t,r,s,i]}},G(te,"_currentDrawId",-1),G(te,"_currentParent",null),S(te,Tt,null),S(te,Bl,null),S(te,zl,null),S(te,qo,NaN),S(te,Xo,null),S(te,Yo,null),S(te,Hl,NaN),G(te,"_INNER_MARGIN",3);let sy=te;var Is,Pt,Rt,Ul,sd,un,$t,wr,Vl,Wl,Gl,id,hm;class K3{constructor(e,t,r,s,i,o){S(this,id);S(this,Is,new Float64Array(6));S(this,Pt);S(this,Rt);S(this,Ul);S(this,sd);S(this,un);S(this,$t,"");S(this,wr,0);S(this,Vl,new Xp);S(this,Wl);S(this,Gl);w(this,Wl,r),w(this,Gl,s),w(this,Ul,i),w(this,sd,o),[e,t]=E(this,id,hm).call(this,e,t);const a=w(this,Pt,[NaN,NaN,NaN,NaN,e,t]);w(this,un,[e,t]),w(this,Rt,[{line:a,points:l(this,un)}]),l(this,Is).set(a,0)}updateProperty(e,t){e==="stroke-width"&&w(this,sd,t)}isEmpty(){return!l(this,Rt)||l(this,Rt).length===0}isCancellable(){return l(this,un).length<=10}add(e,t){[e,t]=E(this,id,hm).call(this,e,t);const[r,s,i,o]=l(this,Is).subarray(2,6),a=e-i,c=t-o;return Math.hypot(l(this,Wl)*a,l(this,Gl)*c)<=2?null:(l(this,un).push(e,t),isNaN(r)?(l(this,Is).set([i,o,e,t],2),l(this,Pt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Is)[0])&&l(this,Pt).splice(6,6),l(this,Is).set([r,s,i,o,e,t],0),l(this,Pt).push(...Z.createBezierPoints(r,s,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(l(this,un).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){w(this,Wl,r),w(this,Gl,s),w(this,Ul,i),[e,t]=E(this,id,hm).call(this,e,t);const o=w(this,Pt,[NaN,NaN,NaN,NaN,e,t]);w(this,un,[e,t]);const a=l(this,Rt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,Rt).push({line:o,points:l(this,un)}),l(this,Is).set(o,0),w(this,wr,0),this.toSVGPath(),null}getLastElement(){return l(this,Rt).at(-1)}setLastElement(e){return l(this,Rt)?(l(this,Rt).push(e),w(this,Pt,e.line),w(this,un,e.points),w(this,wr,0),{path:{d:this.toSVGPath()}}):l(this,Vl).setLastElement(e)}removeLastElement(){if(!l(this,Rt))return l(this,Vl).removeLastElement();l(this,Rt).pop(),w(this,$t,"");for(let e=0,t=l(this,Rt).length;e<t;e++){const{line:r,points:s}=l(this,Rt)[e];w(this,Pt,r),w(this,un,s),w(this,wr,0),this.toSVGPath()}return{path:{d:l(this,$t)}}}toSVGPath(){const e=Z.svgRound(l(this,Pt)[4]),t=Z.svgRound(l(this,Pt)[5]);if(l(this,un).length===2)return w(this,$t,`${l(this,$t)} M ${e} ${t} Z`),l(this,$t);if(l(this,un).length<=6){const s=l(this,$t).lastIndexOf("M");w(this,$t,`${l(this,$t).slice(0,s)} M ${e} ${t}`),w(this,wr,6)}if(l(this,un).length===4){const s=Z.svgRound(l(this,Pt)[10]),i=Z.svgRound(l(this,Pt)[11]);return w(this,$t,`${l(this,$t)} L ${s} ${i}`),w(this,wr,12),l(this,$t)}const r=[];l(this,wr)===0&&(r.push(`M ${e} ${t}`),w(this,wr,6));for(let s=l(this,wr),i=l(this,Pt).length;s<i;s+=6){const[o,a,c,u,d,h]=l(this,Pt).slice(s,s+6).map(Z.svgRound);r.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}return w(this,$t,l(this,$t)+r.join(" ")),w(this,wr,l(this,Pt).length),l(this,$t)}getOutlines(e,t,r,s){const i=l(this,Rt).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),l(this,Vl).build(l(this,Rt),e,t,r,l(this,Ul),l(this,sd),s),w(this,Is,null),w(this,Pt,null),w(this,Rt,null),w(this,$t,null),l(this,Vl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Is=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,Ul=new WeakMap,sd=new WeakMap,un=new WeakMap,$t=new WeakMap,wr=new WeakMap,Vl=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,id=new WeakSet,hm=function(e,t){return Z._normalizePoint(e,t,l(this,Wl),l(this,Gl),l(this,Ul))};var dn,Lp,Np,Kn,Ds,Os,od,ad,ql,Ht,ri,uk,dk,hk;class Xp extends Z{constructor(){super(...arguments);S(this,Ht);S(this,dn);S(this,Lp,0);S(this,Np);S(this,Kn);S(this,Ds);S(this,Os);S(this,od);S(this,ad);S(this,ql)}build(t,r,s,i,o,a,c){w(this,Ds,r),w(this,Os,s),w(this,od,i),w(this,ad,o),w(this,ql,a),w(this,Np,c??0),w(this,Kn,t),E(this,Ht,dk).call(this)}get thickness(){return l(this,ql)}setLastElement(t){return l(this,Kn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Kn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of l(this,Kn)){if(t.push(`M${Z.svgRound(r[4])} ${Z.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${Z.svgRound(r[10])} ${Z.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[o,a,c,u,d,h]=r.subarray(s,s+6).map(Z.svgRound);t.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,r,s,i],o){const a=[],c=[],[u,d,h,f]=E(this,Ht,uk).call(this);let p,m,g,b,y,v,x,A,C;switch(l(this,ad)){case 0:C=Z._rescale,p=t,m=r+i,g=s,b=-i,y=t+u*s,v=r+(1-d-f)*i,x=t+(u+h)*s,A=r+(1-d)*i;break;case 90:C=Z._rescaleAndSwap,p=t,m=r,g=s,b=i,y=t+d*s,v=r+u*i,x=t+(d+f)*s,A=r+(u+h)*i;break;case 180:C=Z._rescale,p=t+s,m=r,g=-s,b=i,y=t+(1-u-h)*s,v=r+d*i,x=t+(1-u)*s,A=r+(d+f)*i;break;case 270:C=Z._rescaleAndSwap,p=t+s,m=r+i,g=-s,b=-i,y=t+(1-d-f)*s,v=r+(1-u-h)*i,x=t+(1-d)*s,A=r+(1-u)*i;break}for(const{line:T,points:P}of l(this,Kn))a.push(C(T,p,m,g,b,o?new Array(T.length):null)),c.push(C(P,p,m,g,b,o?new Array(P.length):null));return{lines:a,points:c,rect:[y,v,x,A]}}static deserialize(t,r,s,i,o,{paths:{lines:a,points:c},rotation:u,thickness:d}){const h=[];let f,p,m,g,b;switch(u){case 0:b=Z._rescale,f=-t/s,p=r/i+1,m=1/s,g=-1/i;break;case 90:b=Z._rescaleAndSwap,f=-r/i,p=-t/s,m=1/i,g=1/s;break;case 180:b=Z._rescale,f=t/s+1,p=-r/i,m=-1/s,g=1/i;break;case 270:b=Z._rescaleAndSwap,f=r/i+1,p=t/s+1,m=-1/i,g=-1/s;break}if(!a){a=[];for(const v of c){const x=v.length;if(x===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(x===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}const A=new Float32Array(3*(x-2));a.push(A);let[C,T,P,k]=v.subarray(0,4);A.set([NaN,NaN,NaN,NaN,C,T],0);for(let N=4;N<x;N+=2){const M=v[N],F=v[N+1];A.set(Z.createBezierPoints(C,T,P,k,M,F),(N-2)*3),[C,T,P,k]=[P,k,M,F]}}}for(let v=0,x=a.length;v<x;v++)h.push({line:b(a[v].map(A=>A??NaN),f,p,m,g),points:b(c[v].map(A=>A??NaN),f,p,m,g)});const y=new this.prototype.constructor;return y.build(h,s,i,1,u,d,o),y}get box(){return l(this,dn)}updateProperty(t,r){return t==="stroke-width"?E(this,Ht,hk).call(this,r):null}updateParentDimensions([t,r],s){const[i,o]=E(this,Ht,ri).call(this);w(this,Ds,t),w(this,Os,r),w(this,od,s);const[a,c]=E(this,Ht,ri).call(this),u=a-i,d=c-o,h=l(this,dn);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return w(this,Lp,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,dn).map(Z.svgRound).join(" ")}get defaultProperties(){const[t,r]=l(this,dn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=l(this,dn);let s=0,i=0,o=0,a=0,c=0,u=0;switch(l(this,Lp)){case 90:i=r/t,o=-t/r,c=t;break;case 180:s=-1,a=-1,c=t,u=r;break;case 270:i=-r/t,o=t/r,u=r;break;default:return""}return`matrix(${s} ${i} ${o} ${a} ${Z.svgRound(c)} ${Z.svgRound(u)})`}getPathResizingSVGProperties([t,r,s,i]){const[o,a]=E(this,Ht,ri).call(this),[c,u,d,h]=l(this,dn);if(Math.abs(d-o)<=Z.PRECISION||Math.abs(h-a)<=Z.PRECISION){const b=t+s/2-(c+d/2),y=r+i/2-(u+h/2);return{path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(r)}`,transform:`${this.rotationTransform} translate(${b} ${y})`}}}const f=(s-2*o)/(d-2*o),p=(i-2*a)/(h-2*a),m=d/s,g=h/i;return{path:{"transform-origin":`${Z.svgRound(c)} ${Z.svgRound(u)}`,transform:`${this.rotationTransform} scale(${m} ${g}) translate(${Z.svgRound(o)} ${Z.svgRound(a)}) scale(${f} ${p}) translate(${Z.svgRound(-o)} ${Z.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[o,a]=E(this,Ht,ri).call(this),c=l(this,dn),[u,d,h,f]=c;if(c[0]=t,c[1]=r,c[2]=s,c[3]=i,Math.abs(h-o)<=Z.PRECISION||Math.abs(f-a)<=Z.PRECISION){const y=t+s/2-(u+h/2),v=r+i/2-(d+f/2);for(const{line:x,points:A}of l(this,Kn))Z._translate(x,y,v,x),Z._translate(A,y,v,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(s-2*o)/(h-2*o),m=(i-2*a)/(f-2*a),g=-p*(u+o)+t+o,b=-m*(d+a)+r+a;if(p!==1||m!==1||g!==0||b!==0)for(const{line:y,points:v}of l(this,Kn))Z._rescale(y,g,b,p,m,y),Z._rescale(v,g,b,p,m,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,o]=s,a=l(this,dn),c=t-a[0],u=r-a[1];if(l(this,Ds)===i&&l(this,Os)===o)for(const{line:d,points:h}of l(this,Kn))Z._translate(d,c,u,d),Z._translate(h,c,u,h);else{const d=l(this,Ds)/i,h=l(this,Os)/o;w(this,Ds,i),w(this,Os,o);for(const{line:f,points:p}of l(this,Kn))Z._rescale(f,c,u,d,h,f),Z._rescale(p,c,u,d,h,p);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(t)} ${Z.svgRound(r)}`}}}get defaultSVGProperties(){const t=l(this,dn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Z.svgRound(t[0])} ${Z.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}dn=new WeakMap,Lp=new WeakMap,Np=new WeakMap,Kn=new WeakMap,Ds=new WeakMap,Os=new WeakMap,od=new WeakMap,ad=new WeakMap,ql=new WeakMap,Ht=new WeakSet,ri=function(t=l(this,ql)){const r=l(this,Np)+t/2*l(this,od);return l(this,ad)%180===0?[r/l(this,Ds),r/l(this,Os)]:[r/l(this,Os),r/l(this,Ds)]},uk=function(){const[t,r,s,i]=l(this,dn),[o,a]=E(this,Ht,ri).call(this,0);return[t+o,r+a,s-2*o,i-2*a]},dk=function(){const t=w(this,dn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of l(this,Kn)){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)re.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],a=i[5];for(let c=6,u=i.length;c<u;c+=6){const[d,h,f,p,m,g]=i.subarray(c,c+6);re.bezierBoundingBox(o,a,d,h,f,p,m,g,t),o=m,a=g}}const[r,s]=E(this,Ht,ri).call(this);t[0]=tn(t[0]-r,0,1),t[1]=tn(t[1]-s,0,1),t[2]=tn(t[2]+r,0,1),t[3]=tn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},hk=function(t){const[r,s]=E(this,Ht,ri).call(this);w(this,ql,t);const[i,o]=E(this,Ht,ri).call(this),[a,c]=[i-r,o-s],u=l(this,dn);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};class uv extends lk{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:je._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new uv(this._viewParameters);return e.updateAll(this),e}}var Ty,fk;const Bc=class Bc extends sy{constructor(t){super({...t,name:"inkEditor"});S(this,Ty);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){je.initialize(t,r),this._defaultDrawingOptions=new uv(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return me(this,"typesMap",new Map([[ve.INK_THICKNESS,"stroke-width"],[ve.INK_COLOR,"stroke"],[ve.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,o){return new K3(t,r,s,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,o,a){return Xp.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){let i=null;if(t instanceof o1){const{data:{inkLists:a,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:m},parent:{page:{pageNumber:g}}}=t;i=t={annotationType:ae.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:g-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:m}}const o=await super.deserialize(t,r,s);return o._initialData=i,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=Bc.getDefaultDrawingOptions({stroke:re.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":c}}=this,u={annotationType:ae.INK,color:je._colorManager.convert(o),opacity:a,thickness:c,paths:{lines:r,points:s},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(u.isCopy=!0,u):this.annotationElementId&&!E(this,Ty,fk).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:r,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r}),null}};Ty=new WeakSet,fk=function(t){const{color:r,thickness:s,opacity:i,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((a,c)=>a!==r[c])||t.thickness!==s||t.opacity!==i||t.pageIndex!==o},G(Bc,"_type","ink"),G(Bc,"_editorType",ae.INK),G(Bc,"_defaultDrawingOptions",null);let vb=Bc;class wb extends Xp{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const _g=8,Xd=3;var Xl,Ee,bb,Qr,pk,gk,xb,fm,mk,yk,vk,Sb,Ab,wk;class Us{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,o,a,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${r} ${s} ${h}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:m,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:y,fontBoundingBoxDescent:v,width:x}=d.measureText(e),A=1.5,C=Math.ceil(Math.max(Math.abs(p)+Math.abs(m)||0,x)*A),T=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||h,Math.abs(y)+Math.abs(v)||h)*A);u=new OffscreenCanvas(C,T),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,C,T),d.fillStyle="black",d.fillText(e,C*(A-1)/2,T*(3-A)/2);const P=E(this,Ee,Sb).call(this,d.getImageData(0,0,C,T).data),k=E(this,Ee,vk).call(this,P),N=E(this,Ee,Ab).call(this,k),M=E(this,Ee,xb).call(this,P,C,T,N);return this.processDrawnLines({lines:{curves:M,width:C,height:T},pageWidth:i,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[o,a,c]=E(this,Ee,wk).call(this,e),[u,d]=E(this,Ee,yk).call(this,o,a,c,Math.hypot(a,c)*l(this,Xl).sigmaSFactor,l(this,Xl).sigmaR,l(this,Xl).kernelSize),h=E(this,Ee,Ab).call(this,d),f=E(this,Ee,xb).call(this,u,a,c,h);return this.processDrawnLines({lines:{curves:f,width:a,height:c},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:o,areContours:a}){s%180!==0&&([t,r]=[r,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],p=Math.min(t/u,r/d),m=p/t,g=p/r,b=[];for(const{points:v}of c){const x=o?E(this,Ee,mk).call(this,v):v;if(!x)continue;b.push(x);const A=x.length,C=new Float32Array(A),T=new Float32Array(3*(A===2?2:A-2));if(f.push({line:T,points:C}),A===2){C[0]=x[0]*m,C[1]=x[1]*g,T.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[P,k,N,M]=x;P*=m,k*=g,N*=m,M*=g,C.set([P,k,N,M],0),T.set([NaN,NaN,NaN,NaN,P,k],0);for(let F=4;F<A;F+=2){const z=C[F]=x[F]*m,V=C[F+1]=x[F+1]*g;T.set(Z.createBezierPoints(P,k,N,M,z,V),(F-2)*3),[P,k,N,M]=[N,M,z,V]}}if(f.length===0)return null;const y=a?new wb:new Xp;return y.build(f,t,r,1,s,a?0:h,i),{outline:y,newCurves:b,areContours:a,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let o=1/0,a=-1/0,c=0;for(const x of e){c+=x.length;for(let A=2,C=x.length;A<C;A++){const T=x[A]-x[A-2];o=Math.min(o,T),a=Math.max(a,T)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=_g+Xd*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=s,f[p++]=i,f[p++]=t?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(const x of e)f[p++]=x.length-2,f[p++]=x[0],f[p++]=x[1];const m=new CompressionStream("deflate-raw"),g=m.writable.getWriter();await g.ready,g.write(f);const b=u.prototype.constructor;for(const x of e){const A=new b(x.length-2);for(let C=2,T=x.length;C<T;C++)A[C-2]=x[C]-x[C-2];g.write(A)}g.close();const y=await new Response(m.readable).arrayBuffer(),v=new Uint8Array(y);return yP(v)}static async decompressSignature(e){try{const t=_j(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const x of r)o||(o=new Uint8Array(new Uint32Array(x.buffer,0,4)[0])),o.set(x,a),a+=x.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,p=c[5],m=c[6],g=c[7],b=[],y=(_g+Xd*m)*Uint32Array.BYTES_PER_ELEMENT;let v;switch(g){case Int8Array.BYTES_PER_ELEMENT:v=new Int8Array(o.buffer,y);break;case Int16Array.BYTES_PER_ELEMENT:v=new Int16Array(o.buffer,y);break;case Int32Array.BYTES_PER_ELEMENT:v=new Int32Array(o.buffer,y);break}a=0;for(let x=0;x<m;x++){const A=c[Xd*x+_g],C=new Float32Array(A+2);b.push(C);for(let T=0;T<Xd-1;T++)C[T]=c[Xd*x+_g+T+1];for(let T=0;T<A;T++)C[T+2]=C[T]+v[a++]}return{areContours:f,thickness:p,outlines:b,width:d,height:h}}catch(t){return le(`decompressSignature: ${t}`),null}}}Xl=new WeakMap,Ee=new WeakSet,bb=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},Qr=new WeakMap,pk=function(e,t,r,s,i,o,a){const c=E(this,Ee,bb).call(this,r,s,i,o);for(let u=0;u<8;u++){const d=(-u+c-a+16)%8,h=l(this,Qr)[2*d],f=l(this,Qr)[2*d+1];if(e[(r+h)*t+(s+f)]!==0)return d}return-1},gk=function(e,t,r,s,i,o,a){const c=E(this,Ee,bb).call(this,r,s,i,o);for(let u=0;u<8;u++){const d=(u+c+a+16)%8,h=l(this,Qr)[2*d],f=l(this,Qr)[2*d+1];if(e[(r+h)*t+(s+f)]!==0)return d}return-1},xb=function(e,t,r,s){const i=e.length,o=new Int32Array(i);for(let d=0;d<i;d++)o[d]=e[d]<=s?1:0;for(let d=1;d<r-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*r-1-d]=0;let a=1,c;const u=[];for(let d=1;d<r-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,p=o[f];if(p===0)continue;let m=d,g=h;if(p===1&&o[f-1]===0)a+=1,g-=1;else if(p>=1&&o[f+1]===0)a+=1,g+=1,p>1&&(c=p);else{p!==1&&(c=Math.abs(p));continue}const b=[h,d],y=g===h+1,v={isHole:y,points:b,id:a,parent:0};u.push(v);let x;for(const F of u)if(F.id===c){x=F;break}x?x.isHole?v.parent=y?x.parent:c:v.parent=y?c:x.parent:v.parent=y?c:0;const A=E(this,Ee,pk).call(this,o,t,d,h,m,g,0);if(A===-1){o[f]=-a,o[f]!==1&&(c=Math.abs(o[f]));continue}let C=l(this,Qr)[2*A],T=l(this,Qr)[2*A+1];const P=d+C,k=h+T;m=P,g=k;let N=d,M=h;for(;;){const F=E(this,Ee,gk).call(this,o,t,N,M,m,g,1);C=l(this,Qr)[2*F],T=l(this,Qr)[2*F+1];const z=N+C,V=M+T;b.push(V,z);const $=N*t+M;if(o[$+1]===0?o[$]=-a:o[$]===1&&(o[$]=a),z===d&&V===h&&N===P&&M===k){o[f]!==1&&(c=Math.abs(o[f]));break}else m=N,g=M,N=z,M=V}}}return u},fm=function(e,t,r,s){if(r-t<=4){for(let P=t;P<r-2;P+=2)s.push(e[P],e[P+1]);return}const i=e[t],o=e[t+1],a=e[r-4]-i,c=e[r-3]-o,u=Math.hypot(a,c),d=a/u,h=c/u,f=d*o-h*i,p=c/a,m=1/u,g=Math.atan(p),b=Math.cos(g),y=Math.sin(g),v=m*(Math.abs(b)+Math.abs(y)),x=m*(1-v+v**2),A=Math.max(Math.atan(Math.abs(y+b)*x),Math.atan(Math.abs(y-b)*x));let C=0,T=t;for(let P=t+2;P<r-2;P+=2){const k=Math.abs(f-d*e[P+1]+h*e[P]);k>C&&(T=P,C=k)}C>(u*A)**2?(E(this,Ee,fm).call(this,e,t,T+2,s),E(this,Ee,fm).call(this,e,T,r,s)):s.push(i,o)},mk=function(e){const t=[],r=e.length;return E(this,Ee,fm).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},yk=function(e,t,r,s,i,o){const a=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let g=0;g<o;g++){const b=(g-u)**2;for(let y=0;y<o;y++)a[g*o+y]=Math.exp((b+(y-u)**2)/c)}const d=new Float32Array(256),h=-2*i**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,p=new Uint8Array(f),m=new Uint32Array(256);for(let g=0;g<r;g++)for(let b=0;b<t;b++){const y=g*t+b,v=e[y];let x=0,A=0;for(let T=0;T<o;T++){const P=g+T-u;if(!(P<0||P>=r))for(let k=0;k<o;k++){const N=b+k-u;if(N<0||N>=t)continue;const M=e[P*t+N],F=a[T*o+k]*d[Math.abs(M-v)];x+=M*F,A+=F}}const C=p[y]=Math.round(x/A);m[C]++}return[p,m]},vk=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},Sb=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let a=0,c=r.length;a<c;a++){if(e[(a<<2)+3]===0){s=r[a]=255;continue}const d=r[a]=e[a<<2];d>s&&(s=d),d<i&&(i=d)}const o=255/(s-i);for(let a=0;a<t;a++)r[a]=(r[a]-i)*o;return r},Ab=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(c=>c!==0);let o=i,a=i;for(t=i;t<256;t++){const c=e[t];c>r&&(t-o>s&&(s=t-o,a=t-1),r=c,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},wk=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=l(this,Xl);let o=r,a=s;if(r>i||s>i){let f=r,p=s,m=Math.log2(Math.max(r,s)/i);const g=Math.floor(m);m=m===g?g-1:g;for(let y=0;y<m;y++){o=Math.ceil(f/2),a=Math.ceil(p/2);const v=new OffscreenCanvas(o,a);v.getContext("2d").drawImage(e,0,0,f,p,0,0,o,a),f=o,p=a,e!==t&&e.close(),e=v.transferToImageBitmap()}const b=Math.min(i/o,i/a);o=Math.round(o*b),a=Math.round(a*b)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=u.getImageData(0,0,o,a).data;return[E(this,Ee,Sb).call(this,d),o,a]},S(Us,Ee),S(Us,Xl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(Us,Qr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class l1 extends lk{constructor(){super(),super.updateProperties({fill:je._defaultLineColor,"stroke-width":0})}clone(){const e=new l1;return e.updateAll(this),e}}class c1 extends uv{constructor(e){super(e),super.updateProperties({stroke:je._defaultLineColor,"stroke-width":1})}clone(){const e=new c1(this._viewParameters);return e.updateAll(this),e}}var Ko,Fs,Qo,Yl;const jn=class jn extends sy{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});S(this,Ko,!1);S(this,Fs,null);S(this,Qo,null);S(this,Yl,null);this._willKeepAspectRatio=!0,w(this,Qo,t.signatureData||null),w(this,Fs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){je.initialize(t,r),this._defaultDrawingOptions=new l1,this._defaultDrawnSignatureOptions=new c1(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return me(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Fs)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(l(this,Qo)){const{lines:i,mustSmooth:o,areContours:a,description:c,uuid:u,heightInPage:d}=l(this,Qo),{rawDims:{pageWidth:h,pageHeight:f},rotation:p}=this.parent.viewport,m=Us.processDrawnLines({lines:i,pageWidth:h,pageHeight:f,rotation:p,innerMargin:jn._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(m,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){w(this,Yl,t),this.addEditToolbar()}getUuid(){return l(this,Yl)}get description(){return l(this,Fs)}set description(t){w(this,Fs,t),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)})}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:o}=l(this,Qo),a=Math.max(i,o),c=Us.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:s,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:o,y:a}=this,{outline:c}=w(this,Qo,t);w(this,Ko,c instanceof wb),this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let u;l(this,Ko)?u=jn.getDefaultDrawingOptions():(u=jn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[d,h]=this.parentDimensions,[,f]=this.pageDimensions;let p=r/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(d*this.width,h*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Us.process(t,r,s,i,jn._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:o}=this.parent.viewport;return Us.extractContoursFromText(t,r,s,i,o,jn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return Us.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:jn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=jn.getDefaultDrawingOptions():(this._drawingOptions=jn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:ae.SIGNATURE,isSignature:!0,areContours:l(this,Ko),color:[0,0,0],thickness:l(this,Ko)?0:o,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?(a.paths={lines:r,points:s},a.uuid=l(this,Yl),a.isCopy=!0):a.lines=r,l(this,Fs)&&(a.accessibilityData={type:"Figure",alt:l(this,Fs)}),a}static deserializeDraw(t,r,s,i,o,a){return a.areContours?wb.deserialize(t,r,s,i,o,a):Xp.deserialize(t,r,s,i,o,a)}static async deserialize(t,r,s){var o;const i=await super.deserialize(t,r,s);return w(i,Ko,t.areContours),w(i,Fs,((o=t.accessibilityData)==null?void 0:o.alt)||""),w(i,Yl,t.uuid),i}};Ko=new WeakMap,Fs=new WeakMap,Qo=new WeakMap,Yl=new WeakMap,G(jn,"_type","signature"),G(jn,"_editorType",ae.SIGNATURE),G(jn,"_defaultDrawingOptions",null);let Eb=jn;var Ge,kt,Jo,Ii,Zo,ld,Di,Kl,js,Qn,cd,xe,mh,yh,pm,gm,mm,_b,ym,bk;class Cb extends je{constructor(t){super({...t,name:"stampEditor"});S(this,xe);S(this,Ge,null);S(this,kt,null);S(this,Jo,null);S(this,Ii,null);S(this,Zo,null);S(this,ld,"");S(this,Di,null);S(this,Kl,!1);S(this,js,null);S(this,Qn,!1);S(this,cd,!1);w(this,Ii,t.bitmapUrl),w(this,Zo,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){je.initialize(t,r)}static isHandlingMimeForPasting(t){return ey.includes(t)}static paste(t,r){r.pasteEditor({mode:ae.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,kt)&&(w(this,Ge,null),this._uiManager.imageManager.deleteId(l(this,kt)),(t=l(this,Di))==null||t.remove(),w(this,Di,null),l(this,js)&&(clearTimeout(l(this,js)),w(this,js,null))),super.remove()}rebuild(){if(!this.parent){l(this,kt)&&E(this,xe,pm).call(this);return}super.rebuild(),this.div!==null&&(l(this,kt)&&l(this,Di)===null&&E(this,xe,pm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,Jo)||l(this,Ge)||l(this,Ii)||l(this,Zo)||l(this,kt)||l(this,Kl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Kl)||(l(this,Ge)?E(this,xe,gm).call(this):E(this,xe,pm).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(w(this,kt,s),i&&w(this,Ge,i),w(this,Kl,!1),E(this,xe,gm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,js)!==null&&clearTimeout(l(this,js)),w(this,js,setTimeout(()=>{w(this,js,null),E(this,xe,_b).call(this)},200))}copyCanvas(t,r,s=!1){var p;t||(t=224);const{width:i,height:o}=l(this,Ge),a=new ls;let c=l(this,Ge),u=i,d=o,h=null;if(r){if(i>r||o>r){const k=Math.min(r/i,r/o);u=Math.floor(i*k),d=Math.floor(o*k)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*a.sx),g=h.height=Math.ceil(d*a.sy);l(this,Qn)||(c=E(this,xe,mm).call(this,m,g));const b=h.getContext("2d");b.filter=this._uiManager.hcmFilter;let y="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",v="#42414d");const x=15,A=x*a.sx,C=x*a.sy,T=new OffscreenCanvas(A*2,C*2),P=T.getContext("2d");P.fillStyle=y,P.fillRect(0,0,A*2,C*2),P.fillStyle=v,P.fillRect(0,0,A,C),P.fillRect(A,C,A,C),b.fillStyle=b.createPattern(T,"repeat"),b.fillRect(0,0,m,g),b.drawImage(c,0,0,c.width,c.height,0,0,m,g)}let f=null;if(s){let m,g;if(a.symmetric&&c.width<t&&c.height<t)m=c.width,g=c.height;else if(c=l(this,Ge),i>t||o>t){const v=Math.min(t/i,t/o);m=Math.floor(i*v),g=Math.floor(o*v),l(this,Qn)||(c=E(this,xe,mm).call(this,m,g))}const y=new OffscreenCanvas(m,g).getContext("2d",{willReadFrequently:!0});y.drawImage(c,0,0,c.width,c.height,0,0,m,g),f={width:m,height:g,data:y.getImageData(0,0,m,g).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,r,s){var b;let i=null,o=!1;if(t instanceof DR){const{data:{rect:y,rotation:v,id:x,structParent:A,popupRef:C},container:T,parent:{page:{pageNumber:P}},canvas:k}=t;let N,M;k?(delete t.canvas,{id:N,bitmap:M}=s.imageManager.getFromCanvas(T.id,k),k.remove()):(o=!0,t._hasNoCanvas=!0);const F=((b=await r._structTree.getAriaAttributes(`${Qx}${x}`))==null?void 0:b.get("aria-label"))||"";i=t={annotationType:ae.STAMP,bitmapId:N,bitmap:M,pageIndex:P-1,rect:y.slice(0),rotation:v,annotationElementId:x,id:x,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:A,popupRef:C}}const a=await super.deserialize(t,r,s),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=t;o?(s.addMissingCanvas(t.id,a),w(a,Kl,!0)):h&&s.imageManager.isValidId(h)?(w(a,kt,h),u&&w(a,Ge,u)):w(a,Ii,d),w(a,Qn,f);const[m,g]=a.pageDimensions;return a.width=(c[2]-c[0])/m,a.height=(c[3]-c[1])/g,p&&(a.altTextData=p),a._initialData=i,w(a,cd,!!i),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:ae.STAMP,bitmapId:l(this,kt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,Qn),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=E(this,xe,ym).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=E(this,xe,bk).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,r===null)return s;r.stamps||(r.stamps=new Map);const a=l(this,Qn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(l(this,kt)))r.stamps.set(l(this,kt),{area:a,serialized:s}),s.bitmap=E(this,xe,ym).call(this,!1);else if(l(this,Qn)){const c=r.stamps.get(l(this,kt));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=E(this,xe,ym).call(this,!1))}return s}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}}Ge=new WeakMap,kt=new WeakMap,Jo=new WeakMap,Ii=new WeakMap,Zo=new WeakMap,ld=new WeakMap,Di=new WeakMap,Kl=new WeakMap,js=new WeakMap,Qn=new WeakMap,cd=new WeakMap,xe=new WeakSet,mh=function(t,r=!1){if(!t){this.remove();return}w(this,Ge,t.bitmap),r||(w(this,kt,t.id),w(this,Qn,t.isSvg)),t.file&&w(this,ld,t.file.name),E(this,xe,gm).call(this)},yh=function(){if(w(this,Jo,null),this._uiManager.enableWaiting(!1),!!l(this,Di)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ge)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ge)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},pm=function(){if(l(this,kt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,kt)).then(s=>E(this,xe,mh).call(this,s,!0)).finally(()=>E(this,xe,yh).call(this));return}if(l(this,Ii)){const s=l(this,Ii);w(this,Ii,null),this._uiManager.enableWaiting(!0),w(this,Jo,this._uiManager.imageManager.getFromUrl(s).then(i=>E(this,xe,mh).call(this,i)).finally(()=>E(this,xe,yh).call(this)));return}if(l(this,Zo)){const s=l(this,Zo);w(this,Zo,null),this._uiManager.enableWaiting(!0),w(this,Jo,this._uiManager.imageManager.getFromFile(s).then(i=>E(this,xe,mh).call(this,i)).finally(()=>E(this,xe,yh).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=ey.join(",");const r=this._uiManager._signal;w(this,Jo,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,xe,mh).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>E(this,xe,yh).call(this))),t.click()},gm=function(){var h;const{div:t}=this;let{width:r,height:s}=l(this,Ge);const[i,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*i,s=this.height*o;else if(r>a*i||s>a*o){const f=Math.min(a*i/r,a*o/s);r*=f,s*=f}const[c,u]=this.parentDimensions;this.setDims(r*c/i,s*u/o),this._uiManager.enableWaiting(!1);const d=w(this,Di,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=r/i,this.height=s/o,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,xe,_b).call(this),l(this,cd)||(this.parent.addUndoableEditor(this),w(this,cd,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,ld)&&this.div.setAttribute("aria-description",l(this,ld)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},mm=function(t,r){const{width:s,height:i}=l(this,Ge);let o=s,a=i,c=l(this,Ge);for(;o>2*t||a>2*r;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,a),c=h.transferToImageBitmap()}return c},_b=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,o=new ls,a=Math.ceil(s*t*o.sx),c=Math.ceil(i*r*o.sy),u=l(this,Di);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const d=l(this,Qn)?l(this,Ge):E(this,xe,mm).call(this,a,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,c)},ym=function(t){if(t){if(l(this,Qn)){const i=this._uiManager.imageManager.getSvgUrl(l(this,kt));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=l(this,Ge),r.getContext("2d").drawImage(l(this,Ge),0,0),r.toDataURL()}if(l(this,Qn)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*Ji.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Ji.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(l(this,Ge),0,0,l(this,Ge).width,l(this,Ge).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(l(this,Ge))},bk=function(t){var a;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},G(Cb,"_type","stamp"),G(Cb,"_editorType",ae.STAMP);var Ql,ud,$s,ea,Oi,Jn,ta,dd,Jl,Jr,Fi,Lt,ji,na,hd,ne,ra,qe,xk,vs,Tb,Pb,vm;const Fr=class Fr{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:d}){S(this,qe);S(this,Ql);S(this,ud,!1);S(this,$s,null);S(this,ea,null);S(this,Oi,null);S(this,Jn,new Map);S(this,ta,!1);S(this,dd,!1);S(this,Jl,!1);S(this,Jr,null);S(this,Fi,null);S(this,Lt,null);S(this,ji,null);S(this,na,null);S(this,hd,-1);S(this,ne);const h=[...l(Fr,ra).values()];if(!Fr._initialized){Fr._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),w(this,ne,e),this.pageIndex=t,this.div=r,w(this,Ql,i),w(this,$s,o),this.viewport=u,w(this,Lt,c),this.drawLayer=a,this._structTree=s,l(this,ne).addLayer(this)}get isEmpty(){return l(this,Jn).size===0}get isInvisible(){return this.isEmpty&&l(this,ne).getMode()===ae.NONE}updateToolbar(e){l(this,ne).updateToolbar(e)}updateMode(e=l(this,ne).getMode()){switch(E(this,qe,vm).call(this),e){case ae.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ae.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const r of l(Fr,ra).values())t.toggle(`${r._type}Editing`,e===r._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Lt))==null?void 0:t.div)}setEditingState(e){l(this,ne).setEditingState(e)}addCommands(e){l(this,ne).addCommands(e)}cleanUndoStack(e){l(this,ne).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,$s))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;w(this,Jl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(r=l(this,na))==null||r.abort(),w(this,na,null);const e=new Set;for(const s of l(this,Jn).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,ne).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!l(this,$s)){w(this,Jl,!1);return}const t=l(this,$s).getEditableAnnotations();for(const s of t){if(s.hide(),l(this,ne).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}w(this,Jl,!1)}disable(){var s;if(w(this,dd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),l(this,Lt)&&!l(this,na)){w(this,na,new AbortController);const i=l(this,ne).combinedSignal(l(this,na));l(this,Lt).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:u,timeStamp:d}=o,h=l(this,hd);if(d-h>500){w(this,hd,d);return}w(this,hd,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(c,u);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let m;const g=new RegExp(`^${hP}[0-9]+$`);for(const y of p)if(g.test(y.id)){m=y.id;break}if(!m)return;const b=l(this,Jn).get(m);(b==null?void 0:b.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),b.dblclick())},{signal:i,capture:!0})}const e=new Map,t=new Map;for(const i of l(this,Jn).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(l(this,$s)){const i=l(this,$s).getEditableAnnotations();for(const o of i){const{id:a}=o.data;if(l(this,ne).isDeletedAnnotationElement(a))continue;let c=t.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=e.get(a),c&&(l(this,ne).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}E(this,qe,vm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of l(Fr,ra).values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,dd,!1)}getEditableAnnotation(e){var t;return((t=l(this,$s))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,ne).getActive()!==e&&l(this,ne).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Lt))!=null&&e.div&&!l(this,ji)){w(this,ji,new AbortController);const t=l(this,ne).combinedSignal(l(this,ji));l(this,Lt).div.addEventListener("pointerdown",E(this,qe,xk).bind(this),{signal:t}),l(this,Lt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Lt))!=null&&e.div&&l(this,ji)&&(l(this,ji).abort(),w(this,ji,null),l(this,Lt).div.classList.remove("highlighting"))}enableClick(){if(l(this,ea))return;w(this,ea,new AbortController);const e=l(this,ne).combinedSignal(l(this,ea));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,ea))==null||e.abort(),w(this,ea,null)}attach(e){l(this,Jn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,ne).isDeletedAnnotationElement(t)&&l(this,ne).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Jn).delete(e.id),(t=l(this,Ql))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,dd)&&e.annotationElementId&&l(this,ne).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ne).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ne).addDeletedAnnotationElement(e.annotationElementId),je.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ne).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,Jl)),l(this,ne).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,Oi)&&(e._focusEventsAllowed=!1,w(this,Oi,setTimeout(()=>{w(this,Oi,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ne)._signal}),t.focus())},0))),e._structTreeParentId=(r=l(this,Ql))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getNextId(){return l(this,ne).getId()}combinedSignal(e){return l(this,ne).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,qe,vs))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,ne).updateMode(e.mode);const{offsetX:r,offsetY:s}=E(this,qe,Pb).call(this),i=this.getNextId(),o=E(this,qe,Tb).call(this,{parent:this,id:i,x:r,y:s,uiManager:l(this,ne),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(Fr,ra).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,ne)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=E(this,qe,Tb).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:l(this,ne),isCentered:t,...r});return i&&this.add(i),i}addNewEditor(e={}){this.createAndAddNewEditor(E(this,qe,Pb).call(this),!0,e)}setSelected(e){l(this,ne).setSelected(e)}toggleSelected(e){l(this,ne).toggleSelected(e)}unselect(e){l(this,ne).unselect(e)}pointerup(e){var s;const{isMac:t}=It.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,ta)||(w(this,ta,!1),(s=l(this,qe,vs))!=null&&s.isDrawer&&l(this,qe,vs).supportMultipleDrawings))return;if(!l(this,ud)){w(this,ud,!0);return}const r=l(this,ne).getMode();if(r===ae.STAMP||r===ae.SIGNATURE){l(this,ne).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(l(this,ne).getMode()===ae.HIGHLIGHT&&this.enableTextSelection(),l(this,ta)){w(this,ta,!1);return}const{isMac:t}=It.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(w(this,ta,!0),(s=l(this,qe,vs))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=l(this,ne).getActive();w(this,ud,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,Jr)){l(this,qe,vs).startDrawing(this,l(this,ne),!1,e);return}l(this,ne).setCurrentDrawingSession(this),w(this,Jr,new AbortController);const t=l(this,ne).combinedSignal(l(this,Jr));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(w(this,Fi,null),this.commitOrRemove())},{signal:t}),l(this,qe,vs).startDrawing(this,l(this,ne),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&w(this,Fi,t);return}l(this,Fi)&&setTimeout(()=>{var t;(t=l(this,Fi))==null||t.focus(),w(this,Fi,null)},0)}endDrawingSession(e=!1){return l(this,Jr)?(l(this,ne).setCurrentDrawingSession(null),l(this,Jr).abort(),w(this,Jr,null),w(this,Fi,null),l(this,qe,vs).endDrawing(e)):null}findNewParent(e,t,r){const s=l(this,ne).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return l(this,Jr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Jr)&&l(this,qe,vs).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,ne).getActive())==null?void 0:e.parent)===this&&(l(this,ne).commitOrRemove(),l(this,ne).setActiveEditor(null)),l(this,Oi)&&(clearTimeout(l(this,Oi)),w(this,Oi,null));for(const r of l(this,Jn).values())(t=l(this,Ql))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,l(this,Jn).clear(),l(this,ne).removeLayer(this)}render({viewport:e}){this.viewport=e,wa(this.div,e);for(const t of l(this,ne).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ne).commitOrRemove(),E(this,qe,vm).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,wa(this.div,{rotation:r}),t!==r)for(const s of l(this,Jn).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ne).viewParameters.realScale}};Ql=new WeakMap,ud=new WeakMap,$s=new WeakMap,ea=new WeakMap,Oi=new WeakMap,Jn=new WeakMap,ta=new WeakMap,dd=new WeakMap,Jl=new WeakMap,Jr=new WeakMap,Fi=new WeakMap,Lt=new WeakMap,ji=new WeakMap,na=new WeakMap,hd=new WeakMap,ne=new WeakMap,ra=new WeakMap,qe=new WeakSet,xk=function(e){l(this,ne).unselectAll();const{target:t}=e;if(t===l(this,Lt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Lt).div.contains(t)){const{isMac:r}=It.platform;if(e.button!==0||e.ctrlKey&&r)return;l(this,ne).showAllEditors("highlight",!0,!0),l(this,Lt).div.classList.add("free"),this.toggleDrawing(),ry.startHighlighting(this,l(this,ne).direction==="ltr",{target:l(this,Lt).div,x:e.x,y:e.y}),l(this,Lt).div.addEventListener("pointerup",()=>{l(this,Lt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ne)._signal}),e.preventDefault()}},vs=function(){return l(Fr,ra).get(l(this,ne).getMode())},Tb=function(e){const t=l(this,qe,vs);return t?new t.prototype.constructor(e):null},Pb=function(){const{x:e,y:t,width:r,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,t+s),u=(i+a)/2-e,d=(o+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},vm=function(){for(const e of l(this,Jn).values())e.isEmpty()&&e.remove()},G(Fr,"_initialized",!1),S(Fr,ra,new Map([ib,vb,Cb,ry,Eb].map(e=>[e._editorType,e])));let iy=Fr;var Zr,hn,Zl,Mp,Py,Sk,Ys,Rb,Ak,kb;const vt=class vt{constructor({pageIndex:e}){S(this,Ys);S(this,Zr,null);S(this,hn,new Map);S(this,Zl,new Map);this.pageIndex=e}setParent(e){if(!l(this,Zr)){w(this,Zr,e);return}if(l(this,Zr)!==e){if(l(this,hn).size>0)for(const t of l(this,hn).values())t.remove(),e.append(t);w(this,Zr,e)}}static get _svgFactory(){return me(this,"_svgFactory",new tf)}draw(e,t=!1,r=!1){const s=Et(vt,Mp)._++,i=E(this,Ys,Rb).call(this),o=vt._svgFactory.createElement("defs");i.append(o);const a=vt._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,Zl).set(s,a);const u=r?E(this,Ys,Ak).call(this,o,c):null,d=vt._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(i,e),l(this,hn).set(s,i),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=Et(vt,Mp)._++,s=E(this,Ys,Rb).call(this),i=vt._svgFactory.createElement("defs");s.append(i);const o=vt._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=vt._svgFactory.createElement("mask");i.append(h),c=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=vt._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=vt._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=vt._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return s.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,e),l(this,hn).set(r,s),r}finalizeDraw(e,t){l(this,Zl).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:r,bbox:s,rootClass:i,path:o}=t,a=typeof e=="number"?l(this,hn).get(e):e;if(a){if(r&&E(this,Ys,kb).call(this,a,r),s&&E(c=vt,Py,Sk).call(c,a,s),i){const{classList:u}=a;for(const[d,h]of Object.entries(i))u.toggle(d,h)}if(o){const d=a.firstChild.firstChild;E(this,Ys,kb).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const r=l(this,hn).get(e);r&&(l(t,Zr).append(r),l(this,hn).delete(e),l(t,hn).set(e,r))}remove(e){l(this,Zl).delete(e),l(this,Zr)!==null&&(l(this,hn).get(e).remove(),l(this,hn).delete(e))}destroy(){w(this,Zr,null);for(const e of l(this,hn).values())e.remove();l(this,hn).clear(),l(this,Zl).clear()}};Zr=new WeakMap,hn=new WeakMap,Zl=new WeakMap,Mp=new WeakMap,Py=new WeakSet,Sk=function(e,[t,r,s,i]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},Ys=new WeakSet,Rb=function(){const e=vt._svgFactory.create(1,1,!0);return l(this,Zr).append(e),e.setAttribute("aria-hidden",!0),e},Ak=function(e,t){const r=vt._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=vt._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},kb=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},S(vt,Py),S(vt,Mp,0);let oy=vt;globalThis._pdfjsTestingUtils={HighlightOutliner:ab};globalThis.pdfjsLib={AbortException:Qi,AnnotationEditorLayer:iy,AnnotationEditorParamsType:ve,AnnotationEditorType:ae,AnnotationEditorUIManager:ba,AnnotationLayer:a1,AnnotationMode:Hs,AnnotationType:at,build:AR,ColorPicker:nf,createValidAbsoluteUrl:Xx,DOMSVGFactory:tf,DrawLayer:oy,FeatureTest:It,fetchData:Md,getDocument:n1,getFilenameFromUrl:vP,getPdfFilenameFromUrl:wP,getUuid:Kx,getXfaPageViewport:bP,GlobalWorkerOptions:Sr,ImageKind:Ph,InvalidPDFException:Zm,isDataScheme:Wp,isPdfFile:av,isValidExplicitDest:eR,MathClamp:tn,noContextMenu:Rr,normalizeUnicode:mP,OPS:Kh,OutputScale:ls,PasswordResponses:pP,PDFDataRangeTransport:r1,PDFDateString:lv,PDFWorker:Sd,PermissionFlag:fP,PixelsPerInch:Ji,RenderingCancelledException:ov,ResponseException:Qh,setLayerDimensions:wa,shadow:me,SignatureExtractor:Us,stopEvent:ut,SupportedImageMimeTypes:ey,TextLayer:Zh,TouchManager:Jh,updateUrlHash:Yx,Util:re,VerbosityLevel:Hp,version:s1,XfaLayer:i1};const Q3=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Qi,AnnotationEditorLayer:iy,AnnotationEditorParamsType:ve,AnnotationEditorType:ae,AnnotationEditorUIManager:ba,AnnotationLayer:a1,AnnotationMode:Hs,AnnotationType:at,ColorPicker:nf,DOMSVGFactory:tf,DrawLayer:oy,FeatureTest:It,GlobalWorkerOptions:Sr,ImageKind:Ph,InvalidPDFException:Zm,MathClamp:tn,OPS:Kh,OutputScale:ls,PDFDataRangeTransport:r1,PDFDateString:lv,PDFWorker:Sd,PasswordResponses:pP,PermissionFlag:fP,PixelsPerInch:Ji,RenderingCancelledException:ov,ResponseException:Qh,SignatureExtractor:Us,SupportedImageMimeTypes:ey,TextLayer:Zh,TouchManager:Jh,Util:re,VerbosityLevel:Hp,XfaLayer:i1,build:AR,createValidAbsoluteUrl:Xx,fetchData:Md,getDocument:n1,getFilenameFromUrl:vP,getPdfFilenameFromUrl:wP,getUuid:Kx,getXfaPageViewport:bP,isDataScheme:Wp,isPdfFile:av,isValidExplicitDest:eR,noContextMenu:Rr,normalizeUnicode:mP,setLayerDimensions:wa,shadow:me,stopEvent:ut,updateUrlHash:Yx,version:s1},Symbol.toStringTag,{value:"Module"}));var zA=Object.prototype.hasOwnProperty;function HA(n,e,t){for(t of n.keys())if(Qc(t,e))return t}function Qc(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&Qc(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=HA(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=HA(e,s),!s)||!Qc(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(zA.call(n,t)&&++r&&!zA.call(e,t)||!(t in e)||!Qc(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function Yp(n){let e=!1;return{promise:new Promise((r,s)=>{n.then(i=>!e&&r(i)).catch(i=>!e&&s(i))}),cancel(){e=!0}}}const J3=["onCopy","onCut","onPaste"],Z3=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],e$=["onFocus","onBlur"],t$=["onInput","onInvalid","onReset","onSubmit"],n$=["onLoad","onError"],r$=["onKeyDown","onKeyPress","onKeyUp"],s$=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],i$=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],o$=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],a$=["onSelect"],l$=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],c$=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],u$=["onScroll"],d$=["onWheel"],h$=["onAnimationStart","onAnimationEnd","onAnimationIteration"],f$=["onTransitionEnd"],p$=["onToggle"],g$=["onChange"],m$=[...J3,...Z3,...e$,...t$,...n$,...r$,...s$,...i$,...o$,...a$,...l$,...c$,...u$,...d$,...h$,...f$,...g$,...p$];function Ek(n,e){const t={};for(const r of m$){const s=n[r];s&&(e?t[r]=i=>s(i,e(r)):t[r]=s)}return t}var y$="Invariant failed";function Me(n,e){if(!n)throw new Error(y$)}var v$=function(){},w$=v$;const rn=Ib(w$),Ck=_.createContext(null),b$="noopener noreferrer nofollow";class x${constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Me(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Me(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Me(this.pdfDocument),Me(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Me(Array.isArray(t));const r=t[0];new Promise(s=>{Me(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(i=>{s(i)}).catch(()=>{Me(!1)}):typeof r=="number"?s(r):Me(!1)}).then(s=>{const i=s+1;Me(this.pdfViewer),Me(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Me(this.pdfViewer),Me(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||b$,e.target=r?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}function Jc({children:n,type:e}){return R.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const UA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function S$(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Ad(){return _.useReducer(S$,{value:void 0,error:void 0})}const dv=typeof window<"u",_k=dv&&window.location.protocol==="file:";function A$(n){return typeof n<"u"}function Pa(n){return A$(n)&&n!==null}function E$(n){return typeof n=="string"}function C$(n){return n instanceof ArrayBuffer}function _$(n){return Me(dv),n instanceof Blob}function Lb(n){return E$(n)&&/^data:/.test(n)}function VA(n){Me(Lb(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function T$(){return dv&&window.devicePixelRatio||1}const Tk="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function WA(){rn(!_k,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Tk}`)}function P$(){rn(!_k,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Tk}`)}function uc(n){n!=null&&n.cancel&&n.cancel()}function Nb(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function R$(n){return n.name==="RenderingCancelledException"}function k$(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:L$}=Q3,N$=(n,e)=>{switch(e){case UA.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case UA.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function GA(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const qA=_.forwardRef(function({children:e,className:t,error:r="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:i,file:o,inputRef:a,imageResourcesPath:c,loading:u="Loading PDF",noData:d="No PDF file specified.",onItemClick:h,onLoadError:f,onLoadProgress:p,onLoadSuccess:m,onPassword:g=N$,onSourceError:b,onSourceSuccess:y,options:v,renderMode:x,rotate:A,scale:C,...T},P){const[k,N]=Ad(),{value:M,error:F}=k,[z,V]=Ad(),{value:$,error:Y}=z,B=_.useRef(new x$),O=_.useRef([]),D=_.useRef(void 0),L=_.useRef(void 0);o&&o!==D.current&&GA(o)&&(rn(!Qc(o,D.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),D.current=o),v&&v!==L.current&&(rn(!Qc(v,L.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),L.current=v);const I=_.useRef({scrollPageIntoView:he=>{const{dest:Ce,pageNumber:Ye,pageIndex:Ke=Ye-1}=he;if(h){h({dest:Ce,pageIndex:Ke,pageNumber:Ye});return}const us=O.current[Ke];if(us){us.scrollIntoView();return}rn(!1,`An internal link leading to page ${Ye} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});_.useImperativeHandle(P,()=>({linkService:B,pages:O,viewer:I}),[]);function j(){y&&y()}function H(){F&&(rn(!1,F.toString()),b&&b(F))}function U(){N({type:"RESET"})}_.useEffect(U,[o,N]);const q=_.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return Lb(o)?{data:VA(o)}:(WA(),{url:o});if(o instanceof L$)return{range:o};if(C$(o))return{data:o};if(dv&&_$(o))return{data:await k$(o)};if(Me(typeof o=="object"),Me(GA(o)),"url"in o&&typeof o.url=="string"){if(Lb(o.url)){const{url:he,...Ce}=o;return{data:VA(he),...Ce}}WA()}return o},[o]);_.useEffect(()=>{const he=Yp(q());return he.promise.then(Ce=>{N({type:"RESOLVE",value:Ce})}).catch(Ce=>{N({type:"REJECT",error:Ce})}),()=>{uc(he)}},[q,N]),_.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){H();return}j()}},[M]);function se(){$&&(m&&m($),O.current=new Array($.numPages),B.current.setDocument($))}function oe(){Y&&(rn(!1,Y.toString()),f&&f(Y))}_.useEffect(function(){V({type:"RESET"})},[V,M]),_.useEffect(function(){if(!M)return;const Ce=v?{...M,...v}:M,Ye=n1(Ce);p&&(Ye.onProgress=p),g&&(Ye.onPassword=g);const Ke=Ye,us=Ke.promise.then(Lr=>{V({type:"RESOLVE",value:Lr})}).catch(Lr=>{Ke.destroyed||V({type:"REJECT",error:Lr})});return()=>{us.finally(()=>Ke.destroy())}},[v,V,M]),_.useEffect(()=>{if(!(typeof $>"u")){if($===!1){oe();return}se()}},[$]),_.useEffect(function(){B.current.setViewer(I.current),B.current.setExternalLinkRel(s),B.current.setExternalLinkTarget(i)},[s,i]);const Q=_.useCallback((he,Ce)=>{O.current[he]=Ce},[]),Se=_.useCallback(he=>{delete O.current[he]},[]),He=_.useMemo(()=>({imageResourcesPath:c,linkService:B.current,onItemClick:h,pdf:$,registerPage:Q,renderMode:x,rotate:A,scale:C,unregisterPage:Se}),[c,h,$,Q,x,A,C,Se]),ge=_.useMemo(()=>Ek(T,()=>$),[T,$]);function Ie(){function he(Ye){return!!(Ye!=null&&Ye.pdf)}if(!he(He))throw new Error("pdf is undefined");const Ce=typeof e=="function"?e(He):e;return R.jsx(Ck.Provider,{value:He,children:Ce})}function Gt(){return o?$==null?R.jsx(Jc,{type:"loading",children:typeof u=="function"?u():u}):$===!1?R.jsx(Jc,{type:"error",children:typeof r=="function"?r():r}):Ie():R.jsx(Jc,{type:"no-data",children:typeof d=="function"?d():d})}return R.jsx("div",{className:Rd("react-pdf__Document",t),ref:a,...ge,children:Gt()})});function Pk(){return _.useContext(Ck)}function Rk(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(i){for(var o=0,a=t;o<a.length;o++){var c=a[o];typeof c=="function"?c(i):c&&(c.current=i)}}}const kk=_.createContext(null);function hv(){return _.useContext(kk)}function M$(){const n=Pk(),e=hv();Me(e);const t={...n,...e},{imageResourcesPath:r,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:c,page:u,pdf:d,renderForms:h,rotate:f,scale:p=1}=t;Me(d),Me(u),Me(s);const[m,g]=Ad(),{value:b,error:y}=m,v=_.useRef(null);rn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function x(){b&&o&&o(b)}function A(){y&&(rn(!1,y.toString()),i&&i(y))}_.useEffect(function(){g({type:"RESET"})},[g,u]),_.useEffect(function(){if(!u)return;const N=Yp(u.getAnnotations()),M=N;return N.promise.then(F=>{g({type:"RESOLVE",value:F})}).catch(F=>{g({type:"REJECT",error:F})}),()=>{uc(M)}},[g,u]),_.useEffect(()=>{if(b!==void 0){if(b===!1){A();return}x()}},[b]);function C(){c&&c()}function T(k){rn(!1,`${k}`),a&&a(k)}const P=_.useMemo(()=>u.getViewport({scale:p,rotation:f}),[u,f,p]);return _.useEffect(function(){if(!d||!u||!s||!b)return;const{current:N}=v;if(!N)return;const M=P.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:N,l10n:null,page:u,structTreeLayer:null,viewport:M},z={annotations:b,annotationStorage:d.annotationStorage,div:N,imageResourcesPath:r,linkService:s,page:u,renderForms:h,viewport:M};N.innerHTML="";try{new a1(F).render(z),C()}catch(V){T(V)}return()=>{}},[b,r,s,u,d,h,P]),R.jsx("div",{className:Rd("react-pdf__Page__annotations","annotationLayer"),ref:v})}const Lk={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},I$=/^H(\d+)$/;function D$(n){return n in Lk}function fv(n){return"children"in n}function Nk(n){return fv(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function O$(n){const e={};if(fv(n)){const{role:t}=n,r=t.match(I$);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(D$(t)){const s=Lk[t];s&&(e.role=s)}}return e}function Mk(n){const e={};if(fv(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),Nk(n)){const[t]=n.children;if(t){const r=Mk(t);return{...e,...r}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function F$(n){return n?{...O$(n),...Mk(n)}:null}function Ik({className:n,node:e}){const t=_.useMemo(()=>F$(e),[e]),r=_.useMemo(()=>!fv(e)||Nk(e)?null:e.children.map((s,i)=>R.jsx(Ik,{node:s},i)),[e]);return R.jsx("span",{className:n,...t,children:r})}function j$(){const n=hv();Me(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,s]=Ad(),{value:i,error:o}=r,{customTextRenderer:a,page:c}=n;function u(){i&&t&&t(i)}function d(){o&&(rn(!1,o.toString()),e&&e(o))}return _.useEffect(function(){s({type:"RESET"})},[s,c]),_.useEffect(function(){if(a||!c)return;const f=Yp(c.getStructTree()),p=f;return f.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>uc(p)},[a,c,s]),_.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}u()}},[i]),i?R.jsx(Ik,{className:"react-pdf__Page__structTree structTree",node:i}):null}const XA=Hs;function $$(n){const e=hv();Me(e);const t={...e,...n},{_className:r,canvasBackground:s,devicePixelRatio:i=T$(),onRenderError:o,onRenderSuccess:a,page:c,renderForms:u,renderTextLayer:d,rotate:h,scale:f}=t,{canvasRef:p}=n;Me(c);const m=_.useRef(null);function g(){c&&a&&a(Nb(c,f))}function b(A){R$(A)||(rn(!1,A.toString()),o&&o(A))}const y=_.useMemo(()=>c.getViewport({scale:f*i,rotation:h}),[i,c,h,f]),v=_.useMemo(()=>c.getViewport({scale:f,rotation:h}),[c,h,f]);_.useEffect(function(){if(!c)return;c.cleanup();const{current:C}=m;if(!C)return;C.width=y.width,C.height=y.height,C.style.width=`${Math.floor(v.width)}px`,C.style.height=`${Math.floor(v.height)}px`,C.style.visibility="hidden";const T={annotationMode:u?XA.ENABLE_FORMS:XA.ENABLE,canvasContext:C.getContext("2d",{alpha:!1}),viewport:y};s&&(T.background=s);const P=c.render(T),k=P;return P.promise.then(()=>{C.style.visibility="",g()}).catch(b),()=>uc(k)},[s,c,u,y,v]);const x=_.useCallback(()=>{const{current:A}=m;A&&(A.width=0,A.height=0)},[]);return _.useEffect(()=>x,[x]),R.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:Rk(p,m),style:{display:"block",userSelect:"none"},children:d?R.jsx(j$,{}):null})}function B$(n){return"str"in n}function z$(){const n=hv();Me(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:c,rotate:u,scale:d}=n;Me(o);const[h,f]=Ad(),{value:p,error:m}=h,g=_.useRef(null);rn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){p&&r&&r(p)}function y(){m&&(rn(!1,m.toString()),t&&t(m))}_.useEffect(function(){f({type:"RESET"})},[o,f]),_.useEffect(function(){if(!o)return;const k=Yp(o.getTextContent()),N=k;return k.promise.then(M=>{f({type:"RESOLVE",value:M})}).catch(M=>{f({type:"REJECT",error:M})}),()=>uc(N)},[o,f]),_.useEffect(()=>{if(p!==void 0){if(p===!1){y();return}b()}},[p]);const v=_.useCallback(()=>{i&&i()},[i]),x=_.useCallback(P=>{rn(!1,P.toString()),s&&s(P)},[s]);function A(){const P=g.current;P&&P.classList.add("selecting")}function C(){const P=g.current;P&&P.classList.remove("selecting")}const T=_.useMemo(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return _.useLayoutEffect(function(){if(!o||!p)return;const{current:k}=g;if(!k)return;k.innerHTML="";const N=o.streamTextContent({includeMarkedContent:!0}),M={container:k,textContentSource:N,viewport:T},F=new Zh(M),z=F;return F.render().then(()=>{const V=document.createElement("div");V.className="endOfContent",k.append(V);const $=k.querySelectorAll('[role="presentation"]');if(e){let Y=0;p.items.forEach((B,O)=>{if(!B$(B))return;const D=$[Y];if(!D)return;const L=e({pageIndex:a,pageNumber:c,itemIndex:O,...B});D.innerHTML=L,Y+=B.str&&B.hasEOL?2:1})}v()}).catch(x),()=>uc(z)},[e,x,v,o,a,c,p,T]),R.jsx("div",{className:Rd("react-pdf__Page__textContent","textLayer"),onMouseUp:C,onMouseDown:A,ref:g})}const YA=1;function H$(n){const t={...Pk(),...n},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:o,children:a,className:c,customRenderer:u,customTextRenderer:d,devicePixelRatio:h,error:f="Failed to load the page.",height:p,inputRef:m,loading:g="Loading page",noData:b="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:v,onGetStructTreeError:x,onGetStructTreeSuccess:A,onGetTextError:C,onGetTextSuccess:T,onLoadError:P,onLoadSuccess:k,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:z,onRenderTextLayerError:V,onRenderTextLayerSuccess:$,pageIndex:Y,pageNumber:B,pdf:O,registerPage:D,renderAnnotationLayer:L=!0,renderForms:I=!1,renderMode:j="canvas",renderTextLayer:H=!0,rotate:U,scale:q=YA,unregisterPage:se,width:oe,...Q}=t,[Se,He]=Ad(),{value:ge,error:Ie}=Se,Gt=_.useRef(null);Me(O);const he=Pa(B)?B-1:Y??null,Ce=B??(Pa(Y)?Y+1:null),Ye=U??(ge?ge.rotate:null),Ke=_.useMemo(()=>{if(!ge)return null;let on=1;const to=q??YA;if(oe||p){const fs=ge.getViewport({scale:1,rotation:Ye});oe?on=oe/fs.width:p&&(on=p/fs.height)}return to*on},[p,ge,Ye,q,oe]);_.useEffect(function(){return()=>{Pa(he)&&s&&se&&se(he)}},[s,O,he,se]);function us(){if(k){if(!ge||!Ke)return;k(Nb(ge,Ke))}if(s&&D){if(!Pa(he)||!Gt.current)return;D(he,Gt.current)}}function Lr(){Ie&&(rn(!1,Ie.toString()),P&&P(Ie))}_.useEffect(function(){He({type:"RESET"})},[He,O,he]),_.useEffect(function(){if(!O||!Ce)return;const to=Yp(O.getPage(Ce)),fs=to;return to.promise.then(no=>{He({type:"RESOLVE",value:no})}).catch(no=>{He({type:"REJECT",error:no})}),()=>uc(fs)},[He,O,Ce]),_.useEffect(()=>{if(ge!==void 0){if(ge===!1){Lr();return}us()}},[ge,Ke]);const ds=_.useMemo(()=>Pa(he)&&Ce&&Pa(Ye)&&Pa(Ke)?{_className:r,canvasBackground:i,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:y,onGetAnnotationsSuccess:v,onGetStructTreeError:x,onGetStructTreeSuccess:A,onGetTextError:C,onGetTextSuccess:T,onRenderAnnotationLayerError:N,onRenderAnnotationLayerSuccess:M,onRenderError:F,onRenderSuccess:z,onRenderTextLayerError:V,onRenderTextLayerSuccess:$,page:ge,pageIndex:he,pageNumber:Ce,renderForms:I,renderTextLayer:H,rotate:Ye,scale:Ke}:null,[r,i,d,h,y,v,x,A,C,T,N,M,F,z,V,$,ge,he,Ce,I,H,Ye,Ke]),Kp=_.useMemo(()=>Ek(Q,()=>ge&&(Ke?Nb(ge,Ke):void 0)),[Q,ge,Ke]),hs=`${he}@${Ke}/${Ye}`;function Qp(){switch(j){case"custom":return Me(u),R.jsx(u,{},`${hs}_custom`);case"none":return null;case"canvas":default:return R.jsx($$,{canvasRef:o},`${hs}_canvas`)}}function Js(){return H?R.jsx(z$,{},`${hs}_text`):null}function mv(){return L?R.jsx(M$,{},`${hs}_annotations`):null}function yv(){function on(fs){return!!(fs!=null&&fs.page)}if(!on(ds))throw new Error("page is undefined");const to=typeof a=="function"?a(ds):a;return R.jsxs(kk.Provider,{value:ds,children:[Qp(),Js(),mv(),to]})}function An(){return Ce?O===null||ge===void 0||ge===null?R.jsx(Jc,{type:"loading",children:typeof g=="function"?g():g}):O===!1||ge===!1?R.jsx(Jc,{type:"error",children:typeof f=="function"?f():f}):yv():R.jsx(Jc,{type:"no-data",children:typeof b=="function"?b():b})}return R.jsx("div",{className:Rd(r,c),"data-page-number":Ce,ref:Rk(m,Gt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ke}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Kp,children:An()})}P$();Sr.workerSrc="pdf.worker.mjs";var U$={exports:{}};(function(n){var e=function(t){var r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(L,I,j){L[I]=j.value},o,a=typeof Symbol=="function"?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",d=a.toStringTag||"@@toStringTag";function h(L,I,j){return Object.defineProperty(L,I,{value:j,enumerable:!0,configurable:!0,writable:!0}),L[I]}try{h({},"")}catch{h=function(I,j,H){return I[j]=H}}function f(L,I,j,H){var U=I&&I.prototype instanceof x?I:x,q=Object.create(U.prototype),se=new B(H||[]);return i(q,"_invoke",{value:z(L,j,se)}),q}t.wrap=f;function p(L,I,j){try{return{type:"normal",arg:L.call(I,j)}}catch(H){return{type:"throw",arg:H}}}var m="suspendedStart",g="suspendedYield",b="executing",y="completed",v={};function x(){}function A(){}function C(){}var T={};h(T,c,function(){return this});var P=Object.getPrototypeOf,k=P&&P(P(O([])));k&&k!==r&&s.call(k,c)&&(T=k);var N=C.prototype=x.prototype=Object.create(T);A.prototype=C,i(N,"constructor",{value:C,configurable:!0}),i(C,"constructor",{value:A,configurable:!0}),A.displayName=h(C,d,"GeneratorFunction");function M(L){["next","throw","return"].forEach(function(I){h(L,I,function(j){return this._invoke(I,j)})})}t.isGeneratorFunction=function(L){var I=typeof L=="function"&&L.constructor;return I?I===A||(I.displayName||I.name)==="GeneratorFunction":!1},t.mark=function(L){return Object.setPrototypeOf?Object.setPrototypeOf(L,C):(L.__proto__=C,h(L,d,"GeneratorFunction")),L.prototype=Object.create(N),L},t.awrap=function(L){return{__await:L}};function F(L,I){function j(q,se,oe,Q){var Se=p(L[q],L,se);if(Se.type==="throw")Q(Se.arg);else{var He=Se.arg,ge=He.value;return ge&&typeof ge=="object"&&s.call(ge,"__await")?I.resolve(ge.__await).then(function(Ie){j("next",Ie,oe,Q)},function(Ie){j("throw",Ie,oe,Q)}):I.resolve(ge).then(function(Ie){He.value=Ie,oe(He)},function(Ie){return j("throw",Ie,oe,Q)})}}var H;function U(q,se){function oe(){return new I(function(Q,Se){j(q,se,Q,Se)})}return H=H?H.then(oe,oe):oe()}i(this,"_invoke",{value:U})}M(F.prototype),h(F.prototype,u,function(){return this}),t.AsyncIterator=F,t.async=function(L,I,j,H,U){U===void 0&&(U=Promise);var q=new F(f(L,I,j,H),U);return t.isGeneratorFunction(I)?q:q.next().then(function(se){return se.done?se.value:q.next()})};function z(L,I,j){var H=m;return function(q,se){if(H===b)throw new Error("Generator is already running");if(H===y){if(q==="throw")throw se;return D()}for(j.method=q,j.arg=se;;){var oe=j.delegate;if(oe){var Q=V(oe,j);if(Q){if(Q===v)continue;return Q}}if(j.method==="next")j.sent=j._sent=j.arg;else if(j.method==="throw"){if(H===m)throw H=y,j.arg;j.dispatchException(j.arg)}else j.method==="return"&&j.abrupt("return",j.arg);H=b;var Se=p(L,I,j);if(Se.type==="normal"){if(H=j.done?y:g,Se.arg===v)continue;return{value:Se.arg,done:j.done}}else Se.type==="throw"&&(H=y,j.method="throw",j.arg=Se.arg)}}}function V(L,I){var j=I.method,H=L.iterator[j];if(H===o)return I.delegate=null,j==="throw"&&L.iterator.return&&(I.method="return",I.arg=o,V(L,I),I.method==="throw")||j!=="return"&&(I.method="throw",I.arg=new TypeError("The iterator does not provide a '"+j+"' method")),v;var U=p(H,L.iterator,I.arg);if(U.type==="throw")return I.method="throw",I.arg=U.arg,I.delegate=null,v;var q=U.arg;if(!q)return I.method="throw",I.arg=new TypeError("iterator result is not an object"),I.delegate=null,v;if(q.done)I[L.resultName]=q.value,I.next=L.nextLoc,I.method!=="return"&&(I.method="next",I.arg=o);else return q;return I.delegate=null,v}M(N),h(N,d,"Generator"),h(N,c,function(){return this}),h(N,"toString",function(){return"[object Generator]"});function $(L){var I={tryLoc:L[0]};1 in L&&(I.catchLoc=L[1]),2 in L&&(I.finallyLoc=L[2],I.afterLoc=L[3]),this.tryEntries.push(I)}function Y(L){var I=L.completion||{};I.type="normal",delete I.arg,L.completion=I}function B(L){this.tryEntries=[{tryLoc:"root"}],L.forEach($,this),this.reset(!0)}t.keys=function(L){var I=Object(L),j=[];for(var H in I)j.push(H);return j.reverse(),function U(){for(;j.length;){var q=j.pop();if(q in I)return U.value=q,U.done=!1,U}return U.done=!0,U}};function O(L){if(L){var I=L[c];if(I)return I.call(L);if(typeof L.next=="function")return L;if(!isNaN(L.length)){var j=-1,H=function U(){for(;++j<L.length;)if(s.call(L,j))return U.value=L[j],U.done=!1,U;return U.value=o,U.done=!0,U};return H.next=H}}return{next:D}}t.values=O;function D(){return{value:o,done:!0}}return B.prototype={constructor:B,reset:function(L){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(Y),!L)for(var I in this)I.charAt(0)==="t"&&s.call(this,I)&&!isNaN(+I.slice(1))&&(this[I]=o)},stop:function(){this.done=!0;var L=this.tryEntries[0],I=L.completion;if(I.type==="throw")throw I.arg;return this.rval},dispatchException:function(L){if(this.done)throw L;var I=this;function j(Q,Se){return q.type="throw",q.arg=L,I.next=Q,Se&&(I.method="next",I.arg=o),!!Se}for(var H=this.tryEntries.length-1;H>=0;--H){var U=this.tryEntries[H],q=U.completion;if(U.tryLoc==="root")return j("end");if(U.tryLoc<=this.prev){var se=s.call(U,"catchLoc"),oe=s.call(U,"finallyLoc");if(se&&oe){if(this.prev<U.catchLoc)return j(U.catchLoc,!0);if(this.prev<U.finallyLoc)return j(U.finallyLoc)}else if(se){if(this.prev<U.catchLoc)return j(U.catchLoc,!0)}else if(oe){if(this.prev<U.finallyLoc)return j(U.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(L,I){for(var j=this.tryEntries.length-1;j>=0;--j){var H=this.tryEntries[j];if(H.tryLoc<=this.prev&&s.call(H,"finallyLoc")&&this.prev<H.finallyLoc){var U=H;break}}U&&(L==="break"||L==="continue")&&U.tryLoc<=I&&I<=U.finallyLoc&&(U=null);var q=U?U.completion:{};return q.type=L,q.arg=I,U?(this.method="next",this.next=U.finallyLoc,v):this.complete(q)},complete:function(L,I){if(L.type==="throw")throw L.arg;return L.type==="break"||L.type==="continue"?this.next=L.arg:L.type==="return"?(this.rval=this.arg=L.arg,this.method="return",this.next="end"):L.type==="normal"&&I&&(this.next=I),v},finish:function(L){for(var I=this.tryEntries.length-1;I>=0;--I){var j=this.tryEntries[I];if(j.finallyLoc===L)return this.complete(j.completion,j.afterLoc),Y(j),v}},catch:function(L){for(var I=this.tryEntries.length-1;I>=0;--I){var j=this.tryEntries[I];if(j.tryLoc===L){var H=j.completion;if(H.type==="throw"){var U=H.arg;Y(j)}return U}}throw new Error("illegal catch attempt")},delegateYield:function(L,I,j){return this.delegate={iterator:O(L),resultName:I,nextLoc:j},this.method==="next"&&(this.arg=o),v}},t}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(U$);var u1=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const V$=u1;let KA=0;var Dk=({id:n,action:e,payload:t={}})=>{let r=n;return typeof r>"u"&&(r=V$("Job",KA),KA+=1),{id:r,action:e,payload:t}},Id={};let d1=!1;Id.logging=d1;Id.setLogging=n=>{d1=n};Id.log=(...n)=>d1?console.log.apply(void 0,n):null;const W$=Dk,{log:Tg}=Id,G$=u1;let QA=0;var q$=()=>{const n=G$("Scheduler",QA),e={},t={};let r=[];QA+=1;const s=()=>r.length,i=()=>Object.keys(e).length,o=()=>{if(r.length!==0){const h=Object.keys(e);for(let f=0;f<h.length;f+=1)if(typeof t[h[f]]>"u"){r[0](e[h[f]]);break}}},a=(h,f)=>new Promise((p,m)=>{const g=W$({action:h,payload:f});r.push(async b=>{r.shift(),t[b.id]=g;try{p(await b[h].apply(void 0,[...f,g.id]))}catch(y){m(y)}finally{delete t[b.id],o()}}),Tg(`[${n}]: Add ${g.id} to JobQueue`),Tg(`[${n}]: JobQueue length=${r.length}`),o()});return{addWorker:h=>(e[h.id]=h,Tg(`[${n}]: Add ${h.id}`),Tg(`[${n}]: Number of workers=${i()}`),o(),h.id),addJob:async(h,...f)=>{if(i()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return a(h,f)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),r=[]},getQueueLen:s,getNumWorkers:i}};function X$(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Y$=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof X$=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const K$=Y$("type")==="browser",Q$=K$?n=>new URL(n,window.location.href).href:n=>n;var J$=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(t=>{n[t]&&(e[t]=Q$(e[t]))}),e},Ok={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Z$="tesseract.js",eB="6.0.1",tB="Pure Javascript Multilingual OCR",nB="src/index.js",rB="commonjs",sB="src/index.d.ts",iB="dist/tesseract.min.js",oB="dist/tesseract.min.js",aB={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},lB={"./src/worker/node/index.js":"./src/worker/browser/index.js"},cB="",uB=["jeromewu"],dB="Apache-2.0",hB={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},fB={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},pB={"@rollup/pluginutils":"^5.0.2"},gB={type:"git",url:"https://github.com/naptha/tesseract.js.git"},mB={url:"https://github.com/naptha/tesseract.js/issues"},yB="https://github.com/naptha/tesseract.js",vB={type:"opencollective",url:"https://opencollective.com/tesseractjs"},wB={name:Z$,version:eB,description:tB,main:nB,type:rB,types:sB,unpkg:iB,jsdelivr:oB,scripts:aB,browser:lB,author:cB,contributors:uB,license:dB,devDependencies:hB,dependencies:fB,overrides:pB,repository:gB,bugs:mB,homepage:yB,collective:vB};var bB={workerBlobURL:!0,logger:()=>{}};const xB=wB.version,SB=bB;var AB={...SB,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${xB}/dist/worker.min.js`},EB=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const r=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(r))}else t=new Worker(n);return t},CB=n=>{n.terminate()},_B=(n,e)=>{n.onmessage=({data:t})=>{e(t)}},TB=async(n,e)=>{n.postMessage(e)};const l0=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:s}}})=>{t(Error(`File could not be read! Code=${s}`))},r.readAsArrayBuffer(n)}),Mb=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await Mb(n.src)),n.tagName==="VIDEO"&&(e=await Mb(n.poster)),n.tagName==="CANVAS"&&await new Promise(t=>{n.toBlob(async r=>{e=await l0(r),t()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const t=await n.convertToBlob();e=await l0(t)}else(n instanceof File||n instanceof Blob)&&(e=await l0(n));return new Uint8Array(e)};var PB=Mb;const RB=AB,kB=EB,LB=CB,NB=_B,MB=TB,IB=PB;var DB={defaultOptions:RB,spawnWorker:kB,terminateWorker:LB,onMessage:NB,send:MB,loadImage:IB};const OB=J$,ys=Dk,{log:JA}=Id,FB=u1,Ra=Ok,{defaultOptions:jB,spawnWorker:$B,terminateWorker:BB,onMessage:zB,loadImage:ZA,send:HB}=DB;let eE=0;var Fk=async(n="eng",e=Ra.LSTM_ONLY,t={},r={})=>{const s=FB("Worker",eE),{logger:i,errorHandler:o,...a}=OB({...jB,...t}),c={},u=typeof n=="string"?n.split("+"):n;let d=e,h=r;const f=[Ra.DEFAULT,Ra.LSTM_ONLY].includes(e)&&!a.legacyCore;let p,m;const g=new Promise((O,D)=>{m=O,p=D}),b=O=>{p(O.message)};let y=$B(a);y.onerror=b,eE+=1;const v=({id:O,action:D,payload:L})=>new Promise((I,j)=>{JA(`[${s}]: Start ${O}, action=${D}`);const H=`${D}-${O}`;c[H]={resolve:I,reject:j},HB(y,{workerId:s,jobId:O,action:D,payload:L})}),x=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),A=O=>v(ys({id:O,action:"load",payload:{options:{lstmOnly:f,corePath:a.corePath,logging:a.logging}}})),C=(O,D,L)=>v(ys({id:L,action:"FS",payload:{method:"writeFile",args:[O,D]}})),T=(O,D)=>v(ys({id:D,action:"FS",payload:{method:"readFile",args:[O,{encoding:"utf8"}]}})),P=(O,D)=>v(ys({id:D,action:"FS",payload:{method:"unlink",args:[O]}})),k=(O,D,L)=>v(ys({id:L,action:"FS",payload:{method:O,args:D}})),N=(O,D)=>v(ys({id:D,action:"loadLanguage",payload:{langs:O,options:{langPath:a.langPath,dataPath:a.dataPath,cachePath:a.cachePath,cacheMethod:a.cacheMethod,gzip:a.gzip,lstmOnly:[Ra.DEFAULT,Ra.LSTM_ONLY].includes(d)&&!a.legacyLang}}})),M=(O,D,L,I)=>v(ys({id:I,action:"initialize",payload:{langs:O,oem:D,config:L}})),F=(O="eng",D,L,I)=>{if(f&&[Ra.TESSERACT_ONLY,Ra.TESSERACT_LSTM_COMBINED].includes(D))throw Error("Legacy model requested but code missing.");const j=D||d;d=j;const H=L||h;h=H;const q=(typeof O=="string"?O.split("+"):O).filter(se=>!u.includes(se));return u.push(...q),q.length>0?N(q,I).then(()=>M(O,j,H,I)):M(O,j,H,I)},z=(O={},D)=>v(ys({id:D,action:"setParameters",payload:{params:O}})),V=async(O,D={},L={text:!0},I)=>v(ys({id:I,action:"recognize",payload:{image:await ZA(O),options:D,output:L}})),$=async(O,D)=>{if(f)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return v(ys({id:D,action:"detect",payload:{image:await ZA(O)}}))},Y=async()=>(y!==null&&(BB(y),y=null),Promise.resolve());zB(y,({workerId:O,jobId:D,status:L,action:I,data:j})=>{const H=`${I}-${D}`;if(L==="resolve")JA(`[${O}]: Complete ${D}`),c[H].resolve({jobId:D,data:j}),delete c[H];else if(L==="reject")if(c[H].reject(j),delete c[H],I==="load"&&p(j),o)o(j);else throw Error(j);else L==="progress"&&i({...j,userJobId:D})});const B={id:s,worker:y,load:x,writeText:C,readText:T,removeFile:P,FS:k,reinitialize:F,setParameters:z,recognize:V,detect:$,terminate:Y};return A().then(()=>N(n)).then(()=>M(n,e,r)).then(()=>m(B)).catch(()=>{}),g};const jk=Fk,UB=async(n,e,t)=>{const r=await jk(e,1,t);return r.recognize(n).finally(async()=>{await r.terminate()})},VB=async(n,e)=>{const t=await jk("osd",0,e);return t.detect(n).finally(async()=>{await t.terminate()})};var WB={recognize:UB,detect:VB},GB={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},qB={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const XB=q$,YB=Fk,KB=WB,QB=GB,JB=Ok,ZB=qB,{setLogging:ez}=Id;var tz={languages:QB,OEM:JB,PSM:ZB,createScheduler:XB,createWorker:YB,setLogging:ez,...KB};Sr.workerSrc=`//unpkg.com/pdfjs-dist@${s1}/build/pdf.worker.min.mjs`;const nz=({file:n,onProcessingComplete:e,onProgressUpdate:t,onError:r})=>{const[s,i]=_.useState(0),[o,a]=_.useState(0),[c,u]=_.useState([]),d=_.useCallback(({numPages:v})=>{i(v),a(1),u([]),t(10)},[t]),h=_.useCallback(v=>{console.error("PDF document load error:",v),r==null||r("Failed to load PDF document. Please ensure the file is a valid PDF.")},[r]),f=_.useCallback(async v=>{try{const x=o,A=(x-1)/s*80+10,C=80/s/6;t(A+C);const P=v.getViewport({scale:2}),k=document.createElement("canvas"),N=k.getContext("2d");if(k.height=P.height,k.width=P.width,!N)throw new Error("Failed to get canvas context");t(A+C*2),await v.render({canvasContext:N,viewport:P}).promise,t(A+C*3);const M=k.toDataURL("image/png",.95),F=await v.getTextContent();let z=[],V=0;F&&F.items&&F.items.length>0&&F.items.forEach(O=>{if(O.str&&O.str.trim().length>0&&O.transform&&O.width&&O.height){const D=v.getViewport({scale:1}),L=O.transform[4]/D.width*100,I=(D.height-O.transform[5]-O.height)/D.height*100,j=O.width/D.width*100,H=O.height/D.height*100;L>=0&&I>=0&&j>0&&H>0&&L<100&&I<100&&L+j<=100&&I+H<=100&&z.push({id:`page-${x}-pdf-${V++}`,text:O.str.trim(),pageNumber:x,geometry:{x:L,y:I,w:j,h:H}})}}),t(A+C*4);let $=z;if(z.length<10||m(z)){console.log(`Using OCR for page ${x} - PDF.js found ${z.length} chunks`);try{const O=await p(M,x);t(A+C*5),(O.length>z.length||g(O,z))&&($=O,console.log(`OCR improved results: ${O.length} chunks vs ${z.length} from PDF.js`))}catch(O){console.warn(`OCR failed for page ${x}, using PDF.js results:`,O)}}const Y=y($),B={pageNumber:x,imageUrl:M,textChunks:Y};u(O=>{const D=[...O,B].sort((L,I)=>L.pageNumber-I.pageNumber);return D.length===s?(t(100),e(D)):(a(x+1),t(A+C*6)),D})}catch(x){console.error(`Error processing PDF page ${o}:`,x);const A=x instanceof Error?x.message:"Unknown error occurred during PDF processing";r==null||r(A)}},[o,s,e,t,r]),p=async(v,x)=>{const A=await tz.createWorker("eng",1,{logger:C=>{C.status==="recognizing text"&&console.log(`OCR Progress for page ${x}: ${Math.round(C.progress*100)}%`)}});try{await A.setParameters({tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,!?:;()-[]{}\"' /\\@#$%^&*+=<>|~`",preserve_interword_spaces:"1"});const{data:C}=await A.recognize(v),T=[];let P=0;const k=await new Promise((N,M)=>{const F=new Image;F.onload=()=>N(F),F.onerror=M,F.src=v});if(C&&C.text&&C.text.trim().length>0){const N=C.words;if(N&&Array.isArray(N)&&N.length>0&&N.forEach(M=>{if(M.text&&M.text.trim().length>0&&M.confidence&&M.confidence>30&&M.bbox){const F=M.bbox.x0/k.width*100,z=M.bbox.y0/k.height*100,V=(M.bbox.x1-M.bbox.x0)/k.width*100,$=(M.bbox.y1-M.bbox.y0)/k.height*100;F>=0&&z>=0&&V>0&&$>0&&F<100&&z<100&&F+V<=100&&z+$<=100&&T.push({id:`page-${x}-ocr-${P++}`,text:M.text.trim(),pageNumber:x,geometry:{x:F,y:z,w:V,h:$}})}}),T.length===0){const M=C.lines;M&&Array.isArray(M)&&M.length>0&&M.forEach(F=>{if(F.text&&F.text.trim().length>0&&F.confidence&&F.confidence>30&&F.bbox){const z=F.bbox.x0/k.width*100,V=F.bbox.y0/k.height*100,$=(F.bbox.x1-F.bbox.x0)/k.width*100,Y=(F.bbox.y1-F.bbox.y0)/k.height*100;z>=0&&V>=0&&$>0&&Y>0&&z<100&&V<100&&z+$<=100&&V+Y<=100&&T.push({id:`page-${x}-ocr-line-${P++}`,text:F.text.trim(),pageNumber:x,geometry:{x:z,y:V,w:$,h:Y}})}})}T.length===0&&C.text.trim().length>0&&T.push({id:`page-${x}-ocr-full`,text:C.text.trim(),pageNumber:x,geometry:{x:5,y:5,w:90,h:90}})}return T}catch(C){return console.error("OCR processing error:",C),[]}finally{await A.terminate()}},m=v=>{if(v.length===0)return!0;const x=v.reduce((T,P)=>T+P.text.length,0)/v.length,A=v.some(T=>T.text.length>20),C=v.some(T=>/[^\w\s.,!?;:()-]/.test(T.text));return x<3||!A&&v.length>50||C},g=(v,x)=>{if(v.length===0)return!1;if(x.length===0)return!0;const A=v.reduce((T,P)=>T+P.text.length,0)/v.length,C=x.reduce((T,P)=>T+P.text.length,0)/x.length;return A>C*1.2||v.length>x.length*1.5},b=_.useCallback(v=>{console.error(`PDF page ${o} load error:`,v),r==null||r(`Failed to load PDF page ${o}. The PDF file may be corrupted or encrypted.`)},[o,r]),y=v=>{if(v.length===0)return[];const x=[...v].sort((k,N)=>{const M=k.geometry.y-N.geometry.y;return Math.abs(M)<.8?k.geometry.x-N.geometry.x:M}),A=[],C=1.2,T=3,P=15;return x.forEach((k,N)=>{if(N===0){A.push({...k});return}const M=A[A.length-1],F=Math.abs(k.geometry.y-M.geometry.y),z=k.geometry.x-(M.geometry.x+M.geometry.w),V=F<C,$=z>=0&&z<T,Y=z<P,B=Math.abs(k.geometry.h-M.geometry.h)<.5,O=k.text.length<50&&M.text.length<200;if(V&&$&&Y&&B&&O){const D=z>1?" ":"";M.text+=D+k.text,M.geometry.w=k.geometry.x+k.geometry.w-M.geometry.x,M.geometry.h=Math.max(M.geometry.h,k.geometry.h);const L=Math.min(M.geometry.y,k.geometry.y),I=Math.max(M.geometry.y+M.geometry.h,k.geometry.y+k.geometry.h)-L;M.geometry.y=L,M.geometry.h=I}else A.push({...k})}),A.filter(k=>{const N=k.geometry.w>.1&&k.geometry.h>.1,M=k.text.trim().length>0,F=k.text.length<500;return N&&M&&F}).map(k=>({...k,text:k.text.replace(/\s+/g," ").trim()}))};return o>0&&o<=s?R.jsx("div",{className:"hidden",children:R.jsx(qA,{file:n,onLoadSuccess:d,onLoadError:h,loading:R.jsx("div",{children:"Loading PDF..."}),error:R.jsx("div",{children:"Error loading PDF"}),children:R.jsx(H$,{pageNumber:o,onLoadSuccess:f,onLoadError:b,loading:R.jsxs("div",{children:["Rendering page ",o,"..."]}),error:R.jsxs("div",{children:["Error rendering page ",o]})},o)})}):R.jsx("div",{className:"hidden",children:R.jsx(qA,{file:n,onLoadSuccess:d,onLoadError:h,loading:R.jsx("div",{children:"Loading PDF..."}),error:R.jsx("div",{children:"Error loading PDF"})})})},rz=qy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ay({className:n,variant:e,...t}){return R.jsx("div",{className:ot(rz({variant:e}),n),...t})}const sz=({pages:n,highlightedChunk:e,onChunkClick:t,currentPage:r,onPageChange:s})=>{const i=_.useRef(null),o=_.useRef(null),[a,c]=_.useState(1),[u,d]=_.useState(!1),[h,f]=_.useState({width:0,height:0}),p=n.find(k=>k.pageNumber===r),m=n.length;_.useEffect(()=>{o.current&&u&&f({width:o.current.offsetWidth,height:o.current.offsetHeight})},[u,a,r]),_.useEffect(()=>{d(!1),c(1)},[r]);const g=()=>{d(!0),o.current&&f({width:o.current.offsetWidth,height:o.current.offsetHeight})},b=()=>{c(k=>Math.min(k+.25,3))},y=()=>{c(k=>Math.max(k-.25,.5))},v=()=>{c(1)},x=()=>{if(p){const k=document.createElement("a");k.download=`page-${r}.png`,k.href=p.imageUrl,k.click()}},A=k=>{const N=n.find(M=>M.textChunks.some(F=>F.id===k));N&&N.pageNumber!==r&&s(N.pageNumber),t(k),setTimeout(()=>{const M=document.querySelector(`[data-chunk-id="${k}"]`);M&&i.current&&M.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},300)},C=k=>{if(!u||!h.width||!h.height)return{display:"none"};const N=k.geometry.x/100*h.width,M=k.geometry.y/100*h.height,F=k.geometry.w/100*h.width,z=k.geometry.h/100*h.height,V=e===k.id;return{position:"absolute",left:`${N}px`,top:`${M}px`,width:`${F}px`,height:`${z}px`,border:V?"2px solid hsl(var(--highlight-primary))":"1px solid hsl(var(--bounding-box-stroke) / 0.6)",backgroundColor:V?"hsl(var(--highlight-primary) / 0.2)":"hsl(var(--bounding-box-fill) / 0.1)",cursor:"pointer",transition:"var(--transition-smooth)",borderRadius:"2px",boxShadow:V?"0 0 0 1px hsl(var(--highlight-primary) / 0.5), 0 0 20px hsl(var(--highlight-glow) / 0.3)":"none",zIndex:V?20:10,transform:V?"scale(1.02)":"scale(1)",transformOrigin:"center"}},T=()=>{r>1&&s(r-1)},P=()=>{r<m&&s(r+1)};return p?R.jsxs(nc,{className:"bg-viewer-background border-viewer-border overflow-hidden",children:[R.jsxs("div",{className:"p-4 border-b border-viewer-border bg-viewer-surface",children:[R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx(Vm,{className:"w-5 h-5 text-pdf-primary"}),R.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Document Viewer"}),R.jsxs(ay,{variant:"secondary",className:"bg-pdf-primary/10 text-pdf-primary",children:[p.textChunks.length," text regions"]})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(Bs,{variant:"ghost",size:"sm",onClick:y,disabled:a<=.5,className:"hover:bg-pdf-primary/10",children:R.jsx(WI,{className:"h-4 w-4"})}),R.jsxs("span",{className:"text-sm text-muted-foreground min-w-[60px] text-center font-mono",children:[Math.round(a*100),"%"]}),R.jsx(Bs,{variant:"ghost",size:"sm",onClick:b,disabled:a>=3,className:"hover:bg-pdf-primary/10",children:R.jsx(VI,{className:"h-4 w-4"})}),R.jsx(Bs,{variant:"ghost",size:"sm",onClick:v,className:"hover:bg-pdf-primary/10",children:R.jsx(HI,{className:"h-4 w-4"})}),R.jsx(Bs,{variant:"ghost",size:"sm",onClick:x,className:"hover:bg-pdf-primary/10",children:R.jsx(BI,{className:"h-4 w-4"})})]})]}),m>1&&R.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[R.jsxs(Bs,{variant:"ghost",size:"sm",onClick:T,disabled:r<=1,className:"hover:bg-pdf-primary/10",children:[R.jsx(OI,{className:"h-4 w-4"}),"Previous"]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("span",{className:"text-sm text-muted-foreground",children:"Page"}),R.jsx("span",{className:"font-semibold text-pdf-primary",children:r}),R.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",m]})]}),R.jsxs(Bs,{variant:"ghost",size:"sm",onClick:P,disabled:r>=m,className:"hover:bg-pdf-primary/10",children:["Next",R.jsx(FI,{className:"h-4 w-4"})]})]})]}),R.jsxs("div",{className:"p-4",children:[R.jsx("div",{ref:i,className:"relative overflow-auto max-h-[70vh] bg-white rounded-lg border-2 border-viewer-border shadow-inner",style:{maxWidth:"100%"},children:R.jsxs("div",{style:{transform:`scale(${a})`,transformOrigin:"top left",position:"relative",transition:"var(--transition-smooth)"},children:[R.jsx("img",{ref:o,src:p.imageUrl,alt:`Document page ${r}`,className:"block max-w-full h-auto",onLoad:g,style:{display:"block"}}),u&&p.textChunks.map(k=>R.jsx("div",{"data-chunk-id":k.id,style:C(k),onClick:()=>A(k.id),onMouseEnter:N=>{e!==k.id&&(N.currentTarget.style.backgroundColor="hsl(var(--bounding-box-fill) / 0.15)",N.currentTarget.style.borderColor="hsl(var(--bounding-box-stroke) / 0.8)",N.currentTarget.style.transform="scale(1.01)")},onMouseLeave:N=>{e!==k.id&&(N.currentTarget.style.backgroundColor="hsl(var(--bounding-box-fill) / 0.1)",N.currentTarget.style.borderColor="hsl(var(--bounding-box-stroke) / 0.6)",N.currentTarget.style.transform="scale(1)")},title:`Page ${k.pageNumber}: ${k.text}`},k.id))]})}),R.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-muted-foreground",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx(iw,{className:"w-4 h-4"}),R.jsx("span",{children:e?"Click highlighted region to deselect":"Click any text region to highlight it"})]}),e&&R.jsx(ay,{variant:"secondary",className:"bg-highlight-primary/10 text-highlight-primary",children:"Region selected"})]})]})]}):R.jsx(nc,{className:"p-8 bg-viewer-background border-viewer-border",children:R.jsxs("div",{className:"text-center",children:[R.jsx(Vm,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),R.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Document Loaded"}),R.jsx("p",{className:"text-muted-foreground",children:"Upload a PDF file to get started"})]})})},$k=_.forwardRef(({className:n,type:e,...t},r)=>R.jsx("input",{type:e,className:ot("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));$k.displayName="Input";var iz=_.createContext(void 0);function oz(n){const e=_.useContext(iz);return n||e||"ltr"}function az(n,[e,t]){return Math.min(t,Math.max(e,n))}function lz(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var h1="ScrollArea",[Bk,Dz]=Pd(h1),[cz,kr]=Bk(h1),zk=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=n,[a,c]=_.useState(null),[u,d]=_.useState(null),[h,f]=_.useState(null),[p,m]=_.useState(null),[g,b]=_.useState(null),[y,v]=_.useState(0),[x,A]=_.useState(0),[C,T]=_.useState(!1),[P,k]=_.useState(!1),N=Wt(e,F=>c(F)),M=oz(s);return R.jsx(cz,{scope:t,type:r,dir:M,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:m,scrollbarXEnabled:C,onScrollbarXEnabledChange:T,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:P,onScrollbarYEnabledChange:k,onCornerWidthChange:v,onCornerHeightChange:A,children:R.jsx(ft.div,{dir:M,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":x+"px",...n.style}})})});zk.displayName=h1;var Hk="ScrollAreaViewport",Uk=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,o=kr(Hk,t),a=_.useRef(null),c=Wt(e,a,o.onViewportChange);return R.jsxs(R.Fragment,{children:[R.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),R.jsx(ft.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...n.style},children:R.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Uk.displayName=Hk;var Qs="ScrollAreaScrollbar",f1=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=kr(Qs,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=n.orientation==="horizontal";return _.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?R.jsx(uz,{...r,ref:e,forceMount:t}):s.type==="scroll"?R.jsx(dz,{...r,ref:e,forceMount:t}):s.type==="auto"?R.jsx(Vk,{...r,ref:e,forceMount:t}):s.type==="always"?R.jsx(p1,{...r,ref:e}):null});f1.displayName=Qs;var uz=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=kr(Qs,n.__scopeScrollArea),[i,o]=_.useState(!1);return _.useEffect(()=>{const a=s.scrollArea;let c=0;if(a){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),R.jsx(fc,{present:t||i,children:R.jsx(Vk,{"data-state":i?"visible":"hidden",...r,ref:e})})}),dz=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=kr(Qs,n.__scopeScrollArea),i=n.orientation==="horizontal",o=gv(()=>c("SCROLL_END"),100),[a,c]=lz("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return _.useEffect(()=>{if(a==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[a,s.scrollHideDelay,c]),_.useEffect(()=>{const u=s.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const p=u[d];h!==p&&(c("SCROLL"),o()),h=p};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,i,c,o]),R.jsx(fc,{present:t||a!=="hidden",children:R.jsx(p1,{"data-state":a==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Oe(n.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Oe(n.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Vk=_.forwardRef((n,e)=>{const t=kr(Qs,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,o]=_.useState(!1),a=n.orientation==="horizontal",c=gv(()=>{if(t.viewport){const u=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;o(a?u:d)}},10);return Ed(t.viewport,c),Ed(t.content,c),R.jsx(fc,{present:r||i,children:R.jsx(p1,{"data-state":i?"visible":"hidden",...s,ref:e})})}),p1=_.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=kr(Qs,n.__scopeScrollArea),i=_.useRef(null),o=_.useRef(0),[a,c]=_.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Yk(a.viewport,a.content),d={...r,sizes:a,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,p){return yz(f,o.current,a,p)}return t==="horizontal"?R.jsx(hz,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,p=tE(f,a,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):t==="vertical"?R.jsx(fz,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,p=tE(f,a);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),hz=_.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=kr(Qs,n.__scopeScrollArea),[o,a]=_.useState(),c=_.useRef(null),u=Wt(e,c,i.onScrollbarXChange);return _.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),R.jsx(Gk,{"data-orientation":"horizontal",...s,ref:u,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":pv(t)+"px",...n.style},onThumbPointerDown:d=>n.onThumbPointerDown(d.x),onDragScroll:d=>n.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;n.onWheelScroll(f),Qk(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:cy(o.paddingLeft),paddingEnd:cy(o.paddingRight)}})}})}),fz=_.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=kr(Qs,n.__scopeScrollArea),[o,a]=_.useState(),c=_.useRef(null),u=Wt(e,c,i.onScrollbarYChange);return _.useEffect(()=>{c.current&&a(getComputedStyle(c.current))},[c]),R.jsx(Gk,{"data-orientation":"vertical",...s,ref:u,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":pv(t)+"px",...n.style},onThumbPointerDown:d=>n.onThumbPointerDown(d.y),onDragScroll:d=>n.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;n.onWheelScroll(f),Qk(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:cy(o.paddingTop),paddingEnd:cy(o.paddingBottom)}})}})}),[pz,Wk]=Bk(Qs),Gk=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=n,p=kr(Qs,t),[m,g]=_.useState(null),b=Wt(e,N=>g(N)),y=_.useRef(null),v=_.useRef(""),x=p.viewport,A=r.content-r.viewport,C=mn(d),T=mn(c),P=gv(h,10);function k(N){if(y.current){const M=N.clientX-y.current.left,F=N.clientY-y.current.top;u({x:M,y:F})}}return _.useEffect(()=>{const N=M=>{const F=M.target;(m==null?void 0:m.contains(F))&&C(M,A)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[x,m,A,C]),_.useEffect(T,[r,T]),Ed(m,P),Ed(p.content,P),R.jsx(pz,{scope:t,scrollbar:m,hasThumb:s,onThumbChange:mn(i),onThumbPointerUp:mn(o),onThumbPositionChange:T,onThumbPointerDown:mn(a),children:R.jsx(ft.div,{...f,ref:b,style:{position:"absolute",...f.style},onPointerDown:Oe(n.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),y.current=m.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),k(N))}),onPointerMove:Oe(n.onPointerMove,k),onPointerUp:Oe(n.onPointerUp,N=>{const M=N.target;M.hasPointerCapture(N.pointerId)&&M.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),ly="ScrollAreaThumb",qk=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Wk(ly,n.__scopeScrollArea);return R.jsx(fc,{present:t||s.hasThumb,children:R.jsx(gz,{ref:e,...r})})}),gz=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=kr(ly,t),o=Wk(ly,t),{onThumbPositionChange:a}=o,c=Wt(e,h=>o.onThumbChange(h)),u=_.useRef(void 0),d=gv(()=>{u.current&&(u.current(),u.current=void 0)},100);return _.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!u.current){const p=vz(h,a);u.current=p,a()}};return a(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,a]),R.jsx(ft.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Oe(n.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),m=h.clientX-p.left,g=h.clientY-p.top;o.onThumbPointerDown({x:m,y:g})}),onPointerUp:Oe(n.onPointerUp,o.onThumbPointerUp)})});qk.displayName=ly;var g1="ScrollAreaCorner",Xk=_.forwardRef((n,e)=>{const t=kr(g1,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?R.jsx(mz,{...n,ref:e}):null});Xk.displayName=g1;var mz=_.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=kr(g1,t),[i,o]=_.useState(0),[a,c]=_.useState(0),u=!!(i&&a);return Ed(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Ed(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),u?R.jsx(ft.div,{...r,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function cy(n){return n?parseInt(n,10):0}function Yk(n,e){const t=n/e;return isNaN(t)?0:t}function pv(n){const e=Yk(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function yz(n,e,t,r="ltr"){const s=pv(t),i=s/2,o=e||i,a=s-o,c=t.scrollbar.paddingStart+o,u=t.scrollbar.size-t.scrollbar.paddingEnd-a,d=t.content-t.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return Kk([c,u],h)(n)}function tE(n,e,t="ltr"){const r=pv(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-r,c=t==="ltr"?[0,o]:[o*-1,0],u=az(n,c);return Kk([0,o],[0,a])(u)}function Kk(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function Qk(n,e){return n>0&&n<e}var vz=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return function s(){const i={left:n.scrollLeft,top:n.scrollTop},o=t.left!==i.left,a=t.top!==i.top;(o||a)&&e(),t=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function gv(n,e){const t=mn(n),r=_.useRef(0);return _.useEffect(()=>()=>window.clearTimeout(r.current),[]),_.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function Ed(n,e){const t=mn(e);Xi(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var Jk=zk,wz=Uk,bz=Xk;const Zk=_.forwardRef(({className:n,children:e,...t},r)=>R.jsxs(Jk,{ref:r,className:ot("relative overflow-hidden",n),...t,children:[R.jsx(wz,{className:"h-full w-full rounded-[inherit]",children:e}),R.jsx(eL,{}),R.jsx(bz,{})]}));Zk.displayName=Jk.displayName;const eL=_.forwardRef(({className:n,orientation:e="vertical",...t},r)=>R.jsx(f1,{ref:r,orientation:e,className:ot("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:R.jsx(qk,{className:"relative flex-1 rounded-full bg-border"})}));eL.displayName=f1.displayName;const xz=({pages:n,onChunkSelect:e,selectedChunk:t})=>{const[r,s]=_.useState(""),i=_.useMemo(()=>n.flatMap(f=>f.textChunks),[n]),o=_.useMemo(()=>{if(!r.trim())return i;const f=r.toLowerCase();return i.filter(p=>p.text.toLowerCase().includes(f))},[i,r]),a=_.useMemo(()=>{const f={};return o.forEach(p=>{f[p.pageNumber]||(f[p.pageNumber]=[]),f[p.pageNumber].push(p)}),f},[o]),c=f=>{e(f===t?"":f)},u=()=>{s("")},d=o.length,h=Object.keys(a).length;return R.jsxs(nc,{className:"bg-viewer-surface border-viewer-border",children:[R.jsxs("div",{className:"p-4 border-b border-viewer-border",children:[R.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[R.jsx(iw,{className:"w-5 h-5 text-pdf-primary"}),R.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Text Search"}),R.jsxs(ay,{variant:"secondary",className:"bg-pdf-primary/10 text-pdf-primary",children:[i.length," total regions"]})]}),R.jsxs("div",{className:"relative",children:[R.jsx(iw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),R.jsx($k,{type:"text",placeholder:"Search text in document...",value:r,onChange:f=>s(f.target.value),className:"pl-10 pr-20 border-viewer-border focus:border-pdf-primary focus:ring-pdf-primary/20"}),r&&R.jsx(Bs,{variant:"ghost",size:"sm",onClick:u,className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 px-3 text-xs hover:bg-pdf-primary/10",children:"Clear"})]}),r&&R.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-muted-foreground",children:[R.jsxs("span",{children:[R.jsx("span",{className:"font-semibold text-pdf-primary",children:d})," results"]}),h>0&&R.jsxs("span",{children:["across ",R.jsx("span",{className:"font-semibold text-pdf-primary",children:h})," page",h!==1?"s":""]})]})]}),R.jsx("div",{className:"p-4",children:R.jsx(Zk,{className:"h-[400px]",children:d===0?R.jsxs("div",{className:"text-center py-8",children:[R.jsx(Vm,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground/50"}),R.jsx("p",{className:"text-muted-foreground",children:r?"No matching text found":"Enter search terms to find text"})]}):R.jsx("div",{className:"space-y-4",children:Object.entries(a).sort(([f],[p])=>parseInt(f)-parseInt(p)).map(([f,p])=>R.jsxs("div",{className:"space-y-2",children:[R.jsxs("div",{className:"flex items-center gap-2 sticky top-0 bg-viewer-surface py-2 border-b border-viewer-border/50",children:[R.jsx(zI,{className:"w-4 h-4 text-pdf-accent"}),R.jsxs("span",{className:"font-semibold text-pdf-accent",children:["Page ",f]}),R.jsxs(ay,{variant:"outline",className:"text-xs",children:[p.length," result",p.length!==1?"s":""]})]}),R.jsx("div",{className:"space-y-2",children:p.map(m=>R.jsx("div",{onClick:()=>c(m.id),className:`
                            p-3 rounded-lg border cursor-pointer transition-all duration-200
                            ${t===m.id?"border-highlight-primary bg-highlight-primary/10 shadow-sm":"border-viewer-border hover:border-pdf-primary/50 hover:bg-pdf-primary/5"}
                          `,children:R.jsxs("div",{className:"flex items-start gap-3",children:[R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("p",{className:"text-sm text-foreground leading-relaxed break-words",children:r?m.text.split(new RegExp(`(${r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi")).map((g,b)=>g.toLowerCase()===r.toLowerCase()?R.jsx("mark",{className:"bg-pdf-accent/30 text-pdf-accent font-semibold px-1 rounded",children:g},b):g):m.text}),R.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[R.jsxs("span",{children:["Page ",m.pageNumber]}),R.jsx("span",{children:""}),R.jsxs("span",{children:[m.text.length," chars"]})]})]}),R.jsx("div",{className:"flex items-center",children:R.jsx(DI,{className:`
                                w-4 h-4 transition-all duration-200
                                ${t===m.id?"text-highlight-primary transform translate-x-1":"text-muted-foreground group-hover:text-pdf-primary"}
                              `})})]})},m.id))})]},f))})})})]})},Sz=()=>{const[n,e]=_.useState(null),[t,r]=_.useState([]),[s,i]=_.useState(1),[o,a]=_.useState(!1),[c,u]=_.useState(0),[d,h]=_.useState(""),[f,p]=_.useState(""),{toast:m}=T_(),g=_.useCallback(T=>{var k;const P=(k=T.target.files)==null?void 0:k[0];P&&P.type==="application/pdf"?(e(P),r([]),i(1),p(""),h(""),a(!0),u(0),m({title:"Processing PDF",description:"Extracting text and generating images..."})):(h("Please select a valid PDF file."),m({title:"Invalid File",description:"Please select a valid PDF file.",variant:"destructive"}))},[m]),b=_.useCallback(T=>{r(T),a(!1),i(1);const P=T.reduce((k,N)=>k+N.textChunks.length,0);m({title:"Processing Complete",description:`Successfully processed ${T.length} pages with ${P} text regions.`})},[m]),y=_.useCallback(T=>{u(T)},[]),v=_.useCallback(T=>{h(T),a(!1),u(0),m({title:"Processing Error",description:T,variant:"destructive"})},[m]),x=_.useCallback(T=>{p(f===T?"":T)},[f]),A=_.useCallback(T=>{if(T){const P=t.find(k=>k.textChunks.some(N=>N.id===T));P&&P.pageNumber!==s&&i(P.pageNumber)}p(T)},[t,s]),C=()=>{e(null),r([]),i(1),p(""),h(""),a(!1),u(0)};return R.jsx("div",{className:"min-h-screen bg-viewer-background",children:R.jsxs("div",{className:"container mx-auto px-4 py-8",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[R.jsx(Vm,{className:"w-8 h-8 text-pdf-primary"}),R.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"PDF Text Extractor"})]}),R.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Upload a PDF document to extract and search through all text content with interactive highlighting"})]}),!n&&R.jsx(nc,{className:"max-w-2xl mx-auto p-8 bg-viewer-surface border-viewer-border border-2 border-dashed",children:R.jsxs("div",{className:"text-center",children:[R.jsx(zS,{className:"w-16 h-16 mx-auto mb-6 text-pdf-primary"}),R.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Upload PDF Document"}),R.jsx("p",{className:"text-muted-foreground mb-6",children:"Select a PDF file to extract text and generate interactive previews"}),R.jsxs("div",{className:"relative",children:[R.jsx("input",{type:"file",accept:".pdf",onChange:g,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:o}),R.jsxs(Bs,{size:"lg",className:"bg-pdf-primary hover:bg-pdf-primary/90 text-pdf-primary-foreground",disabled:o,children:[R.jsx(zS,{className:"w-5 h-5 mr-2"}),"Choose PDF File"]})]}),R.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"Supports multi-page PDFs with text content"})]})}),o&&R.jsx(nc,{className:"max-w-2xl mx-auto p-6 bg-viewer-surface border-viewer-border",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"w-12 h-12 mx-auto mb-4 relative",children:R.jsx("div",{className:"w-12 h-12 border-4 border-pdf-primary/20 border-t-pdf-primary rounded-full animate-spin"})}),R.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Processing PDF..."}),R.jsx("p",{className:"text-muted-foreground mb-4",children:"Extracting text from all pages and generating interactive previews"}),R.jsxs("div",{className:"space-y-2",children:[R.jsx(cP,{value:c,className:"w-full"}),R.jsxs("p",{className:"text-sm text-muted-foreground",children:[c<10&&"Loading document...",c>=10&&c<30&&"Processing pages...",c>=30&&c<70&&"Extracting text content...",c>=70&&c<90&&"Applying OCR for better accuracy...",c>=90&&"Finalizing text regions..."]})]})]})}),d&&R.jsxs(uP,{className:"max-w-2xl mx-auto mb-6 border-destructive/50 bg-destructive/10",children:[R.jsx(jI,{className:"h-4 w-4"}),R.jsx(dP,{className:"ml-2",children:d})]}),t.length>0&&R.jsxs("div",{className:"space-y-6",children:[R.jsx(nc,{className:"max-w-2xl mx-auto p-4 bg-pdf-accent/10 border-pdf-accent/20",children:R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx($I,{className:"w-5 h-5 text-pdf-accent"}),R.jsxs("div",{children:[R.jsx("p",{className:"font-semibold text-pdf-accent",children:"Processing Complete!"}),R.jsxs("p",{className:"text-sm text-muted-foreground",children:["Successfully processed ",t.length," page",t.length!==1?"s":""," with"," ",t.reduce((T,P)=>T+P.textChunks.length,0)," text regions",t.some(T=>T.textChunks.some(P=>P.id.includes("ocr")))&&R.jsxs("span",{className:"inline-flex items-center gap-1 ml-2 text-pdf-primary",children:[R.jsx("span",{children:""}),R.jsx("span",{className:"font-medium",children:"OCR Enhanced"})]})]})]}),R.jsx(Bs,{variant:"ghost",size:"sm",onClick:C,className:"ml-auto hover:bg-pdf-accent/10",children:"Upload New File"})]})}),R.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[R.jsx("div",{className:"lg:col-span-2",children:R.jsx(sz,{pages:t,highlightedChunk:f,onChunkClick:x,currentPage:s,onPageChange:i})}),R.jsx("div",{className:"lg:col-span-1",children:R.jsx(xz,{pages:t,onChunkSelect:A,selectedChunk:f})})]})]}),n&&o&&R.jsx(nz,{file:n,onProcessingComplete:b,onProgressUpdate:y,onError:v})]})})},Az=()=>R.jsx(Sz,{}),Ez=()=>{const n=rP();return _.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",n.pathname)},[n.pathname]),R.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:R.jsxs("div",{className:"text-center",children:[R.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),R.jsx("p",{className:"mb-4 text-xl text-gray-600",children:"Oops! Page not found"}),R.jsx("a",{href:"/",className:"text-blue-500 underline hover:text-blue-700",children:"Return to Home"})]})})},Cz=new pF,_z=()=>R.jsx(mF,{client:Cz,children:R.jsxs(VO,{children:[R.jsx(T2,{}),R.jsx(iD,{}),R.jsx(tj,{children:R.jsxs(JF,{children:[R.jsx(mw,{path:"/",element:R.jsx(Az,{})}),R.jsx(mw,{path:"*",element:R.jsx(Ez,{})})]})})]})});__(document.getElementById("root")).render(R.jsx(_z,{}));
